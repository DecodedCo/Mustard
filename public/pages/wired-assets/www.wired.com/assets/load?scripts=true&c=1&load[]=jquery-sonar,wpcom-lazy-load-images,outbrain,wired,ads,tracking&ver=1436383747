/* file: jquery-sonar :  : /cn/runtime/wired-wp/wordpress/wp-content/mu-plugins/cn-wordpress/helpers/lazy-load/jquery.sonar.min.js */(function(e,h,l,c){e.fn.sonar=function(o,n){if(typeof o==="boolean"){n=o;o=c}return e.sonar(this[0],o,n)};var f=l.body,a="scrollin",m="scrollout",b=function(r,n,t){if(r){f||(f=l.body);var s=r,u=0,v=f.offsetHeight,o=h.innerHeight||l.documentElement.clientHeight||f.clientHeight||0,q=l.documentElement.scrollTop||h.pageYOffset||f.scrollTop||0,p=r.offsetHeight||0;if(!r.sonarElemTop||r.sonarBodyHeight!==v){if(s.offsetParent){do{u+=s.offsetTop}while(s=s.offsetParent)}r.sonarElemTop=u;r.sonarBodyHeight=v}n=n===c?0:n;return(!(r.sonarElemTop+(t?0:p)<q-n)&&!(r.sonarElemTop+(t?p:0)>q+o+n))}},d={},j=0,i=function(){setTimeout(function(){var s,o,t,q,p,r,n;for(t in d){o=d[t];for(r=0,n=o.length;r<n;r++){q=o[r];s=q.elem;p=b(s,q.px,q.full);if(t===m?!p:p){if(!q.tr){if(s[t]){e(s).trigger(t);q.tr=1}else{o.splice(r,1);r--;n--}}}else{q.tr=0}}}},25)},k=function(n,o){n[o]=0},g=function(r,p){var t=p.px,q=p.full,s=p.evt,o=b(r,t,q),n=0;r[s]=1;if(s===m?!o:o){setTimeout(function(){e(r).trigger(s===m?m:a)},0);n=1}d[s].push({elem:r,px:t,full:q,tr:n});if(!j){e(h).bind("scroll",i);j=1}};e.sonar=b;d[a]=[];e.event.special[a]={add:function(n){var p=n.data||{},o=this;if(!o[a]){g(this,{px:p.distance,full:p.full,evt:a})}},remove:function(n){k(this,a)}};d[m]=[];e.event.special[m]={add:function(n){var p=n.data||{},o=this;if(!o[m]){g(o,{px:p.distance,full:p.full,evt:m})}},remove:function(n){k(this,m)}}})(jQuery,window,document);/* end file: jquery-sonar*/
/* file: wpcom-lazy-load-images :  : /cn/runtime/wired-wp/wordpress/wp-content/mu-plugins/cn-wordpress/helpers/lazy-load/lazy-load.js */(function($) {
    lazy_load_init();
    $( 'body' ).bind( 'post-load', lazy_load_init ); // Work with WP.com infinite scroll

    function lazy_load_init() {
        $( 'img[data-lazy-src]' ).bind( 'scrollin', { distance: 250 }, function() {
            lazy_load_image( this );
        });

        // We need to force load gallery images in Jetpack Carousel and give up lazy-loading otherwise images don't show up correctly
        $( '[data-carousel-extra]' ).each( function() {
            $( this ).find( 'img[data-lazy-src]' ).each( function() {
                lazy_load_image( this );
            } );
        } );
    }
})(jQuery);

function lazy_load_image( img ) {
    var $img = jQuery( img ),
        src = $img.attr( 'data-lazy-src' );

    $img.unbind( 'scrollin' ) // remove event binding
        .hide()
        .removeAttr( 'data-lazy-src' )
        .attr( 'data-lazy-loaded', 'true' );

    img.src = src;
    $img.fadeIn();
    //CN.debug.info('Lazy Loaded: ' + img.src );
}/* end file: wpcom-lazy-load-images*/
/* file: outbrain :  : http://widgets.outbrain.com/outbrain.js */window.OBR = window.OBR||{};(function(OBR){window.OB_releaseVer="264730";window.OBR=window.OBR||{};OBR.l=OBR.l||[];OBR.Ba=OBR.Ba||{};window.OBR$=function(d){return document.getElementById(d)};OBR.e=OBR.e||function(){var d={},a={s:function(){return d},j:function(a){d.S=a;d.Na=[];d.startTime=(new Date).getTime()},startTime:function(){return d.startTime},log:function(a){var e=((new Date).getTime()-d.startTime)/1E3;1E3>d.Na.length&&d.Na.push(e+" >"+a)},printLog:function(){if(d.S.c.Ih)window.console.log(d.Na.join("\n"));else{var a=d.S.b.La();a&&(a.innerHTML=d.Na.join("<br>"),a.style.display="block")}return d.Na.join("\n")}};a.j(OBR);return a}();OBR.printLog=OBR.e.printLog;OBR.F=function(){this.C=[]};OBR.F.prototype.add=function(d,a){var c;"string"===typeof d&&"function"===typeof a&&(c={},c.name=d,c.Qg=a,this.C.push(c))};OBR.F.prototype.Qe=function(d){var a,c;OBR.e.log("remove event :"+d);a=0;for(c=this.C.length;a<c;a+=1)if(this.C[a]&&this.C[a].name&&this.C[a].name===d)try{this.C.splice(a,1)}catch(e){OBR.e.log("rm evnt err: "+e)}};
OBR.F.prototype.o=function(d,a,c){var e,b,f,g;a=a||[];c=!!c;OBR.e.log("event fire:"+d);e=0;for(b=this.C.length;e<b;e+=1)if(f=this.C&&this.C[e]?this.C[e].name:"",g=this.C&&this.C[e]?this.C[e].Qg:null,f===d&&g)try{g.apply(this,a)}catch(h){OBR.e.log("fire event *"+d+"* error: "+h)}!0===c&&this.Qe(d)};OBR.F.prototype.ia=function(){this.C=[]};OBR.b=OBR.b||function(){var d={},a={},c=document,e=OBR,b=null;a.s=function(){d.S=e;return d};a.j=function(f){e=f};a.xa=function(){return function(){}};a.th=function(){var f=window.jQuery;return void 0!==f?!(/1\.(0|1|2|3|4)\.(0|1)/.test(f.fn.jquery)||/^1\.1/.test(f.fn.jquery)||/^1\.2/.test(f.fn.jquery)||/^1\.3/.test(f.fn.jquery)):!1};a.K=function(f){return null===f||isNaN(f)?null:e.m("outbrain_widget_"+f)};a.La=function(){return e.m("ob_holder")};a.qc=function(){if(!e.m(e.c.lb)){var f=e.b.createElement("iframe",
e.c.lb),g=f.style;g.display="none";g.width="1px";g.height="1px";f.src="about:blank";(g=a.La())||(g=a.gb());e.b.T(f,g)}};a.gb=function(){if(c.body)return c.body;var f;f=e.b.D("","","body",!0);return 0>=f.length?c.lastChild:f[0]};a.createElement=function(f,a,b,e){var d;f=c.createElement(f);"string"===typeof a&&f.setAttribute("id",a);"string"===typeof b&&(f.style.cssText=b);for(d in e)e.hasOwnProperty(d)&&f.setAttribute(d,e[d]);return f};a.N=function(f){if(e.c.md===e.c.ad)try{c.createStyleSheet().cssText=
f}catch(a){OBR.e.log(a)}else{var b=c.createElement("style"),d=c.body?"string"===typeof c.body.style.WebkitAppearance:!1;b.type="text/css";c.getElementsByTagName("head")[0].appendChild(b);b[d?"innerText":"innerHTML"]=f}};a.H=function(f,a,b){var d=c.createElement("script");d.type=e.c.ai;d.src=f;d.charset="UTF-8";d.async=!!a;d.defer=!1;b&&e.b.p(d,"load",function(f){var a=f.target;a&&setTimeout(function(){a.parentNode.removeChild(a)},3E3)});return d};a.Yj=function(f,a){var b=e.b.createElement("link",
f);b.setAttribute("rel","stylesheet");b.setAttribute("type",e.c.wg);a&&b.setAttribute("href",a);return b};a.dg=function(f){var a=e.m("ob_iframe");a&&(a.src=f)};a.Ie=function(){var f;f=isNaN(f)?1E5:f;return Math.floor(Math.random()*f)};a.Vi=function(f,a,b){return f.replace(a,b)};a.hk=function(){var f;if(f=OBR.m("objsonpp"))if(a.Oh())a.Aa(f.parentNode)&&f.parentNode.removeChild(f);else return OBR.m("objsonpp");f=c.createElement("iframe");f.id="objsonpp";f.aj&&(f.aj="seamless");(f.frameElement||f).style.cssText=
"width: 0; height: 0; border: 0";f.src="";c.body.appendChild(f);return f};a.O=function(f){var a,b;b=c.getElementsByTagName("head");try{b&&0<b.length?b[0].insertBefore(f,b[0].firstChild):(a=c.getElementsByTagName("script"),a[0].insertBefore(f,a[0].firstChild))}catch(d){e.e.log("Err insertToHead:"+d)}};a.gk=function(a){a=a||OBR;return"function"!==typeof a.F?(OBR.e.log("namespace.EventManager not function"),null):new a.F};a.G=function(a){return encodeURIComponent(a)};a.Aa=function(a){return null!==a};
a.Vh=function(f){var b,c=!1;if(a.uc(f))return!1;b=f.Vd().recMode||"";f=f.Vd().dynamicWidgetLayout||"";b=e.c.Zi[b]||"";"2"===b&&"1"===(e.c.$i[f]||"")&&(c=!0);c||"1"!==b&&"3"!==b||(c=!0);return c};a.uc=function(a){return void 0===a||null===a};a.Zh=function(f){return a.uc(f)||""===f};a.getElementsByClassName=function(f,b){b||(b=document);return b.getElementsByClassName?b.getElementsByClassName(f):a.D("class",f,"*",!0,!0,b)};a.D=function(f,b,e,d,l,m){var n,q,p;n=[];e=e||"*";d=!!d;l=a.Zh(l)?!0:!1;e=m?
m.getElementsByTagName(e):c.getElementsByTagName(e);m=0;for(q=e.length;m<q;m+=1)p="class"===f?e[m].className:e[m].getAttribute(f),null!==p&&(!1===l&&(p=p.toLowerCase(),b=b.toLowerCase()),(p=""===f?!0:d?-1<p.indexOf(b):p===b)&&n.push(e[m]));return n};a.wb=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c,!1)};a.p=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,function(){c.call(a)}):a.addEventListener&&a.addEventListener(b,c,!1)};a.T=function(a,
b){try{b.appendChild(a)}catch(c){e.e.log("fail insert into Dom:"+c)}};a.xb=function(b){b=e.m(b);!a.uc(b)&&a.Aa(b.parentNode)&&b.parentNode.removeChild(b)};a.insertBefore=function(a,b){return b.parentNode.insertBefore(a,b)};a.isArray=function(a){return a instanceof Array?!0:"[object Array]"===Object.prototype.toString.call(a)};a.Bb=function(a,b){var c=/htt(p|ps)?:\/\/127\.0\.0\.1(:\d\d\d\d)?/i;return/htt(p|ps)?:\/\/([\w\-]*|[\w\-]*\.[\w\-]*)\.outbrain\.com(:\d\d\d\d)?/i.test(a)||c.test(a)?a:b};a.Fj=
function(a){a=a.replace(/^(\s*)/g,"");var b=c.createElement("div");b.innerHTML=a;return b.childNodes};a.fb=function(a,b){return a?a.getAttribute(b):null};a.oa=function(a,b,c){a&&a.setAttribute(b,c)};a.ba=function(a,b){var c=RegExp("[ '\"|]"+b+"[ '\"|]");a&&!c.test("|"+a.className+"|")&&(a.className+=" "+b)};a.vb=function(a,b){a&&typeof b===e.c.Ej&&(a.classList?a.classList.remove(b):a.className=a.className.replace(RegExp("(^|\\b)"+b+"(\\b|$)","gi")," "))};a.da=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,
"\\]");var c,e;try{return c=RegExp("[\\?&]"+a+"=([^&#]*)","i"),e=c.exec(decodeURIComponent(window.location.href.replace(/\+/g," "))),null===e?b:e[1]}catch(d){return b}};a.kg=function(a){"string"===typeof a&&0<a.indexOf("#")&&(a=a.substr(0,a.lastIndexOf("#")));return a};a.td=function(a){var b=e.c.R+"/strip_default.png";a.src!==b&&(a.alt="",a.title="",a.src=b)};a.Eg=function(){var a=null,b,e,d=null;if("string"===typeof window.OB_MP_feed)a=window.OB_MP_feed;else if((b=c.getElementsByTagName("head"))&&
0<b.length)for(e=b[0].getElementsByTagName("link"),b=0;b<e.length;b+=1)if(d=e[b],null!==d.type&&("application/rss+xml"===d.type||"application/atom+xml"===d.type)&&null!==d.href&&""!==d.href){a=d.href;break}return a};a.M=function(a,b){var c=null;a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));return c};a.fj=function(){var b=a.La(),g,c;a.Aa(b)&&(g=e.b.createElement("span","ob_a"),a.insertBefore(g,b),g.innerHTML=".",c=
a.M(g,"color"),a.xb("ob_a"),g=e.b.createElement("a","ob_a"),g.setAttribute("href","void(0)"),g.innerHTML=".",a.insertBefore(g,b),b=a.M(g,"color"),a.xb("ob_a"),c="rgb(0, 0, 0)"===c||"#000000"===c?"#555":c,a.N(".ob-tcolor{color:"+c+"} .ob-lcolor{color:"+b+"} .ob-bgtcolor{background-color:"+c+"} .item-link-container:hover .ob-tcolor{border-color:"+c+"} "+(document.addEventListener?"":".odb_li:hover .ob-zapping-icon,.odb_div:hover .ob-zapping-icon,.item-container:hover .ob-zapping-icon,.ob-dynamic-rec-container:hover .ob-zapping-icon,.odb_li:hover .ob-textual-zapping-icon,.odb_div:hover .ob-textual-zapping-icon,.item-container:hover .ob-textual-zapping-icon,.ob-dynamic-rec-container:hover .ob-textual-zapping-icon{display:none !important;}")))};
a.Td=function(b){var c=a.Rd("property","og:url","meta","content");null===c&&(c=a.Rd("rel","canonical","link","href"));null!==c||b||(c=window.location.href);null===c&&(c="");return c};a.Rd=function(b,c,e,d){var l=null;b=a.D(b,c,e,!1);null!==b&&0<b.length&&(l=b[0].getAttribute(d));return l};a.eg=function(b){var c,d,k;k=e.l[b];b=k.i("tracking",!1);c=k.i("comScoreEnabled",!0);d=e.c.ud;!1===b&&(!0===c&&!1===d&&!k.Xd())&&(a.qc(),b=e.m(e.c.lb))&&(b.src=e.c.R+"/"+e.c.sb+"3rd/comScore/comScore.htm",e.c.ud=
!0)};a.qh=function(){var b=a.jb(8);"string"===typeof window.name&&(""===window.name||-1<window.name.indexOf("frame"))?(window.name=b,b=window.name):"string"===typeof window.name&&""!==window.name&&(b=window.name);return b=e.b.G(b.substring(0,9))};a.jb=function(a){var b,c;b=[];a="number"===typeof a?a:8;for(c=0;c<a;c+=1)b.push("0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(61*Math.random())));return b.join("")};a.kc=function(a){for(var b in e.Ba)if(e.Ba.hasOwnProperty(b)&&
e.Ba[b].k===a)return e.Ba[b];return null};a.lk=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a.ya=function(a,b){return"function"!==typeof a?null:void 0===b?a():a(b)};a.Oh=function(){return"Microsoft Internet Explorer"===navigator.appName};a.xg=function(a,b){return a*b};a.Od=function(a){if(!a||""===a)return[];a=a.replace("","").replace("http://","").replace("https://","").replace("www.","").replace("www2.","").split("/");a.pop();return 0<a.length?a:[]};a.Yg=function(b,c){var e=
a.Od(b),d=[],l="";if(c>=e.length)l=e.join(".");else{d[0]=e[0];for(l=1;l<=c;l+=1)d[l]=e[l];l=d.join(".")}return l};a.gh=function(){return"http"+("https:"===c.location.protocol?"s":"")};a.fh=function(){var b,g;b=c.getElementById("widgetVersionSync");null===b&&(b=a.createElement("iframe","widgetVersionSync"),g=a.createElement("div",null,"display:none; height:0px; width:0px; border:none;"),g.appendChild(b),a.gb().appendChild(g));return b};a.Oj=function(b){var c;c=window.OB_releaseVer;isNaN(c)||(isNaN(b)||
c>=b)||(b=a.gh()+"://widgets.outbrain.com/external/sync/outbrainjs.html?needToBeVer="+b.toString(),c=a.fh(),c.src=b)};a.Rf=function(b){b=b.i("widgetVersionSync",1);isNaN(b)||""===b||(b=parseInt(b,10)||1,a.Oj(b))};d.nc=function(){if(b)return b;var a;try{var c=window.localStorage;c.setItem("OBtst","");c.removeItem("OBtst");a=c}catch(e){a={Ab:{},setItem:function(a,b){this.Ab[a]=b},removeItem:function(a){this.Ab[a]=void 0},getItem:function(a){return"undefined"!==typeof this.Ab[a]?this.Ab[a]:null}}}return b=
a};a.qj=function(a){d.nc().setItem("OB-USER-TOKEN",a)};a.Wd=function(){var a=d.nc().getItem("OB-USER-TOKEN");return a?a:null};a.yg=function(){d.nc().removeItem("OB-USER-TOKEN")};a.j(OBR);return a}();OBR.pa=function(d,a,c,e,b,f,g,h,k){var l,m;l=this;m=0;k="function"===typeof k?k:OBR.b.xg;l.start=function(){var n;m+=1;OBR.b.ya(d,m)?OBR.b.ya(a,m):(n=OBR.b.ya(h,m))?OBR.b.ya(e,m):(n=m===f&&1E3!==f)?OBR.b.ya(e,m):(OBR.b.ya(c,m),n=g?k(m,b):b,setTimeout(function(){l.start()},n))};l.start()};
OBR.zd=OBR.zd||{Jh:function(){return"complete"===document.readyState}};OBR.fc=function(){var d={},a=[];d.add=function(c){a.push(c)};d.remove=function(c){a.splice(c,1)};d.top=function(){return 0<a.length?a.shift():null};d.Nh=function(){return 0>=a.length};d.ek=function(){return a};d.ac=function(){a=[]};return d};
OBR.Ga=function(){function d(e,b){a.Va="resolve"===e?function(a){a&&a(b)}:function(a,c){c&&c(b)};a.Ea=a.Ri=function(){throw Error("Promise already completed.");};for(var f,g=0;f=c[g++];)f[e]&&f[e](b);delete c}var a={},c=[];a.Va=function(a,b){c.push({resolve:a,reject:b})};a.Ea=function(a){d("resolve",a)};a.Ri=function(a){d("reject",a)};return a};OBR.c=OBR.c||function(){var d={},a={},c=OBR,e;a.Ef="opera";a.ad="msie";a.Cf="firefox";a.Af="chrome";a.Gf="safari";a.Df="mozilla";a.Wj="boolean";a.Ej="string";a.pk="object";a.Bk="undefined";a.ok="number";a.lb="ob_iframe";a.he=!0;a.Fe=0;a.Eb="outbrain_widget_";a.ai="text/javascript";a.wg="text/css";a.$j=document;a.ne=void 0!==document.createElement("script").async;a.yf=c.b.qh();a.Ki=document.referrer;a.Ji=c.b.G(document.referrer);a.di=document.location.href;a.nk=c.b.G(a.di);a.$a=!1;a.Qc="";a.Xb=navigator.userAgent.toLowerCase();
a.yi=navigator.platform.toLowerCase();e=a.Xb;a.md=/opera/.test(e)?a.Ef:/msie/.test(e)?a.ad:/firefox/.test(e)?a.Cf:/chrome/.test(e)?a.Af:/safari/.test(e)?a.Gf:a.Df;a.sc=!!/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(e);a.Qh=0;a.le=a.Xb.match(/msie 8/)||a.Xb.match(/msie 7/);a.Ph=function(){return void 0===window.XMLHttpRequest&&void 0!==ActiveXObject};a.Ei=window.OB_platformType||null;a.nb="number"===typeof a.Ei;a.$e=null;a.Fd=null;a.Cj=function(){a.nb&&(a.$e&&a.Fd)&&(a.$e(),
a.Fd())};a.Wa="string"===typeof window.OB_releaseVer?window.OB_releaseVer:"0";a.mi=!0===window.OB_disable_odbl;e=("https:"===document.location.protocol?"https":"http")+"://";a.bg="/blogutils/ExcludeRec.action?bocr=";a.qk="html";a.vh=c.b.Bb(c.b.da("wiodb",e+"hpr.outbrain.com"),e+"hpr.outbrain.com");a.Bc=c.b.Bb(c.b.da("wiodb",e+"odb.outbrain.com"),e+"odb.outbrain.com");a.cg=e+"storage.outbrain.com/";a.R=c.b.Bb(c.b.da("wihost",e+"widgets.outbrain.com"),e+"widgets.outbrain.com");a.zi=c.b.Bb(c.b.da("wiout",
e+"outbrain.com"),e+"outbrain.com");a.Ed=c.b.da("wixp",null);a.Ee=e+"log.outbrain.com/";a.sb="nanoWidget/";a.Bi=a.nb?"NANOWDGTLT13":"NANOWDGT01";a.ji=a.R+"/"+a.sb+a.Wa+(a.nb?"/moduleLT":"/module");a.xe=a.R+"/"+a.sb+"3rd";a.Ih="object"===typeof window.console;a.of=c.b.kg(c.b.Eg());a.nf=null===a.of?"":c.b.G(a.of);a.ud=!1;a.ni="true"===c.b.da("obdraft",!1)?"&obDraft=true":"";a.Hf=!1!==c.b.da("obAbtest",!1)?"&obAbtest="+c.b.da("obAbtest",""):"";a.qg="true"===c.b.da("obCrDraft","false")?"&crDraft=true":
"";a.qb=0;a.Oa=null;a.Ze="data-obscrollable";a.Zi={touch_strip:"1",odb_dynamic:"2","odb_dynamic_touch-strip":"3"};a.$i={"touch-strip":"1"};a.Hj=!!window.OB_testMode;a.Rj={KALTURA:"kaltura",BRIGHTCOVE:"brightcove"};a.s=function(){d.S=c;return d};return a}();OBR.d=OBR.d||function(){var d={},a,c={};d.j=function(c,b){a=c;d.Ii(b)};d.f={Kb:"POPUPDESCRIPTION",hd:"WIDGETSTATISTICS",fd:"STATISTICS",Za:"WHATIS",Gb:"FLYTHROUGH",Wb:"VIDEOPLUGIN",Vb:"VIDEO",Lb:"POSCUL",Qb:"SCROLL",Rb:"SCROLLEXTERNAL",Nb:"RECINIFRAME",ed:"REGISTER",Ob:"REFRESHWIDGET",Sb:"SKYLANDER",Ya:"LOADMORE",Qj:"DYNAMICTEXTTRUNCATION",Tb:"TOPBOX",Ib:"PAGER",Jb:"PAGEREXTERNAL",Ub:"USERZAPPING"};d.Ff=function(a,b){var c={Zj:a,url:b,version:-1,state:0,Yb:null,vd:this,kd:null,ig:function(){if(2===
c.state)c.re();else if(0===c.state){var a=OBR.b.H(c.url,!0);c.state=1;OBR.b.O(a)}},re:function(){c.state=2;"function"===typeof c.Yb&&c.Yb.call(c.vd,c.kd)}};return c};d.Ii=function(c){function b(b){return a.c.ji+"/"+b}function f(a,b){c[a]||(c[a]=new d.Ff(a,b))}f(d.f.Kb,b("popupDescription.js"));f(d.f.hd,b("widgetStatistics.js"));f(d.f.fd,b("statistics.js"));f(d.f.Za,b("whatis.js"));f(d.f.Ub,b("userZapping.js"));f(d.f.Gb,b("flyThrough.js"));f(d.f.Wb,b("videoPlugin.js"));f(d.f.Vb,b("video.js"));f(d.f.Lb,
b("positionCalculation.js"));f(d.f.Nb,b("recInIframe.js"));f(d.f.ed,b("registration.js"));f(d.f.Ob,b("refreshWidget.js"));f(d.f.Sb,b("skyLander.js"));f(d.f.Tb,b("topBox.js"));f(d.f.Ya,b("loadMore.js"));f(d.f.Qb,b("scroll.js"));f(d.f.Rb,a.c.xe+"/scroll/scrollExternal.js");f(d.f.Ib,b("pager.js"));f(d.f.Jb,a.c.xe+"/pager/pagerExternal.js")};d.bh=function(a){return c[a]};d.v=function(a,b,c,g){if(a=d.bh(a))a.Yb=b||OBR.b.xa(),a.vd=c,a.kd=g,a.ig()};d.fk=function(a){return c[a].state};d.r=function(e){"-1"!==
a.c.Wa&&c[e].re()};d.j(OBR,c);return d}();OBR.j=OBR.j||void 0;OBR.m=function(d){return document.getElementById(d)};OBR.X=OBR.X||function(){var d={},a={},c,e;a.j=function(a){c=a=a||OBR;d.Ra=new c.F;e=!1};a.s=function(){return d};d.Gh=function(){var a,f;a=c.b.createElement("iframe","ob_ping");a.setAttribute("id","ob_ping");a.style.border="0px";a.style.width="0px";a.style.height="0px";a.setAttribute("src",c.c.Bc+"/utils/ping.html?r="+c.b.Ie());c.b.p(a,"load",function(){c.e.log("ping returned");c.c.Fe=2;d.Ra.o("success");c.X.Te()});f=c.b.La();null!==f&&(c.e.log("ping inserted"),c.b.T(a,f))};d.Di=function(){c.e.log("ping Wait");
new c.pa(function(){return 2===c.c.Fe},function(){},c.b.xa(),function(){d.Ra.o("fail");c.X.Te()},50,200,!1)};a.Te=function(){c.b.xb("ob_ping")};a.ui=function(a){d.Ra.add("success",a)};a.ti=function(a){d.Ra.add("fail",a)};a.Th=function(){return e};a.hf=function(){e=!0};a.Ci=function(){d.Gh();d.Di()};a.J=function(){d.Ra.ia()};a.j(OBR);return a}();OBR.za=OBR.za||function(){var d,a={},c={},e;a.j=function(a){d=a=a||OBR;e=new d.F};a.s=function(){return c};c.bc=function(a){var c,g;c=0;for(g=a.length;c<g;c+=1)d.b.oa(a[c],"data-ob-mark","true"),d.b.oa(a[c],"data-browser",d.c.md),d.b.oa(a[c],"data-os",d.c.yi),e.o("find",[a[c]])};c.Ld=function(){return d.b.D("class","OUTBRAIN","div",!0)};c.Xg=function(a){var c,g=[],e=[];for(c=0;c<a.length;c++){var k=a[c];if("string"===typeof k.containerId)if(d.m(k.containerId)){var l=d.m(k.containerId);OBR.ha.sg(k,
l);e.push(l)}else g.push(a[c])}window.OB_elements=g;return e};c.eh=function(){var a=[];"object"===typeof window.OB_elements&&0<window.OB_elements.length&&(a=window.OB_elements);return a};c.dh=function(){var a=[],e=c.Ld(),g,h;g=0;for(h=e.length;g<h;g+=1){var k=d.b.fb(e[g],"data-ob-mark");null!==k&&"true"===k||!e[g]||a.push(e[g])}g=c.eh();if(0<g.length)for(d.e.log("Array of elements found!"),e=c.Xg(g),g=0,h=e.length;g<h;g+=1)a.push(e[g]);return a};a.Uj=function(a){c.Hd(a)};c.Hd=function(a){if(void 0===
a){var f=!1;d.e.log("searching for containers");new d.pa(function(){return f},d.b.xa(),function(){f=d.zd.Jh();var a=c.dh();f&&d.e.log("checking:("+f+")");0<a.length&&c.bc(a)},e.o("stopSearch"),50,1E3,!1)}else 0<(a.length||0)&&c.bc(a)};a.kk=function(){return 0<c.Ld().length};a.ri=function(a){e.add("find",a)};a.sk=function(a){e.add("stopSearch",a)};a.Gd=function(){c.Hd()};a.Kg=function(a){var e=[],g,h;g=0;for(h=d.l.length;g<h;g+=1){var k=d.b.K(g);null!==k&&("string"===typeof a&&d.b.oa(k,"data-src",
a),d.b.oa(k,"data-ob-mark","false"),e.push(k))}0<e.length&&(d.l=[],c.bc(e))};a.J=function(){e.ia();d.l=[]};a.j(OBR);return a}();OBR.w=OBR.w||function(){var d={},a={},c;a.j=function(a){c=a=a||OBR;d.Ec=new c.fc;d.Pa=new c.F;d.mb=!1};d.Sg=function(a){var b,f,g=a.L(),h=c.b.Vi;b=a.ph();var k=c.b.Wd(),l=c.q.ea(),l="&winW="+l.width+"&winH="+l.height,m=""!==c.c.Qc&&0!==g?"&t="+c.c.Qc:"",n=!0===c.c.Hj||!0===a.Xd(),q=a.Kd()?"&api_user_id="+a.Kd():"",p=c.c.Ed?"&xp="+c.b.G(c.c.Ed):"",s=a.Sd()?a.Sd():c.c.Bi;b=b&&"hp"===b?c.c.vh+"/utils/get?url=$LNK$SRC&settings=$SET&recs=$REC&widgetJSId=$WID&key=$KEY&idx=$IDX&version=$VER&ref=$REF&apv=$APV&sig=$SIG&format=$FRT&rand=$RND$LSD$DRFT$ABTEST$XP$TOKEN$WINDOWSIZE$TST$USRID$CRDRFT":
c.c.Bc+"/utils/get?url=$LNK$SRC&settings=$SET&recs=$REC&widgetJSId=$WID&key=$KEY&idx=$IDX&version=$VER&ref=$REF&apv=$APV&sig=$SIG&format=$FRT&rand=$RND$LSD$DRFT$ABTEST$XP$TOKEN$WINDOWSIZE$TST$USRID$CRDRFT";f=a.ic();b=h(b+(""!==f&&null!==f?"&fbk="+f:""),"$LNK",c.b.G(a.la()));b=h(b,"$SRC",d.lh(a));b=h(b,"$IDX",g);b=h(b,"$SET",!0);b=h(b,"$REC",!0);b=h(b,"$KEY",s);b=h(b,"$WID",a.A());b=h(b,"$VER",c.c.Wa);b=h(b,"$REF",c.c.Ji);b=h(b,"$SIG",c.c.yf);b=h(b,"$APV",c.c.$a);b=h(b,"$FRT",a.Zg());b=h(b,"$RND",
c.b.Ie());b=h(b,"$DRFT",c.c.ni);b=h(b,"$ABTEST",c.c.Hf);b=h(b,"$CRDRFT",c.c.qg);b=h(b,"$XP",p);b=h(b,"$LSD",k?"&lsd="+c.b.G(k):"");b=h(b,"$TOKEN",m);b=h(b,"$WINDOWSIZE",l);b=h(b,"$TST",n?"&testMode=true":"");return b=h(b,"$USRID",q)};d.lh=function(a){var b="&srcUrl=";a=a.mh();return b=null!==a&&"string"===typeof a&&0<a.length?b+c.b.G(a):0<c.c.nf.length?b+c.c.nf:""};d.zh=function(a,b){var f=b.k,g=b.A(),h=c.b.H(a,!0);c.b.p(h,"error",function(){d.Pa.o("onOdbFail_"+f+"_"+g,[b],!0)});c.b.O(h);d.Pa.o("onOdbFire_"+
f+"_"+g,[b],!0);c.e.log("fire this src "+a)};d.oj=function(a){c.c.ne&&setTimeout(function(){d.Se(a.k,a.A())},1E4)};d.Se=function(a,b){c.b.xb("ob_odbCall_"+a+b)};a.o=function(){if(!0!==d.mb&&!0===c.X.Th()){d.mb=!0;var a=d.Ec.top(),b;a?(c.e.log("fire odb for "+a.la()),b=d.Sg(a),d.zh(b,a),d.oj(a)):d.mb=!1}};a.De=function(a,b){d.Pa.add("onOdbFire_"+a.k+"_"+a.A(),b)};a.Ce=function(a,b){d.Pa.add("onOdbFail_"+a.k+"_"+a.A(),b)};a.Uc=function(a,b){d.mb=!1;d.Se(a,b)};a.ej=function(a){!0===a&&(OBR.c.$a=a)};
a.sj=function(a){a&&(c.c.Qc=a)};a.yh=function(){c.c.$a=!1};a.Hc=function(e){d.Ec.add(e);c.e.log("register odb for "+e.la());a.o()};a.Wf=function(c){a.Uc(c.k,c.A());a.o()};a.J=function(){d.Ec.ac();d.Pa.ia()};a.s=function(){d.S=c;return d};a.j(OBR);return a}();OBR.h=OBR.h||function(){function d(){c.e.log("ping fail")}function a(){c.e.log("ping success");c.X.hf();c.w.o()}var c,e={},b={},f;e.rb="manualDataReady";e.ue="manualEditorialDataReady";e.wc="manualClickReady";e.j=function(a){c=a=a||OBR;f=new c.F};e.s=function(){return b};e.tk=function(a){f.add("onHtmlReturn",a)};e.Oi=function(a){f.add("noRecs",a)};b.Ia=function(a){c.e.log("rec "+a+" was rendered");var f=c.l[a];f.ga(!0);0===a&&c.b.fj();b.nd(f);c.b.Rf(f);c.display.Dh(f);b.Ai(f)};b.Ai=function(a){"odb_dynamic_top-box-pager"===
a.i("recMode","")&&OBR.d.v(OBR.d.f.Ib,function(a){OBR.Fc.zc(a)},this,a)};b.ik=function(a){return Math.floor(Math.random()*a)+1};b.nd=function(a){a.i("globalWidgetStatistics",!0)&&c.Ha&&c.Ha.Of(a)};b.Nj=function(a){c.e.log("widget was found");a=c.Fb.Nf(a);0===a.k&&b.Xf();!0===a.Kh()?c.e.log("Dynamic loader - stop odb!"):c.w.Hc(a)};e.ze=function(a,b){var f="NA",d=a&&a.response?a.response:null,m;m=c.b.kc(b);m.Ma()||(d&&(d.request&&d.request.widgetJsId)&&(f=d.request.widgetJsId),c.w.Uc(b,f),m&&(d&&d.documents)&&
(m.ga(!0),m.ge()?e.cb(e.ue,b,f,a):e.cb(e.rb,b,f,a.response.documents)),c.w.o())};e.cb=function(a,b,c,d){f.o(a+b+c,[d,b],!0)};e.Pe=function(a,b,c,d){f.add(a+b+c,d)};e.xc=function(a,b){if(null!==a){var f=0,f=a.permalink,d=a.widgetId,m=c.ha.vg(a);f&&"string"===typeof f&&(d&&"string"===typeof d)&&(c.e.log("manual Odb call"),f=e.gi(f),m.idx=f,m.isManualWidget=!0,m=c.Fb.wd(m),m.kj(),c.Ba[f]=m,m.Mh()&&c.ka.Uf(m),e.Pe(e.rb,f,m.A(),b),c.X.hf(),c.w.Hc(m))}};e.gi=function(a){var b=0,f=c.c;null===f.Oa&&(f.Oa=
0<c.l.length?c.l[0].la():null);f.Oa===a?(0===f.qb&&(f.qb=100),b=f.qb+1):f.Oa=a;return f.qb=b};e.pb=function(a,d){var e=OBR.m(c.c.lb);c.b.Aa(e)&&c.b.Aa(e.parentNode)&&e.parentNode.removeChild(e);c.b.qc();"function"===typeof d&&f.add(b.wc,d);if(null!==a&&(e=a.link)&&"string"===typeof e){c.e.log("manual Click");if(null!==e.match(/http:\/\/.+outbrain.com/i))c.b.dg(e+"&noRedirect=true");else throw"Wrong redirect link: "+e;f.o(b.wc);f.Qe(b.wc)}};b.me=function(a){return a.i("stopRater",!1)};b.Xf=function(){c.c.mi||
c.c.ne?(c.e.log("async - no ping"),a()):c.X.Ci()};e.Cc=function(a,d){var k,l;OBR.e.log("HTML returned");d=b.ye(d);(k=c.l[d])?(0>=k.jh(a)&&f.o("noRecs",[k]),k.Ma()||(k.setData(a),c.w.sj(k.u("t",null)),c.c.sc="mobile"===k.u("readerPlatform","desktop"),l=k.A(),f.o("odbRtn_"+l,[k]),f.o("odbRtn_"+d,[k]),f.o("onHtmlReturn",[k]),b.me(k)||k.tc()||b.$h(k.jc())?b.nd(k):(c.w.ej(k.i("apv",!1)),e.Uh(k)?e.Da(d):e.sh(k),b.gg(k))),e.Mg(k)):c.e.log("odbHtmlReturned : Widget not found")};b.ye=function(a){return 1E3>
a?a:a%1E3};b.$h=function(a){var b=!1;null!==a.match(/(<\/?met|<\/?scr)/i)&&(b=!0,c.e.log("SECURITY"));return b};e.Mg=function(a){b.me(a)||(c.w.Uc(a.k,a.A()),c.w.o())};b.gg=function(a){!c.c.sc&&a.Yh()&&a.Wh()?c.d.v(c.d.f.Sb,function(a){c.lf.j(a)},this,a):a.Xh()&&c.d.v(c.d.f.Tb,function(a){c.sf.j(a)},this,a)};e.Uh=function(a){var b=!0;if(a.pe()||a.je()||a.n&&a.n.reason&&a.n.reason===OBR.ka.ra.dd)b=!1;return b};e.sh=function(a){var b=a.k;a.pe()?c.d.v(c.d.f.Wb,function(){c.Cb.tg(b)},this):a.je()&&c.display.Bh(a)};
e.Da=function(a){c.display.Da(c.l[a]);c.e.log("HTML - Render");e.Fi(a)};e.Fi=function(a){c.b.eg(a);c.Bd.rh(a)};e.Le=function(a,b){c.b.ba(b,"ob_clicked");var f=c.b.fb(b,"data-redirect");null!==f&&(b.href=f);return!0};e.Ca=function(a){c.wa&&c.wa.xi();b.jg();c.za.Kg(a);return!0};e.J=function(){f.ia()};e.We=function(){c.za.ri(b.Nj);c.display.Qa(b.Ia);c.X.ui(a);c.X.ti(d);c.c.nb?c.c.Cj():c.za.Gd()};e.ag=function(a,b,f){if(window.confirm("Removing this recommendation will remove it permanently for this section and will refresh the recommendations.\n Are you sure you want to remove this recommendation?")){var d=
"https://my.outbrain.com/manage/",d=!1===f?d+("add-zapped-document?publisherId="+b+"&docUrl="+c.b.G(a)):d+("add-rule?publisherId="+b+"&ruleValue="+c.b.G(a)+"&ruleType="+f);a=c.b.H(d,!0);c.b.O(a)}};e.$f=function(a){window.confirm("Removing this recommendation will remove it permanently for this section and will refresh the recommendations.\n Are you sure you want to remove this recommendation?")&&(a=c.b.H(c.c.Bc+c.c.bg+a+"&index=1&templateIndex=1&sig="+c.c.yf,!0),c.b.O(a))};e.Xi=function(a){a&&(a.ob_exclude_resp&&
"number"===typeof a.ob_exclude_resp.code&&1!==a.ob_exclude_resp.code)&&e.Ca()};e.Ni=function(a,b){if(b&&"function"===typeof b){var d="odbRtn_"+a;f.add(d,b);var e=c.ha.Zd(a);e&&e.fe()&&f.o(d,[e])}};e.Mi=function(a,b){if(b&&"function"===typeof b){var d="odbRtn_"+a;f.add(d,b);var e=c.ha.Yd(a);e&&e.fe()&&f.o(d,[e])}};e.Ug=function(a){return(a=c.ha.Zd(a))?a.u("tcr",-1):null};e.zb=function(){c.za.Gd()};e.ia=function(){c.wa&&c.wa.xi();c.display.J();c.w.J();c.X.J();this.J();c.za.J();c.ka&&c.ka.J();c.c.$a=
!1};e.Si=function(){this.ia();this.We()};b.jg=function(){c.w.yh();c.Ha.ac()};e.Ne=function(a,f){a=b.ye(a);var d=c.l[a];d.Li(f);OBR.Ca&&OBR.Ca.Oc(d);c.w.Hc(d)};e.ii=function(a,b,c,d){b&&a&&(e.pb({link:b},null),f.o("videoClick_"+a,[{videoUrl:c,videoId:d}]))};e.si=function(a,b){f.add("videoClick_"+a,b)};e.j(OBR);return e}();OBR.display=OBR.display||function(){var d,a={},c;a.j=function(a){d=a=a||OBR;c=new d.F};a.be=function(c,b){var f=d.b.Fj(c),g=d.b.K(b.k);g&&(f&&0<f.length)&&(0<b.mc()?a.Gg(g,f[0],b.k):a.cf(f[0],g,b.k),d.e.log("element inserted"))};a.Gg=function(c,b,f){function g(){a.uh(c).Va(function(c){a.nj(c,b,f).Va(function(b){a.Fg(b)})})}var h=new d.Ga;h.Va(function(){a.Hg(c).Va(g)});h.Ea()};a.Hg=function(a){var b=new d.Ga,c=1,g=setInterval(function(){0.1>=c?(clearInterval(g),b.Ea(a)):(a.style.opacity=c,d.c.le?
c=0:(a.style.filter="alpha(opacity="+100*c+")",c-=0.1*c))},10);return b};a.uh=function(a){var b=new d.Ga;a.style.opacity=0;setTimeout(function(){b.Ea(a)},0);return b};a.nj=function(c,b,f){var g=new d.Ga;a.cf(b,c,f);setTimeout(function(){g.Ea(c)},0);return g};a.cf=function(a,b,f){b.innerHTML="";d.b.T(a,b);c.o("afterRender",[f])};a.Fg=function(a){var b=new d.Ga,c=0.1,g=setInterval(function(){1<=c?(clearInterval(g),a.removeAttribute("style"),b.Ea(a)):(a.style.opacity=c,d.c.le?c=1:(a.style.filter="alpha(opacity="+
100*c+")",c+=1.6*c))},50)};a.rk=function(a){c.add("beforeRender",a)};a.Qa=function(a){c.add("afterRender",a)};a.Dh=function(a){d.b.Vh(a)&&OBR.d.v(OBR.d.f.Qb,function(a){OBR.scroll.zc(a)},this,a)};a.Bh=function(c){OBR.d.v(OBR.d.f.Lb,d.b.xa(),this);OBR.d.v(OBR.d.f.Gb,function(){a.Pg(c)},this)};a.Pg=function(d){a.be(OBR.eb.wh(d),d);OBR.eb.j();c.o("afterRender",[d.k])};a.Da=function(c){d.e.log("HTML - render widget");a.be(c.jc(),c);c.ga(!0)};a.J=function(){c.ia()};a.j(OBR);return a}();OBR.jd=OBR.jd||function(d){var a={},c=OBR,e={},b={},f="",g=null,h=null,k=null,l=!1,m=0,n="html",q=!1,p=4E3,s="nano",t=!1,u=!1,r=0,v=!1,w=null,x=null,y=!1;a.Tj=0;a.Sj=1E3;a.Pj=2;a.k=d;a.bb="";a.n={};a.Jg={slow:7E3,normal:5E3,fast:3E3,qa:5};a.setData=function(c){c&&c.response&&(c=c.response,c.request&&(b=c.request),c.settings&&(e=c.settings),c.html&&(f=c.html),q=!0);a.Qf()};a.Vd=function(){return e};a.i=function(a,b){var c;c=e[a];return"undefined"!==typeof c&&null!==c?c:b};a.Qf=function(){a.tj()};a.jh=
function(a){var b={};return a&&(a.response&&a.response.request)&&(b=a.response.request,a=b.tcr)?a:-1};a.u=function(a,c){var d=b[a];return d?d:c};a.jc=function(){return f};a.vj=function(b){a.gf(b.permalink);a.xj(b.widgetId);a.ij(b.dynLoad);a.yj(b.widgetType);a.wj(b.fbk);a.jj(b.timeout);a.pj(b.srcUrl);a.rj(b.testMode);a.lj(b.installationKey);a.dj(b.userId);"boolean"===typeof b.isManualWidget&&a.mj(b.isManualWidget)};a.A=function(){return g};a.xj=function(a){g="string"===typeof a?a:"NA"};a.kj=function(){n=
"japi"};a.Zg=function(){return n};a.xk=function(a){m=a};a.ck=function(){return m};a.la=function(){return h};a.gf=function(a){h=a};a.rj=function(a){v="true"===a||!0===a};a.Xd=function(){return v};a.lj=function(a){w=a};a.dj=function(a){x=a};a.Kd=function(){return x};a.pj=function(a){k=a};a.mh=function(){return k};a.Kh=function(){return l};a.ij=function(a){l="true"===a||!0===a};a.je=function(){return"flyThrough"===a.i("displayMode","")};a.pe=function(){return"video"===a.i("displayMode","")};a.mk=function(){return"recInIframe"===
a.i("displayMode","")};a.tc=function(){return!0===a.i("stopRater",!1)||!0===a.i("stopWidget",!1)};a.fe=function(){return q};a.Wh=function(){return!0===a.i("isSkylandersInjectionEnabled",!1)};a.Xh=function(){return!0===a.i("isTopBoxInjectionEnabled",!1)};a.Yh=function(){return!0===a.i("isUIExperimentsEnabled",!1)};a.ph=function(){return s};a.Sd=function(){return w};a.yj=function(a){"string"===typeof a&&(s=a.toLowerCase())};a.df=function(){y=!0};a.Mh=function(){return!!y};a.wj=function(b){"string"===
typeof b&&""!==b&&(a.bb=b)};a.ge=function(){return""!==a.ic()};a.Lh=function(){return!isNaN(parseInt(a.bb,10))};a.ic=function(){var b;b=parseInt(a.bb,10);return a.Lh()&&"number"===typeof b&&0<=b&&10>b?OBR.b.Yg(h,b):a.bb};a.Ma=function(){return t};a.ga=function(a){t=!!a};a.jk=function(){return"hp"===s};a.dk=function(){return a.n};a.yk=function(b){"object"===typeof b&&(a.n=b)};a.Rh=function(){return u};a.Qd=function(){return p};a.jj=function(b){p=a.Jg[b]||6E3};a.mj=function(a){u=!!a};a.tj=function(){var b=
a.u("lsd",null),d=!0===a.u("oo",!1),f="string"===typeof b&&0<b.length,e=!0===a.i("isUseLocalStorageForUUID",!0);e&&!d&&f?c.b.qj(b):e||c.b.yg()};a.L=function(){return 0===r?a.k:1E3*r+a.k};a.Li=function(b){"string"===typeof b?(OBR.b.oa(OBR.b.K(a.k),"data-src",b),a.gf(b),r=0):r+=1;a.ga(!1)};a.mc=function(){return r};return a};
OBR.Fb=OBR.Fb||function(){var d=OBR,a={},c=new d.F;a.wd=function(a){a.idx=a.idx||0;var b=new d.jd(a.idx);b.vj(a);return b};a.Nf=function(e){var b,f,g;f=d.ha.ug(e);d.b.oa(e,"data-dynLoad","");f.permalink=d.ha.hg(f.permalink);b=0===d.l.length&&d.c.Oa===f.permalink?1:d.l.length;f.idx=b;f=a.wd(f);d.l[b]=f;0===b&&(g=d.b.createElement("div","ob_holder"),g.style.display="none",d.b.insertBefore(g,e),d.b.qc());e.id=d.c.Eb+b;c.o("onWidgetCreate",[f]);return f};a.vi=function(a){c.add("onWidgetCreate",a)};return a}();
OBR.ha=OBR.ha||function(){var d=OBR,a={I:{widgetId:{a:"data-widget-id",t:"string"},permalink:{a:"data-src",t:"string"},srcUrl:{a:"data-ob-srcUrl",t:"string"},dynLoad:{a:"data-dynLoad",t:"boolean"},widgetType:{a:"data-widget-type",t:"string"},timeout:{a:"data-timeout",t:"string"},fbk:{a:"data-fbk",t:"string"},testMode:{a:"data-ob-test",t:"boolean"},installationKey:{a:"data-ob-installation-key",t:"string"},userId:{a:"data-ob-user-id",t:"string"}},Zd:function(a){var e,b,f;if(d.l)for(b=d.l.length,e=0;e<
b;e+=1)if((f=d.l[e])&&f.A()===a)return f;return null},Yd:function(a){return d.l[a]?d.l[a]:null},vg:function(c){var d={},b;for(b in a.I)a.I.hasOwnProperty(b)&&typeof c[b]===a.I[b].t&&(d[b]=c[b]);return d},ug:function(c){var e={},b;for(b in a.I)if(a.I.hasOwnProperty(b)){var f=d.b.fb(c,a.I[b].a);"true"===f||"false"===f?e[b]="true"===f:typeof f===a.I[b].t&&(e[b]=f)}return e},hg:function(a){if("string"!==typeof a||"null"===a)a=d.b.Td(!1);else if(0===a.length||0===a.indexOf("DROP")||0===a.indexOf("INSERT"))a=
d.b.Td(!0);return a},sg:function(c,e){for(var b in a.I)a.I.hasOwnProperty(b)&&typeof c[b]===a.I[b].t&&d.b.oa(e,a.I[b].a,c[b])}};return a}();OBR.ka=OBR.ka||function(){var d={},a=OBR,c={},e=new a.F;d.ra={Pb:0,TIMEOUT:1,Bf:2,dd:3};c.Tf=function(a){a.ge()&&(a.df(),c.ld(a),OBR.w.Ce(a,function(){c.ef(a)}),OBR.w.De(a,function(){c.ff(a)}),OBR.h.Mi(a.L(),c.qi))};d.Uf=function(b){b.df();c.ld(b);a.w.Ce(b,function(){c.ef(b)});a.w.De(b,function(){c.ff(b)});a.h.Pe(a.h.ue,b.L(),b.A(),function(a,b){c.pi(b,a)})};c.ld=function(a){a.n={reason:d.ra.Pb,Zb:!1,Ae:!1,qd:0,rd:0}};c.ef=function(b){b&&b.n.reason===d.ra.Pb&&(a.e.log("ODB failed - using IronDome "),
b.n.reason=d.ra.Bf,c.Kc(b))};c.qi=function(b){clearTimeout(b.n.Dc);OBR.e.log("Editorial ODB returned for "+b.L());b.n.Zb||(!0===b.i("ispartialrecs",!1)?(a.e.log("ODB partial - using IronDome "),b.n.reason=d.ra.dd,c.Kc(b)):b.n.Ae=!0)};c.Kc=function(b){clearTimeout(b.n.Dc);if(b.tc())a.e.log("CDN canceled stop setting");else{var d=c.Rg(b);c.Ah(d,b)}};c.Rg=function(b){var c;c=a.c.cg;b=b.ic()+"_"+b.A()+"_"+b.k;return c+b};c.Ah=function(b,c){var d=a.b.H(b,!1);c.n.rd=(new Date).getTime();a.b.O(d);a.e.log("Inject CDN call: "+
b)};c.ff=function(a){a.n.Dc=setTimeout(function(){c.oi(a)},a.Qd())};c.oi=function(b){b.n.reason=d.ra.TIMEOUT;a.e.log("ODB Timeout - using IronDome ");c.Kc(b)};d.pd=function(b,d){var e;if(b&&b.response){OBR.e.log("Cdn response returned");e=a.ha.Yd(d);if(!e&&(e=a.b.kc(d),!e))return;e.n.qd=(new Date).getTime()-e.n.rd;a.w.Wf(e);c.Ti(e,b);c.Ch(e)}};c.Ti=function(b,c){b.n.Zb=!0;c.response&&c.response.request&&(c.response.request.req_id="");b.n.Ae||(b.Rh()&&c.response.documents?a.h.cb(OBR.h.rb,b.k,b.Dk,
c.response.documents):(b.setData(c),OBR.h.Da(b.k)),b.ga(!0))};c.Ch=function(b){var c=a.b.G(b.la()),d=b.i("irdfb","");""!==d&&(d+="&reason="+b.n.reason,d=d+("&url="+c)+("&at="+b.n.qd),d+="&to="+b.Qd()||"",d+="&ir="+(b.n.Zb?1:0),b=OBR.b.H(d,!1,!0),OBR.b.O(b))};c.pi=function(b,d){clearTimeout(e.n.Dc);var e=a.b.kc(b);d&&d.settings&&!0===d.settings.ispartialrecs?c.uk(e):a.h.cb(a.h.rb,b,e.A(),d.response.documents)};a.Fb.vi(c.Tf);d.J=function(){e.ia()};d.s=function(){return c};return d}();OBR.q=OBR.q||function(){var d={},a=OBR,c={height:0,width:0},e=300;d.Z=function(b){a=b};d.s=function(){var b={};b.S=a;return b};d.lc=function(){return new OBR.Mb({})};d.jf=function(){var a,d,e;e={height:0,width:0};a=void 0!==window.innerWidth;d=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth;a?(e.height=window.innerHeight,e.width=window.innerWidth):d?(e.height=document.documentElement.clientHeight,e.width=document.documentElement.clientWidth):
!1===a&&!1===d&&(e.height=document.getElementsByTagName("body")[0].clientHeight,e.width=document.getElementsByTagName("body")[0].clientWidth);c=e};d.ea=function(){return c};d.bf=function(){document&&document.body&&(e=Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight)))};d.Nd=function(){return e};d.Pd=function(a){var c=
0;if(!a)return d.fa.Zc;try{if(a.offsetParent)for(;;){c+=a.offsetTop;if(!a.offsetParent)break;a=a.offsetParent}else a.y&&(c+=a.y)}catch(e){return d.fa.Zc}return parseInt(c,10)};d.oc=function(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};d.Sh=function(){return OBR.q.ea().height+10>=OBR.q.Nd()};OBR.b.p(window,"resize",function(){d.jf();d.bf()});d.jf();d.bf();return d}();
OBR.Mb=OBR.Mb||function(d){var a,c={fa:{gd:3,Yc:5,Hb:60,Zc:1E4},P:{cd:0,Fa:1,$c:2,bd:3}};if(d)for(a in d)d.hasOwnProperty(a)&&(c.fa[a]=d[a]);c.$b=function(a){function b(a,b){return d.top-a<=g.height&&0<=d.bottom+b}var d=a.getBoundingClientRect(),g=OBR.q.ea(),h=c.fa.gd,k=c.fa.Yc,l=c.fa.Hb;a=a.clientHeight;var m=c.P.cd;b(0,0)?m=c.P.Fa:b(h+a/2,k+a/2)?m=c.P.$c:b(l,l)&&(m=c.P.bd);return m};c.Xj=function(a){var b,d,g,h,k;b=a.getBoundingClientRect();d=OBR.q.Pd(a);k=OBR.q.ea();g=k.height+OBR.q.oc();h=c.P.cd;
b=0<=b.top&&0<=b.left&&b.bottom<=k.height&&b.right<=k.width;a=d-c.fa.gd<=g&&d+a.clientHeight-c.fa.Yc>=g;d=d-c.fa.Hb<=g&&d>g;b?h=c.P.Fa:a?h=c.P.$c:d&&(h=c.P.bd);return h};return c};OBR.d.r(OBR.d.f.Lb);OBR.Ha=OBR.Ha||function(){var d={},a={},c=OBR,e=(new Date).getTime(),b,f;a.j=function(e){c=e;d.Sa=null;d.ub=null;d.tb=!1;d.Xa=[];d.Gc=new c.Mb({Hb:0});d.rc=!1;d.ab=new c.fc;d.ee=!1;d.Dd=0;d.ie=!0;a.ta={Je:0,Cd:3,Ij:6,Dj:7,Hh:8};f=d.Gc.P.Fa;b=c.c.Ee+"loggerServices/widgetGlobalEvent?"};d.start=function(){d.ie&&(d.ie=!1,OBR.e.log("Starting Statistics"),d.zg(function(){d.Id()}),c.b.p(window,"scroll",d.qe))};a.Of=function(b){OBR.e.log("Adding stats for: "+b.L());var f=b.n;d.start();b.i("tracking",!1)?
d.Ta(b.L(),a.ta.Ij):b.tc()?d.Ta(b.L(),a.ta.Dj):"top-box-pager"===b.i("dynamicWidgetLayout")?d.Ta(b.L(),a.ta.Je):(f&&f.reason&&f.reason!==c.ka.ra.Pb?d.Ta(b.L(),a.ta.Hh):d.Ta(b.L(),a.ta.Je),d.Pi(b),d.qe())};d.Pi=function(a){a=a.L();d.Xa[a]||(d.Xa[a]=c.b.K(a))};d.Ta=function(a,b){var c=d.xd(a,b);d.Xe(c)};a.bj=function(){var b,c,e=d.Xa,l=e.length||0;for(b=0;b<l;b+=1)void 0!==e[b]&&e[b]&&(c=d.Gc.$b(e[b]),c===f&&a.xf(b))};a.xf=function(b){var c=d.xd(b,a.ta.Cd);d.Xe(c);d.Xa[b]=null};d.Xe=function(a){OBR.e.log("Stats waiting list: "+
a);d.ab.add(a);d.ee&&d.Id()};d.Id=function(){var a=c.b.La(),b;for(a||(a=c.b.gb());!d.ab.Nh();)b=d.ab.top(),b+="&ab="+d.rc,b=c.b.H(b,!0,!1),c.b.T(b,a)};d.hh=function(a,b){var f=a.u("pvId",""),e=f,m=0<f.length;0===b&&null===d.ub&&null===d.Sa?e=m?d.ub=f:d.Sa="irondome"+c.b.jb(24):f?d.Sa&&(e=d.Sa):e=d.ub?d.ub:d.Sa;return e};d.xd=function(f,h){var k=c.l[f],l=d.hh(k,f),m=[];m.push(b);m.push("tm=");m.push((new Date).getTime()-e);m.push("&pid="+k.u("pid",-1));m.push("&sid="+k.u("sid",-1));m.push("&wId="+
k.u("wnid",-1));m.push("&wRV="+c.c.Wa);m.push("&rId="+k.u("req_id",-1));m.push("&eT="+h);m.push("&idx="+k.k);m.push("&eIdx=");h===a.ta.Cd&&m.push(d.Dd++);m.push("&pvId="+l);m.push("&org="+k.u("org","0"));m.push("&pad="+k.u("pad","0"));return m.join("")};d.zg=function(a){var b,f;!0!==d.rc&&(b=c.b.createElement("IFRAME","ob_ad","height:1px;width:-1px;left:-1000px;top:-1000px;display:block;border:none"),f=c.b.createElement("IMG","ob_ads","height:1px;width:-1px;left:-1000px;top:-1000px;display:block;border:none"),
f.src=c.c.R+"/nanoWidget/images/adImages/ads-check.gif",b.className=f.className="text-ads text-ad-links ads",document.body.appendChild(b),document.body.appendChild(f),setTimeout(function(){if(f&&-1<f.style.display.indexOf("none")||b&&("hidden"===b.style.visibility||0===b.clientHeight))d.rc=!0;b&&b.parentNode&&b.parentNode.removeChild(b);f&&f.parentNode&&f.parentNode.removeChild(f);d.ee=!0;a()},300))};d.qe=function(){d.tb||(a.bj(),setTimeout(function(){d.tb=!1},150),d.tb=!0)};a.ac=function(){d.tb=
!1;d.Xa=[];d.ab=new c.fc;d.Dd=0};a.j(OBR);return a}();OBR.d.r(OBR.d.f.fd);OBR.Bd=OBR.Bd||function(){var d={},a={},c=OBR;d.Z=function(a){c=a};a.ei=function(c,b){var d=c.style;d.fontSize=a.M(b,"font-size");d.fontWeight=a.M(b,"font-weight");d.fontFamily=a.M(b,"font-family");d.lineHeight=a.M(b,"line-height");d.textTransform=a.M(b,"text-transform");var g=a.M(b,"padding-right").replace("px",""),h=a.M(b,"padding-left").replace("px","");d.display="block";d.visibility="hidden";d.width=b.clientWidth-h-g+"px"};a.hb=function(a){return a.innerText||a.textContent};a.uf=function(c,b){for(var d=
a.hb(c),g=!1;0<b&&c.offsetHeight>b&&0<d.length;)d=d.substring(0,d.length-1),c.innerHTML=d,g=!0;a.Ui(c,g);c.offsetHeight>b&&a.uf(c,b)};a.indexOf=function(a,b){a.indexOf||"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){void 0===b&&(b=0);0>b&&(b+=this.length);0>b&&(b=0);for(var c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1});return a.indexOf(b)};a.Dg=function(c){var b=!1;-1<a.indexOf(".,-_' ".split(""),c.substring(c.length-1,c.length))&&(b=!0);return b};a.M=function(a,
b){var c="";document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b]);return c};a.Ui=function(c,b){if(b){var d=a.hb(c),d=0<d.lastIndexOf(" ")?d.substring(0,d.lastIndexOf(" ")):d.substring(0,d.length-3);a.Dg(d)&&(d=d.substring(0,d.length-1));c.innerHTML=d+"&hellip;"}};a.rg=function(){var a=document.createElement("div");a.style.position=
"absolute";a.style.top="-1000px";a.style.left="-1000px";document.body.appendChild(a);return a};a.Jj=function(d){function b(){for(var b=0;b<f.length;b++){var c=f[b];c.title=a.hb(c);var d=c.clientHeight,e=parseInt(a.M(c,"max-height").replace("px",""));if(!(d<e)){var d=c.cloneNode(!0),m=a.rg();a.ei(d,c);m.appendChild(d);a.uf(d,e);c.innerHTML=a.hb(d);m.parentNode.removeChild(m)}}}var f=c.b.getElementsByClassName("ob-rec-text",d);0===c.b.getElementsByClassName("ob-touch-strip-layout",d).length?b():setTimeout(b,
1E3)};a.Ag=function(a){var b=!1;a=c.b.getElementsByClassName("ob-widget",a);0<a.length&&(a=a[0],a.attributes["data-dynamic-truncate"]&&"true"===a.attributes["data-dynamic-truncate"].value&&(b=!0));return b};d.rh=function(d){(d=c.b.K(d))&&a.Ag(d)&&a.Jj(d)};return d}();OBR.extern=OBR.extern||function(){var d=OBR,a={getStat:function(){d.wa.wk()},showDescription:function(a,e){d.d.v(OBR.d.f.Kb,function(){OBR.Ge.bi(a,e)},this)},returnedHtmlData:function(a,e){d.h.Cc(a,e)},returnedIrdData:function(a,e){d.ka.pd(a,e)},returnedJsonData:function(a,e){d.h.ze(a,e)},returnedError:function(a){OBR.e.log("Call made using extern class");d.e.log("Callback error"+a)},callRecs:function(a,e){OBR.e.log("Call made using extern class");d.h.xc(a,e)},callClick:function(a,e){OBR.e.log("Call made using extern class");
d.h.pb(a,e)},callWhatIs:function(a,d,b,f,g,h){OBR.d.v(OBR.d.f.Za,function(){OBR.Wc.od(a,d,b,f,g,h)},this);return!1},callUserZapping:function(a,d,b){OBR.d.v(OBR.d.f.Ub,function(){OBR.Vc.Yf(a,d,b)},this);return!1},zappingFormAction:function(a,d,b){OBR.Vc.zf(a,d,b);return!1},userZappingMessage:function(a){OBR.e.log(a.message)},recClicked:function(a,e){OBR.e.log("Call made using extern class");d.h.Le(a,e)},imageError:function(a){OBR.e.log("Call made using extern class");d.b.td(a)},showRecInIframe:function(a,
e,b,f,g){d.d.v(d.d.f.Nb,function(){d.Me.zj(a,e,b,f,g)},this)},onVideoClick:function(a,e){d.h.si(a,e)},manualVideoClicked:function(a,e,b,f){d.h.ii(a,e,b,f)},errorInjectionHandler:function(a){OBR.l[a].bk(a)},reloadWidget:function(){OBR.e.log("reload widget");d.h.Si()},researchWidget:function(){OBR.e.log("research widget");d.h.zb()},cancelRecommendation:function(a){OBR.e.log("cancel recommendation with bocr "+a);d.h.$f(a)},cancelRecs:function(a,e,b){OBR.e.log("cancel recommendation by doc url "+a+" publisher id = "+
e+" isAd = "+b);d.h.ag(a,e,b)},refreshWidget:function(a){OBR.e.log("refresh widget");d.h.Ca(a)},refreshSpecificWidget:function(a,e){OBR.e.log("refresh SPECIFIC widget");"string"!==typeof e?d.d.v(d.d.f.Ob,function(){OBR.h.Ne(a,e)},this):OBR.h.Ne(a,e)},getCountOfRecs:function(a){return d.h.Ug(a)},onOdbReturn:function(a,e){d.h.Ni(a,e)},closeCard:function(){d.eb.lg()},closeModal:function(){try{d.modal.hideModal()}catch(a){}},scrollLoad:function(){try{OBR.d.r(OBR.d.f.Rb)}catch(a){}},pagerLoad:function(){try{OBR.d.r(OBR.d.f.Jb)}catch(a){}},
callLoadMore:function(a,d){OBR.d.v(OBR.d.f.Ya,function(){OBR.vc.ce(d)},this)},video:{}};a.video.getRelatedVideosData=function(a,d,b,f,g){OBR.d.v(OBR.d.f.Vb,function(){OBR.vf.oh(a,d,b,f,g)},this)};return a}();window.outbrain=window.outbrain||{};window.outbrain.returnedHtmlData=function(d,a){OBR.h.Cc(d,a)};window.outbrain.returnedIrdJsonData=function(d,a){OBR.ka.pd(d,a)};window.outbrain.returnedJsonData=function(d,a){OBR.h.ze(d,a)};
window.outbrain.returnedError=function(d){OBR.e.log("Callback error"+d)};window.outbrain.callRecs=function(d,a){OBR.h.xc(d,a)};window.outbrain.callClick=function(d,a){OBR.h.pb(d,a)};window.outbrain.callWhatIs=function(d,a,c,e,b,f){OBR.d.v(OBR.d.f.Za,function(){OBR.Wc.od(d,a,c,e,b,f)},this)};window.outbrain.callLoadMore=function(d,a){OBR.d.v(OBR.d.f.Ya,function(){OBR.vc.ce(a)},this)};window.outbrain.recClicked=function(d,a){OBR.h.Le(d,a)};window.outbrain.imageError=function(d){OBR.b.td(d)};
window.outbrain.closeModal=function(){try{OBR.modal.hideModal()}catch(d){}};window.outbrain_rater=window.outbrain_rater||{};window.outbrain_rater.returnedHtmlData=function(d,a){OBR.h.Cc(d,a)};window.outbrain_rater.returnedCancelOdbData=function(d){OBR.h.Xi(d)};!0===OBR.c.he&&(OBR.e.log("Widget Start!"),OBR.c.he=!1,"boolean"===typeof window.OB_PASSIVE_MODE&&!0===window.OB_PASSIVE_MODE?OBR.e.log("passive"):OBR.h.We());})(window.OBR);
/* end file: outbrain*/
/* file: wired :  : /cn/runtime/wired-wp/wordpress/wp-content/themes/Phoenix/assets/js/dist/app.min.js */(function($, raf, W){
"use strict";
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.4.1
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */

!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,g,h,e=this;if(e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.hidden="hidden",e.paused=!1,e.positionProp=null,e.respondTo=null,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,f,d),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,g=e.options.responsive||null,g&&g.length>-1){e.respondTo=e.options.respondTo||"window";for(h in g)g.hasOwnProperty(h)&&(e.breakpoints.push(g[h].breakpoint),e.breakpointSettings[g[h].breakpoint]=g[h].settings);e.breakpoints.sort(function(a,b){return e.options.mobileFirst===!0?a-b:b-a})}"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(e.hidden="msHidden",e.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.init(),e.checkResponsive(!0)}var b=0;return c}(),b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),d[e.animType]=e.options.vertical===!1?"translate3d("+b+"px, 0px, 0px)":"translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=null!==c.options.asNavFor?a(c.options.asNavFor).slick("getSlick"):null;null!==d&&d.slideHandler(b,!0)},b.prototype.applyTransition=function(a){var b=this,c={};c[b.transitionType]=b.options.fade===!1?b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:"opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&a.paused!==!0&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;a.options.infinite===!1?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(0===a.currentSlide-1&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow=a(b.options.prevArrow),b.$nextArrow=a(b.options.nextArrow),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.appendTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled"))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(d='<ul class="'+b.options.dotsClass+'">',c=0;c<=b.getDotCount();c+=1)d+="<li>"+b.options.customPaging.call(this,b,c)+"</li>";d+="</ul>",b.$dots=a(d).appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),b.$slidesCache=b.$slides,b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.options.accessibility===!0&&b.$list.prop("tabIndex",0),b.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.checkResponsive=function(b){var d,e,f,c=this,g=c.$slider.width(),h=window.innerWidth||a(window).width();if("window"===c.respondTo?f=h:"slider"===c.respondTo?f=g:"min"===c.respondTo&&(f=Math.min(h,g)),c.originalSettings.responsive&&c.originalSettings.responsive.length>-1&&null!==c.originalSettings.responsive){e=null;for(d in c.breakpoints)c.breakpoints.hasOwnProperty(d)&&(c.originalSettings.mobileFirst===!1?f<c.breakpoints[d]&&(e=c.breakpoints[d]):f>c.breakpoints[d]&&(e=c.breakpoints[d]));null!==e?null!==c.activeBreakpoint?e!==c.activeBreakpoint&&(c.activeBreakpoint=e,"unslick"===c.breakpointSettings[e]?c.unslick():(c.options=a.extend({},c.originalSettings,c.breakpointSettings[e]),b===!0&&(c.currentSlide=c.options.initialSlide),c.refresh())):(c.activeBreakpoint=e,"unslick"===c.breakpointSettings[e]?c.unslick():(c.options=a.extend({},c.originalSettings,c.breakpointSettings[e]),b===!0&&(c.currentSlide=c.options.initialSlide),c.refresh())):null!==c.activeBreakpoint&&(c.activeBreakpoint=null,c.options=c.originalSettings,b===!0&&(c.currentSlide=c.options.initialSlide),c.refresh())}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.target);switch(e.is("a")&&b.preventDefault(),h=0!==d.slideCount%d.options.slidesToScroll,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||a(b.target).parent().index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c);break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(){var b=this;b.autoPlayClear(),b.touchObject={},a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),b.$slider.removeClass("slick-slider"),b.$slider.removeClass("slick-initialized"),b.$list.off(".slick"),a(window).off(".slick-"+b.instanceUid),a(document).off(".slick-"+b.instanceUid),b.$slider.html(b.$slides)},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:1e3}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:1e3}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)d=Math.ceil(a.slideCount/a.options.slidesToScroll);else if(a.options.centerMode===!0)d=a.slideCount;else for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=-1*b.slideWidth*b.options.slidesToShow,e=-1*d*b.options.slidesToShow),0!==b.slideCount%b.options.slidesToScroll&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=-1*(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth,e=-1*(b.options.slidesToShow-(a-b.slideCount))*d):(b.slideOffset=-1*b.slideCount%b.options.slidesToScroll*b.slideWidth,e=-1*b.slideCount%b.options.slidesToScroll*d))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?-1*a*b.slideWidth+b.slideOffset:-1*a*d+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?(e=a.slideCount-a.options.slidesToShow+1,a.options.centerMode===!0&&(e=a.slideCount)):(b=-1*a.slideCount,c=-1*a.slideCount,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(){var b=this;a(b.$slider).hasClass("slick-initialized")||(a(b.$slider).addClass("slick-initialized"),b.buildOut(),b.setProps(),b.startLoad(),b.loadSlider(),b.initializeEvents(),b.updateArrows(),b.updateDots()),b.$slider.trigger("init",[b])},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).on("mouseenter.slick",function(){b.paused=!0,b.autoPlayClear()}).on("mouseleave.slick",function(){b.paused=!1,b.autoPlay()})},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),b.options.autoplay===!0&&(a(document).on(b.visibilityChange,function(){b.visibility()}),b.options.pauseOnHover===!0&&(b.$list.on("mouseenter.slick",function(){b.paused=!0,b.autoPlayClear()}),b.$list.on("mouseleave.slick",function(){b.paused=!1,b.autoPlay()}))),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,function(){b.checkResponsive(),b.setPosition()}),a(window).on("resize.slick.slick-"+b.instanceUid,function(){a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.setPosition()},50))}),a("*[draggable!=true]",b.$slideTrack).on("dragstart",function(a){a.preventDefault()}),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),a.options.autoplay===!0&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:"next"}})},b.prototype.lazyLoad=function(){function g(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy");b.load(function(){b.animate({opacity:1},200)}).css({opacity:0}).attr("src",c).removeAttr("data-lazy").removeClass("slick-loading")})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=e+b.options.slidesToShow,b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.paused=!1,a.autoPlay()},b.prototype.postSlide=function(a){var b=this;b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay===!0&&b.paused===!1&&b.autoPlay()},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.progressiveLazyLoad=function(){var c,d,b=this;c=a("img[data-lazy]",b.$slider).length,c>0&&(d=a("img[data-lazy]",b.$slider).first(),d.attr("src",d.attr("data-lazy")).removeClass("slick-loading").load(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad()}).error(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad()}))},b.prototype.refresh=function(){var b=this,c=b.currentSlide;b.destroy(),a.extend(b,b.initials),b.init(),b.changeSlide({data:{message:"index",index:c}},!0)},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),b.$slider.trigger("reInit",[b])},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,d.reinit(),void 0)},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;if(a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1)a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length));else if(a.options.variableWidth===!0){var b=0;a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.children(".slick-slide").each(function(){b+=a.listWidth}),a.$slideTrack.width(Math.ceil(b)+1)}else a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length));var c=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-c)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=-1*b.slideWidth*d,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:800,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:800,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:900,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(a,b,c){var d=this;d.options[a]=b,c===!0&&(d.unload(),d.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;b.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),d=b.$slider.find(".slick-slide"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active"):(e=b.options.slidesToShow+a,d.slice(e-c+1,e+c+2).addClass("slick-active")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active"):d.length<=b.options.slidesToShow?d.addClass("slick-active"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.selectHandler=function(b){var c=this,d=parseInt(a(b.target).parents(".slick-slide").attr("data-slick-index"));return d||(d=0),c.slideCount<=c.options.slidesToShow?(c.$slider.find(".slick-slide").removeClass("slick-active"),c.$slides.eq(d).addClass("slick-active"),c.options.centerMode===!0&&(c.$slider.find(".slick-slide").removeClass("slick-center"),c.$slides.eq(d).addClass("slick-center")),c.asNavFor(d),void 0):(c.slideHandler(d),void 0)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d)),void 0):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d)),void 0):(i.options.autoplay===!0&&clearInterval(i.autoPlayTimer),e=0>d?0!==i.slideCount%i.options.slidesToScroll?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?0!==i.slideCount%i.options.slidesToScroll?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?i.fadeSlide(e,function(){i.postSlide(e)}):i.postSlide(e),i.animateHeight(),void 0):(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e),void 0)))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":"vertical"},b.prototype.swipeEnd=function(){var c,b=this;if(b.dragging=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe)switch(b.swipeDirection()){case"left":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.slideHandler(c),b.currentDirection=0,b.touchObject={},b.$slider.trigger("swipe",[b,"left"]);break;case"right":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.slideHandler(c),b.currentDirection=1,b.touchObject={},b.$slider.trigger("swipe",[b,"right"])}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.swipeLeft=b.options.vertical===!1?d+f*g:d+f*(b.$list.height()/b.listWidth)*g,b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):(b.setCSS(b.swipeLeft),void 0)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return 1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,b.dragging=!0,void 0)},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},b.prototype.unslick=function(){var a=this;a.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.options.infinite!==!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.removeClass("slick-disabled"),a.$nextArrow.removeClass("slick-disabled"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled"),a.$nextArrow.removeClass("slick-disabled")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled"),a.$prevArrow.removeClass("slick-disabled")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled"),a.$prevArrow.removeClass("slick-disabled")))
},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active"))},b.prototype.visibility=function(){var a=this;document[a.hidden]?(a.paused=!0,a.autoPlayClear()):(a.paused=!1,a.autoPlay())},a.fn.slick=function(){var g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length,f=0;for(f;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a},a(function(){a("[data-slick]").slick()})});
/**
 * @license
 * lodash 3.5.0 (Custom Build) lodash.com/license | Underscore.js 1.8.2 underscorejs.org/LICENSE
 * Build: `lodash --output ./wp-content/themes/Phoenix/assets/js/lib/lodash.custom.js include="once,debounce,throttle,each,filter"`
 */
;(function(){function n(n){return typeof n=="function"||false}function t(n){return n&&typeof n=="object"||false}function r(){}function e(n,t){var r=-1,e=n.length;for(t||(t=Array(e));++r<e;)t[r]=n[r];return t}function o(n,t){for(var r=-1,e=n.length;++r<e&&false!==t(n[r],r,n););return n}function u(n,t){for(var r=-1,e=n.length,o=-1,u=[];++r<e;){var c=n[r];t(c,r,n)&&(u[++o]=c)}return u}function c(n,t,r){r||(r=t,t={});for(var e=-1,o=r.length;++e<o;){var u=r[e];t[u]=n[u]}return t}function a(n,t,e){var o=typeof n;
if("function"==o){if(o=typeof t!="undefined"){var o=r.support,u=!(o.funcNames?n.name:o.funcDecomp);if(!u){var c=Pt.call(n);o.funcNames||(u=!yt.test(c)),u||(u=bt.test(c)||W(n),tr(n,u))}o=u}n=o?h(n,t,e):n}else n=null==n?L:"object"==o?y(n):typeof t=="undefined"?v(n+""):g(n+"",t);return n}function i(n,t,r,u,a,f,l){var p;if(r&&(p=a?r(n,u,a):r(n)),typeof p!="undefined")return p;if(!U(n))return n;if(u=er(n)){if(p=w(n),!t)return e(n,p)}else{var y=Wt.call(n),g=y==Q;if(y!=Z&&y!=z&&(!g||a))return jt[y]?E(n,y,t):a?n:{};
if(_t(n))return a?n:{};if(p=A(g?{}:n),!t)return c(n,p,ur(n))}for(f||(f=[]),l||(l=[]),a=f.length;a--;)if(f[a]==n)return l[a];return f.push(n),l.push(p),(u?o:s)(n,function(e,o){p[o]=i(e,t,r,o,n,f,l)}),p}function f(n,t){var r=n?n.length:0;if(!S(r))return s(n,t);for(var e=-1,o=_(n);++e<r&&false!==t(o[e],e,o););return n}function l(n,t){var r=[];return f(n,function(n,e,o){t(n,e,o)&&r.push(n)}),r}function s(n,t){for(var r=ur,e=-1,o=_(n),r=r(n),u=r.length;++e<u;){var c=r[e];if(false===t(o[c],c,o))break}return n
}function p(n,t,r,e,o,u){if(n===t)return 0!==n||1/n==1/t;var c=typeof n,a=typeof t;if("function"!=c&&"object"!=c&&"function"!=a&&"object"!=a||null==n||null==t)n=n!==n&&t!==t;else n:{var c=p,a=er(n),i=er(t),f=G,l=G;a||(f=Wt.call(n),f==z?f=Z:f!=Z&&(a=R(n))),i||(l=Wt.call(t),l==z?l=Z:l!=Z&&R(t));var s=f==Z&&!_t(n),i=l==Z&&!_t(t),l=f==l;if(!l||a||s)if(f=s&&Ut.call(n,"__wrapped__"),i=i&&Ut.call(t,"__wrapped__"),f||i)n=c(f?n.value():n,i?t.value():t,r,e,o,u);else if(l){for(o||(o=[]),u||(u=[]),f=o.length;f--;)if(o[f]==n){n=u[f]==t;
break n}o.push(n),u.push(t),n=(a?m:j)(n,t,c,r,e,o,u),o.pop(),u.pop()}else n=false;else n=d(n,t,f)}return n}function y(n){var t=ur(n),r=t.length;if(1==r){var e=t[0],o=n[e];if(O(o))return function(n){return null!=n&&n[e]===o&&Ut.call(n,e)}}for(var u=Array(r),c=Array(r);r--;)o=n[t[r]],u[r]=o,c[r]=O(o);return function(n){n:{var r=t.length;if(null==n)n=!r;else{for(var e=-1;++e<r;)if(c[e]?u[e]!==n[t[e]]:!Ut.call(n,t[e])){n=false;break n}for(e=-1;++e<r;){var o=t[e];if(c[e])o=Ut.call(n,o);else{var a=n[o],i=u[e],o=Y;
typeof o=="undefined"&&(o=p(i,a,void 0,true))}if(!o){n=false;break n}}n=true}}return n}}function g(n,t){return O(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&p(t,r[n],null,true)}}function v(n){return function(t){return null==t?Y:t[n]}}function h(n,t,r){if(typeof n!="function")return L;if(typeof t=="undefined")return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,o){return n.call(t,r,e,o)};case 4:return function(r,e,o,u){return n.call(t,r,e,o,u)
};case 5:return function(r,e,o,u,c){return n.call(t,r,e,o,u,c)}}return function(){return n.apply(t,arguments)}}function b(n){return $t.call(n,0)}function m(n,t,r,e,o,u,c){var a=-1,i=n.length,f=t.length,l=true;if(i!=f&&(!o||f<=i))return false;for(;l&&++a<i;){var s=n[a],p=t[a],l=Y;if(e&&(l=o?e(p,s,a):e(s,p,a)),typeof l=="undefined")if(o)for(var y=f;y--&&(p=t[y],!(l=s&&s===p||r(s,p,e,o,u,c))););else l=s&&s===p||r(s,p,e,o,u,c)}return!!l}function d(n,t,r){switch(r){case H:case J:return+n==+t;case K:return n.name==t.name&&n.message==t.message;
case X:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case nt:case tt:return n==t+""}return false}function j(n,t,r,e,o,u,c){var a=ur(n),i=a.length,f=ur(t).length;if(i!=f&&!o)return false;for(var l,f=-1;++f<i;){var s=a[f],p=Ut.call(t,s);if(p){var y=n[s],g=t[s],p=Y;e&&(p=o?e(g,y,s):e(y,g,s)),typeof p=="undefined"&&(p=y&&y===g||r(y,g,e,o,u,c))}if(!p)return false;l||(l="constructor"==s)}return l||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)?true:false
}function w(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Ut.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function A(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Object),new n}function E(n,t,r){var e=n.constructor;switch(t){case rt:return b(n);case H:case J:return new e(+n);case et:case ot:case ut:case ct:case at:case it:case ft:case lt:case st:return e instanceof e&&(e=Xt[t]),t=n.buffer,new e(r?b(t):t,n.byteOffset,n.length);case X:case tt:return new e(n);
case nt:var o=new e(n.source,pt.exec(n));o.lastIndex=n.lastIndex}return o}function x(n,t){return n=+n,t=null==t?Kt:t,-1<n&&0==n%1&&n<t}function S(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=Kt}function O(n){return n===n&&(0===n?0<1/n:!U(n))}function T(n){for(var t=$(n),e=t.length,o=e&&n.length,u=r.support,u=o&&S(o)&&(er(n)||u.nonEnumStrings&&N(n)||u.nonEnumArgs&&P(n)),c=-1,a=[];++c<e;){var i=t[c];(u&&x(i,o)||Ut.call(n,i))&&a.push(i)}return a}function _(n){if(r.support.unindexedChars&&N(n)){for(var t=-1,e=n.length,o=Object(n);++t<e;)o[t]=n.charAt(t);
return o}return U(n)?n:Object(n)}function k(n,t,e){var o=er(n)?u:l,c=r.callback||D,c=c===D?a:c;return t=c(t,e,3),o(n,t)}function I(n,t,r){return typeof t=="function"&&typeof r=="undefined"&&er(n)?o(n,t):f(n,h(t,r,3))}function F(n,t){var r;if(typeof t!="function"){if(typeof n!="function")throw new TypeError(q);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function M(n,t,r){function e(){var r=t-(rr()-f);0>=r||r>t?(a&&clearTimeout(a),r=p,a=s=p=Y,r&&(y=rr(),i=n.apply(l,c),s||a||(c=l=null))):s=setTimeout(e,r)
}function o(){s&&clearTimeout(s),a=s=p=Y,(v||g!==t)&&(y=rr(),i=n.apply(l,c),s||a||(c=l=null))}function u(){if(c=arguments,f=rr(),l=this,p=v&&(s||!h),false===g)var r=h&&!s;else{a||h||(y=f);var u=g-(f-y),b=0>=u||u>g;b?(a&&(a=clearTimeout(a)),y=f,i=n.apply(l,c)):a||(a=setTimeout(o,u))}return b&&s?s=clearTimeout(s):s||t===g||(s=setTimeout(e,t)),r&&(b=true,i=n.apply(l,c)),!b||s||a||(c=l=null),i}var c,a,i,f,l,s,p,y=0,g=false,v=true;if(typeof n!="function")throw new TypeError(q);if(t=0>t?0:+t||0,true===r)var h=true,v=false;
else U(r)&&(h=r.leading,g="maxWait"in r&&Gt(+r.maxWait||0,t),v="trailing"in r?r.trailing:v);return u.cancel=function(){s&&clearTimeout(s),a&&clearTimeout(a),a=s=p=Y},u}function P(n){return S(t(n)?n.length:Y)&&Wt.call(n)==z||false}function U(n){var t=typeof n;return"function"==t||n&&"object"==t||false}function W(n){return null==n?false:Wt.call(n)==Q?Nt.test(Pt.call(n)):t(n)&&(_t(n)?Nt:gt).test(n)||false}function N(n){return typeof n=="string"||t(n)&&Wt.call(n)==tt||false}function R(n){return t(n)&&S(n.length)&&dt[Wt.call(n)]||false
}function $(n){if(null==n)return[];U(n)||(n=Object(n));for(var t=n.length,e=r.support,t=t&&S(t)&&(er(n)||e.nonEnumStrings&&N(n)||e.nonEnumArgs&&P(n))&&t||0,o=n.constructor,u=-1,o=or(o)&&o.prototype||Ft,c=o===n,a=Array(t),i=0<t,f=e.enumErrorProps&&(n===It||n instanceof Error),l=e.enumPrototypes&&or(n);++u<t;)a[u]=u+"";for(var s in n)l&&"prototype"==s||f&&("message"==s||"name"==s)||i&&x(s,t)||"constructor"==s&&(c||!Ut.call(n,s))||a.push(s);if(e.nonEnumShadows&&n!==Ft)for(t=n===Mt?tt:n===It?K:Wt.call(n),e=Zt[t]||Zt[Z],t==Z&&(o=Ft),t=mt.length;t--;)s=mt[t],u=e[s],c&&u||(u?!Ut.call(n,s):n[s]===o[s])||a.push(s);
return a}function C(n){return(n=typeof n=="string"?n:null==n?"":n+"")&&ht.test(n)?n.replace(vt,"\\$&"):n}function D(n,r,e){var o;return(o=e)&&(U(e)?(o=typeof r,"number"==o?(o=e.length,o=S(o)&&x(r,o)):o="string"==o&&r in e,o?(e=e[r],o=n===n?n===e:e!==e):o=false):o=false),o&&(r=null),t(n)?V(n):a(n,r)}function B(n){return function(){return n}}function L(n){return n}function V(n){return y(i(n,true))}var Y,q="Expected a function",z="[object Arguments]",G="[object Array]",H="[object Boolean]",J="[object Date]",K="[object Error]",Q="[object Function]",X="[object Number]",Z="[object Object]",nt="[object RegExp]",tt="[object String]",rt="[object ArrayBuffer]",et="[object Float32Array]",ot="[object Float64Array]",ut="[object Int8Array]",ct="[object Int16Array]",at="[object Int32Array]",it="[object Uint8Array]",ft="[object Uint8ClampedArray]",lt="[object Uint16Array]",st="[object Uint32Array]",pt=/\w*$/,yt=/^\s*function[ \n\r\t]+\w/,gt=/^\[object .+?Constructor\]$/,vt=/[.*+?^${}()|[\]\/\\]/g,ht=RegExp(vt.source),bt=/\bthis\b/,mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),dt={};
dt[et]=dt[ot]=dt[ut]=dt[ct]=dt[at]=dt[it]=dt[ft]=dt[lt]=dt[st]=true,dt[z]=dt[G]=dt[rt]=dt[H]=dt[J]=dt[K]=dt[Q]=dt["[object Map]"]=dt[X]=dt[Z]=dt[nt]=dt["[object Set]"]=dt[tt]=dt["[object WeakMap]"]=false;var jt={};jt[z]=jt[G]=jt[rt]=jt[H]=jt[J]=jt[et]=jt[ot]=jt[ut]=jt[ct]=jt[at]=jt[X]=jt[Z]=jt[nt]=jt[tt]=jt[it]=jt[ft]=jt[lt]=jt[st]=true,jt[K]=jt[Q]=jt["[object Map]"]=jt["[object Set]"]=jt["[object WeakMap]"]=false;var wt={leading:false,maxWait:0,trailing:false},At={"function":true,object:true},Et=At[typeof exports]&&exports&&!exports.nodeType&&exports,xt=At[typeof module]&&module&&!module.nodeType&&module,St=At[typeof window]&&window,Ot=xt&&xt.exports===Et&&Et,Tt=Et&&xt&&typeof global=="object"&&global||St!==(this&&this.window)&&St||this,_t=function(){try{Object({toString:0}+"")
}catch(n){return function(){return false}}return function(n){return typeof n.toString!="function"&&typeof(n+"")=="string"}}(),kt=Array.prototype,It=Error.prototype,Ft=Object.prototype,Mt=String.prototype,Pt=Function.prototype.toString,Ut=Ft.hasOwnProperty,Wt=Ft.toString,Nt=RegExp("^"+C(Wt).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=W(Rt=Tt.ArrayBuffer)&&Rt,$t=W($t=Rt&&new Rt(0).slice)&&$t,Ct=Math.floor,Dt=Ft.propertyIsEnumerable,Bt=kt.splice,Lt=W(Lt=Tt.Uint8Array)&&Lt,Vt=W(Vt=Tt.WeakMap)&&Vt,Yt=function(){try{var n=W(n=Tt.Float64Array)&&n,t=new n(new Rt(10),0,1)&&n
}catch(r){}return t}(),qt=W(qt=Array.isArray)&&qt,zt=W(zt=Object.keys)&&zt,Gt=Math.max,Ht=W(Ht=Date.now)&&Ht,Jt=Yt?Yt.BYTES_PER_ELEMENT:0,Kt=Math.pow(2,53)-1,Qt=Vt&&new Vt,Xt={};Xt[et]=Tt.Float32Array,Xt[ot]=Tt.Float64Array,Xt[ut]=Tt.Int8Array,Xt[ct]=Tt.Int16Array,Xt[at]=Tt.Int32Array,Xt[it]=Tt.Uint8Array,Xt[ft]=Tt.Uint8ClampedArray,Xt[lt]=Tt.Uint16Array,Xt[st]=Tt.Uint32Array;var Zt={};Zt[G]=Zt[J]=Zt[X]={constructor:true,toLocaleString:true,toString:true,valueOf:true},Zt[H]=Zt[tt]={constructor:true,toString:true,valueOf:true},Zt[K]=Zt[Q]=Zt[nt]={constructor:true,toString:true},Zt[Z]={constructor:true},o(mt,function(n){for(var t in Zt)if(Ut.call(Zt,t)){var r=Zt[t];
r[n]=Ut.call(r,n)}});var nr=r.support={};!function(n){function t(){this.x=1}var r={0:1,length:1},e=[];t.prototype={valueOf:1,y:1};for(var o in new t)e.push(o);nr.argsTag=Wt.call(arguments)==z,nr.enumErrorProps=Dt.call(It,"message")||Dt.call(It,"name"),nr.enumPrototypes=Dt.call(t,"prototype"),nr.funcDecomp=!W(Tt.WinRTError)&&bt.test(function(){return this}),nr.funcNames=typeof Function.name=="string",nr.nonEnumStrings=!Dt.call("x",0),nr.nonEnumShadows=!/valueOf/.test(e),nr.spliceObjects=(Bt.call(r,0,1),!r[0]),nr.unindexedChars="xx"!="x"[0]+Object("x")[0];
try{nr.nonEnumArgs=!Dt.call(arguments,1)}catch(u){nr.nonEnumArgs=true}}(0,0);var tr=Qt?function(n,t){return Qt.set(n,t),n}:L;$t||(b=Rt&&Lt?function(n){var t=n.byteLength,r=Yt?Ct(t/Jt):0,e=r*Jt,o=new Rt(t);if(r){var u=new Yt(o,0,r);u.set(new Yt(n,0,r))}return t!=e&&(u=new Lt(o,e),u.set(new Lt(n,e))),o}:B(null));var rr=Ht||function(){return(new Date).getTime()};nr.argsTag||(P=function(n){return S(t(n)?n.length:Y)&&Ut.call(n,"callee")&&!Dt.call(n,"callee")||false});var er=qt||function(n){return t(n)&&S(n.length)&&Wt.call(n)==G||false
},or=n(/x/)||Lt&&!n(Lt)?function(n){return Wt.call(n)==Q}:n,ur=zt?function(n){if(n)var t=n.constructor,e=n.length;return typeof t=="function"&&t.prototype===n||(typeof n=="function"?r.support.enumPrototypes:e&&S(e))?T(n):U(n)?zt(n):[]}:T;r.before=F,r.callback=D,r.constant=B,r.debounce=M,r.filter=k,r.forEach=I,r.keys=ur,r.keysIn=$,r.matches=V,r.once=function(n){return F(n,2)},r.throttle=function(n,t,r){var e=true,o=true;if(typeof n!="function")throw new TypeError(q);return false===r?e=false:U(r)&&(e="leading"in r?!!r.leading:e,o="trailing"in r?!!r.trailing:o),wt.leading=e,wt.maxWait=+t,wt.trailing=o,M(n,t,wt)
},r.each=I,r.iteratee=D,r.select=k,r.escapeRegExp=C,r.identity=L,r.isArguments=P,r.isArray=er,r.isFunction=or,r.isNative=W,r.isObject=U,r.isString=N,r.isTypedArray=R,r.now=rr,r.VERSION="3.5.0",typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Tt._=r, define(function(){return r})):Et&&xt?Ot?(xt.exports=r)._=r:Et._=r:Tt._=r}).call(this);
;(function () {
	'use strict';

	/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */

	/*jslint browser:true, node:true*/
	/*global define, Event, Node*/


	/**
	 * Instantiate fast-clicking listeners on the specified layer.
	 *
	 * @constructor
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
	function FastClick(layer, options) {
		var oldOnClick;

		options = options || {};

		/**
		 * Whether a click is currently being tracked.
		 *
		 * @type boolean
		 */
		this.trackingClick = false;


		/**
		 * Timestamp for when click tracking started.
		 *
		 * @type number
		 */
		this.trackingClickStart = 0;


		/**
		 * The element being tracked for a click.
		 *
		 * @type EventTarget
		 */
		this.targetElement = null;


		/**
		 * X-coordinate of touch start event.
		 *
		 * @type number
		 */
		this.touchStartX = 0;


		/**
		 * Y-coordinate of touch start event.
		 *
		 * @type number
		 */
		this.touchStartY = 0;


		/**
		 * ID of the last touch, retrieved from Touch.identifier.
		 *
		 * @type number
		 */
		this.lastTouchIdentifier = 0;


		/**
		 * Touchmove boundary, beyond which a click will be cancelled.
		 *
		 * @type number
		 */
		this.touchBoundary = options.touchBoundary || 10;


		/**
		 * The FastClick layer.
		 *
		 * @type Element
		 */
		this.layer = layer;

		/**
		 * The minimum time between tap(touchstart and touchend) events
		 *
		 * @type number
		 */
		this.tapDelay = options.tapDelay || 200;

		/**
		 * The maximum time for a tap
		 *
		 * @type number
		 */
		this.tapTimeout = options.tapTimeout || 700;

		if (FastClick.notNeeded(layer)) {
			return;
		}

		// Some old versions of Android don't have Function.prototype.bind
		function bind(method, context) {
			return function() { return method.apply(context, arguments); };
		}


		var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];
		var context = this;
		for (var i = 0, l = methods.length; i < l; i++) {
			context[methods[i]] = bind(context[methods[i]], context);
		}

		// Set up event handlers as required
		if (deviceIsAndroid) {
			layer.addEventListener('mouseover', this.onMouse, true);
			layer.addEventListener('mousedown', this.onMouse, true);
			layer.addEventListener('mouseup', this.onMouse, true);
		}

		layer.addEventListener('click', this.onClick, true);
		layer.addEventListener('touchstart', this.onTouchStart, false);
		layer.addEventListener('touchmove', this.onTouchMove, false);
		layer.addEventListener('touchend', this.onTouchEnd, false);
		layer.addEventListener('touchcancel', this.onTouchCancel, false);

		// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
		// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick
		// layer when they are cancelled.
		if (!Event.prototype.stopImmediatePropagation) {
			layer.removeEventListener = function(type, callback, capture) {
				var rmv = Node.prototype.removeEventListener;
				if (type === 'click') {
					rmv.call(layer, type, callback.hijacked || callback, capture);
				} else {
					rmv.call(layer, type, callback, capture);
				}
			};

			layer.addEventListener = function(type, callback, capture) {
				var adv = Node.prototype.addEventListener;
				if (type === 'click') {
					adv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {
						if (!event.propagationStopped) {
							callback(event);
						}
					}), capture);
				} else {
					adv.call(layer, type, callback, capture);
				}
			};
		}

		// If a handler is already declared in the element's onclick attribute, it will be fired before
		// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and
		// adding it as listener.
		if (typeof layer.onclick === 'function') {

			// Android browser on at least 3.2 requires a new reference to the function in layer.onclick
			// - the old one won't work if passed to addEventListener directly.
			oldOnClick = layer.onclick;
			layer.addEventListener('click', function(event) {
				oldOnClick(event);
			}, false);
			layer.onclick = null;
		}
	}

	/**
	* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.
	*
	* @type boolean
	*/
	var deviceIsWindowsPhone = navigator.userAgent.indexOf("Windows Phone") >= 0;

	/**
	 * Android requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;


	/**
	 * iOS requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;


	/**
	 * iOS 4 requires an exception for select elements.
	 *
	 * @type boolean
	 */
	var deviceIsIOS4 = deviceIsIOS && (/OS 4_\d(_\d)?/).test(navigator.userAgent);


	/**
	 * iOS 6.0(+?) requires the target element to be manually derived
	 *
	 * @type boolean
	 */
	var deviceIsIOSWithBadTarget = deviceIsIOS && (/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);

	/**
	 * BlackBerry requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;

	/**
	 * Determine whether a given element requires a native click.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element needs a native click
	 */
	FastClick.prototype.needsClick = function(target) {
		switch (target.nodeName.toLowerCase()) {

		// Don't send a synthetic click to disabled inputs (issue #62)
		case 'button':
		case 'select':
		case 'textarea':
			if (target.disabled) {
				return true;
			}

			break;
		case 'input':

			// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)
			if ((deviceIsIOS && target.type === 'file') || target.disabled) {
				return true;
			}

			break;
		case 'label':
		case 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames
		case 'video':
			return true;
		}

		return (/\bneedsclick\b/).test(target.className);
	};


	/**
	 * Determine whether a given element requires a call to focus to simulate click into element.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
	 */
	FastClick.prototype.needsFocus = function(target) {
		switch (target.nodeName.toLowerCase()) {
		case 'textarea':
			return true;
		case 'select':
			return !deviceIsAndroid;
		case 'input':
			switch (target.type) {
			case 'button':
			case 'checkbox':
			case 'file':
			case 'image':
			case 'radio':
			case 'submit':
				return false;
			}

			// No point in attempting to focus disabled inputs
			return !target.disabled && !target.readOnly;
		default:
			return (/\bneedsfocus\b/).test(target.className);
		}
	};


	/**
	 * Send a click event to the specified element.
	 *
	 * @param {EventTarget|Element} targetElement
	 * @param {Event} event
	 */
	FastClick.prototype.sendClick = function(targetElement, event) {
		var clickEvent, touch;

		// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)
		if (document.activeElement && document.activeElement !== targetElement) {
			document.activeElement.blur();
		}

		touch = event.changedTouches[0];

		// Synthesise a click event, with an extra attribute so it can be tracked
		clickEvent = document.createEvent('MouseEvents');
		clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
		clickEvent.forwardedTouchEvent = true;
		targetElement.dispatchEvent(clickEvent);
	};

	FastClick.prototype.determineEventType = function(targetElement) {

		//Issue #159: Android Chrome Select Box does not open with a synthetic click event
		if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {
			return 'mousedown';
		}

		return 'click';
	};


	/**
	 * @param {EventTarget|Element} targetElement
	 */
	FastClick.prototype.focus = function(targetElement) {
		var length;

		// Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
		if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {
			length = targetElement.value.length;
			targetElement.setSelectionRange(length, length);
		} else {
			targetElement.focus();
		}
	};


	/**
	 * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
	 *
	 * @param {EventTarget|Element} targetElement
	 */
	FastClick.prototype.updateScrollParent = function(targetElement) {
		var scrollParent, parentElement;

		scrollParent = targetElement.fastClickScrollParent;

		// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the
		// target element was moved to another parent.
		if (!scrollParent || !scrollParent.contains(targetElement)) {
			parentElement = targetElement;
			do {
				if (parentElement.scrollHeight > parentElement.offsetHeight) {
					scrollParent = parentElement;
					targetElement.fastClickScrollParent = parentElement;
					break;
				}

				parentElement = parentElement.parentElement;
			} while (parentElement);
		}

		// Always update the scroll top tracker if possible.
		if (scrollParent) {
			scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;
		}
	};


	/**
	 * @param {EventTarget} targetElement
	 * @returns {Element|EventTarget}
	 */
	FastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {

		// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.
		if (eventTarget.nodeType === Node.TEXT_NODE) {
			return eventTarget.parentNode;
		}

		return eventTarget;
	};


	/**
	 * On touch start, record the position and scroll offset.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchStart = function(event) {
		var targetElement, touch, selection;

		// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).
		if (event.targetTouches.length > 1) {
			return true;
		}

		targetElement = this.getTargetElementFromEventTarget(event.target);
		touch = event.targetTouches[0];

		if (deviceIsIOS) {

			// Only trusted events will deselect text on iOS (issue #49)
			selection = window.getSelection();
			if (selection.rangeCount && !selection.isCollapsed) {
				return true;
			}

			if (!deviceIsIOS4) {

				// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):
				// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched
				// with the same identifier as the touch event that previously triggered the click that triggered the alert.
				// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an
				// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.
				// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,
				// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,
				// random integers, it's safe to to continue if the identifier is 0 here.
				if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {
					event.preventDefault();
					return false;
				}

				this.lastTouchIdentifier = touch.identifier;

				// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
				// 1) the user does a fling scroll on the scrollable layer
				// 2) the user stops the fling scroll with another tap
				// then the event.target of the last 'touchend' event will be the element that was under the user's finger
				// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
				// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
				this.updateScrollParent(targetElement);
			}
		}

		this.trackingClick = true;
		this.trackingClickStart = event.timeStamp;
		this.targetElement = targetElement;

		this.touchStartX = touch.pageX;
		this.touchStartY = touch.pageY;

		// Prevent phantom clicks on fast double-tap (issue #36)
		if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
			event.preventDefault();
		}

		return true;
	};


	/**
	 * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.touchHasMoved = function(event) {
		var touch = event.changedTouches[0], boundary = this.touchBoundary;

		if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {
			return true;
		}

		return false;
	};


	/**
	 * Update the last position.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchMove = function(event) {
		if (!this.trackingClick) {
			return true;
		}

		// If the touch has moved, cancel the click tracking
		if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {
			this.trackingClick = false;
			this.targetElement = null;
		}

		return true;
	};


	/**
	 * Attempt to find the labelled control for the given label element.
	 *
	 * @param {EventTarget|HTMLLabelElement} labelElement
	 * @returns {Element|null}
	 */
	FastClick.prototype.findControl = function(labelElement) {

		// Fast path for newer browsers supporting the HTML5 control attribute
		if (labelElement.control !== undefined) {
			return labelElement.control;
		}

		// All browsers under test that support touch events also support the HTML5 htmlFor attribute
		if (labelElement.htmlFor) {
			return document.getElementById(labelElement.htmlFor);
		}

		// If no for attribute exists, attempt to retrieve the first labellable descendant element
		// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label
		return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');
	};


	/**
	 * On touch end, determine whether to send a click event at once.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchEnd = function(event) {
		var forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;

		if (!this.trackingClick) {
			return true;
		}

		// Prevent phantom clicks on fast double-tap (issue #36)
		if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
			this.cancelNextClick = true;
			return true;
		}

		if ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {
			return true;
		}

		// Reset to prevent wrong click cancel on input (issue #156).
		this.cancelNextClick = false;

		this.lastClickTime = event.timeStamp;

		trackingClickStart = this.trackingClickStart;
		this.trackingClick = false;
		this.trackingClickStart = 0;

		// On some iOS devices, the targetElement supplied with the event is invalid if the layer
		// is performing a transition or scroll, and has to be re-detected manually. Note that
		// for this to function correctly, it must be called *after* the event target is checked!
		// See issue #57; also filed as rdar://13048589 .
		if (deviceIsIOSWithBadTarget) {
			touch = event.changedTouches[0];

			// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null
			targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;
			targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;
		}

		targetTagName = targetElement.tagName.toLowerCase();
		if (targetTagName === 'label') {
			forElement = this.findControl(targetElement);
			if (forElement) {
				this.focus(targetElement);
				if (deviceIsAndroid) {
					return false;
				}

				targetElement = forElement;
			}
		} else if (this.needsFocus(targetElement)) {

			// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.
			// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).
			if ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {
				this.targetElement = null;
				return false;
			}

			this.focus(targetElement);
			this.sendClick(targetElement, event);

			// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.
			// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)
			if (!deviceIsIOS || targetTagName !== 'select') {
				this.targetElement = null;
				event.preventDefault();
			}

			return false;
		}

		if (deviceIsIOS && !deviceIsIOS4) {

			// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
			// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
			scrollParent = targetElement.fastClickScrollParent;
			if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
				return true;
			}
		}

		// Prevent the actual click from going though - unless the target node is marked as requiring
		// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.
		if (!this.needsClick(targetElement)) {
			event.preventDefault();
			this.sendClick(targetElement, event);
		}

		return false;
	};


	/**
	 * On touch cancel, stop tracking the click.
	 *
	 * @returns {void}
	 */
	FastClick.prototype.onTouchCancel = function() {
		this.trackingClick = false;
		this.targetElement = null;
	};


	/**
	 * Determine mouse events which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onMouse = function(event) {

		// If a target element was never set (because a touch event was never fired) allow the event
		if (!this.targetElement) {
			return true;
		}

		if (event.forwardedTouchEvent) {
			return true;
		}

		// Programmatically generated events targeting a specific element should be permitted
		if (!event.cancelable) {
			return true;
		}

		// Derive and check the target element to see whether the mouse event needs to be permitted;
		// unless explicitly enabled, prevent non-touch click events from triggering actions,
		// to prevent ghost/doubleclicks.
		if (!this.needsClick(this.targetElement) || this.cancelNextClick) {

			// Prevent any user-added listeners declared on FastClick element from being fired.
			if (event.stopImmediatePropagation) {
				event.stopImmediatePropagation();
			} else {

				// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
				event.propagationStopped = true;
			}

			// Cancel the event
			event.stopPropagation();
			event.preventDefault();

			return false;
		}

		// If the mouse event is permitted, return true for the action to go through.
		return true;
	};


	/**
	 * On actual clicks, determine whether this is a touch-generated click, a click action occurring
	 * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
	 * an actual click which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onClick = function(event) {
		var permitted;

		// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.
		if (this.trackingClick) {
			this.targetElement = null;
			this.trackingClick = false;
			return true;
		}

		// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.
		if (event.target.type === 'submit' && event.detail === 0) {
			return true;
		}

		permitted = this.onMouse(event);

		// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.
		if (!permitted) {
			this.targetElement = null;
		}

		// If clicks are permitted, return true for the action to go through.
		return permitted;
	};


	/**
	 * Remove all FastClick's event listeners.
	 *
	 * @returns {void}
	 */
	FastClick.prototype.destroy = function() {
		var layer = this.layer;

		if (deviceIsAndroid) {
			layer.removeEventListener('mouseover', this.onMouse, true);
			layer.removeEventListener('mousedown', this.onMouse, true);
			layer.removeEventListener('mouseup', this.onMouse, true);
		}

		layer.removeEventListener('click', this.onClick, true);
		layer.removeEventListener('touchstart', this.onTouchStart, false);
		layer.removeEventListener('touchmove', this.onTouchMove, false);
		layer.removeEventListener('touchend', this.onTouchEnd, false);
		layer.removeEventListener('touchcancel', this.onTouchCancel, false);
	};


	/**
	 * Check whether FastClick is needed.
	 *
	 * @param {Element} layer The layer to listen on
	 */
	FastClick.notNeeded = function(layer) {
		var metaViewport;
		var chromeVersion;
		var blackberryVersion;

		// Devices that don't support touch don't need FastClick
		if (typeof window.ontouchstart === 'undefined') {
			return true;
		}

		// Chrome version - zero for other browsers
		chromeVersion = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];

		if (chromeVersion) {

			if (deviceIsAndroid) {
				metaViewport = document.querySelector('meta[name=viewport]');

				if (metaViewport) {
					// Chrome on Android with user-scalable="no" doesn't need FastClick (issue #89)
					if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
						return true;
					}
					// Chrome 32 and above with width=device-width or less don't need FastClick
					if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {
						return true;
					}
				}

			// Chrome desktop doesn't need FastClick (issue #15)
			} else {
				return true;
			}
		}

		if (deviceIsBlackBerry10) {
			blackberryVersion = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);

			// BlackBerry 10.3+ does not require Fastclick library.
			// https://github.com/ftlabs/fastclick/issues/251
			if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {
				metaViewport = document.querySelector('meta[name=viewport]');

				if (metaViewport) {
					// user-scalable=no eliminates click delay.
					if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
						return true;
					}
					// width=device-width (or less than device-width) eliminates click delay.
					if (document.documentElement.scrollWidth <= window.outerWidth) {
						return true;
					}
				}
			}
		}

		// IE10 with -ms-touch-action: none, which disables double-tap-to-zoom (issue #97)
		if (layer.style.msTouchAction === 'none') {
			return true;
		}

		// IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version
		// http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx
		if (layer.style.touchAction === 'none') {
			return true;
		}

		return false;
	};


	/**
	 * Factory method for creating a FastClick object
	 *
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
	FastClick.attach = function(layer, options) {
		return new FastClick(layer, options);
	};


	if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {

		// AMD. Register as an anonymous module.
		define(function() {
			return FastClick;
		});
	} else if (typeof module !== 'undefined' && module.exports) {
		module.exports = FastClick.attach;
		module.exports.FastClick = FastClick;
	} else {
		window.FastClick = FastClick;
	}
}());

!function(n){for(var e=0,a=["webkit","moz"],t=n.requestAnimationFrame,i=n.cancelAnimationFrame,m=a.length;--m>=0&&!t;)t=n[a[m]+"RequestAnimationFrame"],i=n[a[m]+"CancelAnimationFrame"];t&&i||(t=function(n){var a=+new Date,t=Math.max(e+16,a);return setTimeout(function(){n(e=t)},t-a)},i=clearTimeout),n.requestAnimationFrame=t,n.cancelAnimationFrame=i}(window);
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
;if("document" in self&&!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false;do{r=t[s]+"";var q=g(this,r);if(q!==-1){this.splice(q,1);o=true}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}return !o};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))};

/* Jonathan Snook - MIT License - https://github.com/snookca/prepareTransition */
(function(a){a.fn.transit=function(){return this.each(function(){var b=a(this);b.one('TransitionEnd webkitTransitionEnd transitionend oTransitionEnd',function(){b.removeClass('is-transitioning');});var c=['transition-duration','-moz-transition-duration','-webkit-transition-duration','-o-transition-duration'];var d=0;a.each(c,function(a,c){d=parseFloat(b.css(c))||d;});if(d!==0){b.addClass('is-transitioning');b[0].offsetWidth;}});};})(jQuery);
/*!
 * headroom.js v0.5.0 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */

(function(window, document) {

  'use strict';

  /* exported features */

  var features = {
    bind : !!(function(){}.bind),
    classList : 'classList' in document.documentElement,
    rAF : !!(window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame)
  };
  window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;

  /**
   * Handles debouncing of events via requestAnimationFrame
   * @see http://www.html5rocks.com/en/tutorials/speed/animations/
   * @param {Function} callback The callback to handle whichever event
   */
  function Debouncer (callback) {
    this.callback = callback;
    this.ticking = false;
  }
  Debouncer.prototype = {
    constructor : Debouncer,

    /**
     * dispatches the event to the supplied callback
     * @private
     */
    update : function() {
      this.callback && this.callback();
      this.ticking = false;
    },

    /**
     * ensures events don't get stacked
     * @private
     */
    requestTick : function() {
      if(!this.ticking) {
        requestAnimationFrame(this.rafCallback || (this.rafCallback = this.update.bind(this)));
        this.ticking = true;
      }
    },

    /**
     * Attach this as the event listeners
     */
    handleEvent : function() {
      this.requestTick();
    }
  };
  /**
   * Helper function for extending objects
   */
  function extend (object /*, objectN ... */) {
    if(arguments.length <= 0) {
      throw new Error('Missing arguments in extend function');
    }

    var result = object || {},
        key,
        i;

    for (i = 1; i < arguments.length; i++) {
      var replacement = arguments[i] || {};

      for (key in replacement) {
        if(typeof result[key] === 'object') {
          result[key] = extend(result[key], replacement[key]);
        }
        else {
          result[key] = result[key] || replacement[key];
        }
      }
    }

    return result;
  }

  /**
   * UI enhancement for fixed headers.
   * Hides header when scrolling down
   * Shows header when scrolling up
   * @constructor
   * @param {DOMElement} elem the header element
   * @param {Object} options options for the widget
   */
  function Headroom (elem, options) {
    options = extend(options, Headroom.options);

    this.lastKnownScrollY = 0;
    this.elem             = elem;
    this.debouncer        = new Debouncer(this.update.bind(this));
    this.tolerance        = options.tolerance;
    this.classes          = options.classes;
    this.offset           = options.offset;
    this.initialised      = false;
    this.onPin            = options.onPin;
    this.onUnpin          = options.onUnpin;
    this.onTop            = options.onTop;
    this.onNotTop         = options.onNotTop;
  }
  Headroom.prototype = {
    constructor : Headroom,

    /**
     * Initialises the widget
     */
    init : function() {
      if(!Headroom.cutsTheMustard) {
        return;
      }

      this.elem.classList.add(this.classes.initial);

      // defer event registration to handle browser
      // potentially restoring previous scroll position
      setTimeout(this.attachEvent.bind(this), 100);

      return this;
    },

    /**
     * Unattaches events and removes any classes that were added
     */
    destroy : function() {
      var classes = this.classes;

      this.initialised = false;
      window.removeEventListener('scroll', this.debouncer, false);
      this.elem.classList.remove(classes.unpinned, classes.pinned, classes.top, classes.initial);
    },

    /**
     * Attaches the scroll event
     * @private
     */
    attachEvent : function() {
      if(!this.initialised){
        this.lastKnownScrollY = this.getScrollY();
        this.initialised = true;
        window.addEventListener('scroll', this.debouncer, false);

        this.debouncer.handleEvent();
      }
    },

    /**
     * Unpins the header if it's currently pinned
     */
    unpin : function() {
      var classList = this.elem.classList,
        classes = this.classes;

      if(classList.contains(classes.pinned) || !classList.contains(classes.unpinned)) {
        classList.add(classes.unpinned);
        classList.remove(classes.pinned);
        this.onUnpin && this.onUnpin.call(this);
      }

      if ( !W.isSm() ) {
        jQuery( document ).trigger( 'headroomUnpinned' );
      }
    },

    /**
     * Pins the header if it's currently unpinned
     */
    pin : function() {
      var classList = this.elem.classList,
        classes = this.classes;

      if(classList.contains(classes.unpinned)) {
        classList.remove(classes.unpinned);
        classList.add(classes.pinned);
        this.onPin && this.onPin.call(this);
      }
    },

    /**
     * Handles the top states
     */
    top : function() {
      var classList = this.elem.classList,
        classes = this.classes;

      if(!classList.contains(classes.top)) {
        classList.add(classes.top);
        classList.remove(classes.notTop);
        this.onTop && this.onTop.call(this);
      }
    },

    /**
     * Handles the not top state
     */
    notTop : function() {
      var classList = this.elem.classList,
        classes = this.classes;

      if(!classList.contains(classes.notTop)) {
        classList.add(classes.notTop);
        classList.remove(classes.top);
        this.onNotTop && this.onNotTop.call(this);
      }
    },

    /**
     * Gets the Y scroll position
     * @see https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY
     * @return {Number} pixels the page has scrolled along the Y-axis
     */
    getScrollY : function() {
      return (window.pageYOffset !== undefined)
        ? window.pageYOffset
        : (document.documentElement || document.body.parentNode || document.body).scrollTop;
    },

    /**
     * Gets the height of the viewport
     * @see http://andylangton.co.uk/blog/development/get-viewport-size-width-and-height-javascript
     * @return {int} the height of the viewport in pixels
     */
    getViewportHeight : function () {
      return window.innerHeight
        || document.documentElement.clientHeight
        || document.body.clientHeight;
    },

    /**
     * Gets the height of the document
     * @see http://james.padolsey.com/javascript/get-document-height-cross-browser/
     * @return {int} the height of the document in pixels
     */
    getDocumentHeight : function () {
      var body = document.body,
        documentElement = document.documentElement;

      return Math.max(
          body.scrollHeight, documentElement.scrollHeight,
          body.offsetHeight, documentElement.offsetHeight,
          body.clientHeight, documentElement.clientHeight
      );
    },

    /**
     * determines if the scroll position is outside of document boundaries
     * @param  {int}  currentScrollY the current y scroll position
     * @return {bool} true if out of bounds, false otherwise
     */
    isOutOfBounds : function (currentScrollY) {
      var pastTop  = currentScrollY < 0,
        pastBottom = currentScrollY + this.getViewportHeight() > this.getDocumentHeight();

      return pastTop || pastBottom;
    },

    /**
     * determines if the tolerance has been exceeded
     * @param  {int} currentScrollY the current scroll y position
     * @return {bool} true if tolerance exceeded, false otherwise
     */
    toleranceExceeded : function (currentScrollY) {
      return Math.abs(currentScrollY-this.lastKnownScrollY) >= this.tolerance;
    },

    /**
     * determine if it is appropriate to unpin
     * @param  {int} currentScrollY the current y scroll position
     * @param  {bool} toleranceExceeded has the tolerance been exceeded?
     * @return {bool} true if should unpin, false otherwise
     */
    shouldUnpin : function (currentScrollY, toleranceExceeded) {
      var scrollingDown = currentScrollY > this.lastKnownScrollY,
        pastOffset = currentScrollY >= this.offset;

      return scrollingDown && pastOffset && toleranceExceeded;
    },

    /**
     * determine if it is appropriate to pin
     * @param  {int} currentScrollY the current y scroll position
     * @param  {bool} toleranceExceeded has the tolerance been exceeded?
     * @return {bool} true if should pin, false otherwise
     */
    shouldPin : function (currentScrollY, toleranceExceeded) {
      var scrollingUp  = currentScrollY < this.lastKnownScrollY,
        pastOffset = currentScrollY <= this.offset;

      return (scrollingUp && toleranceExceeded) || pastOffset;
    },

    /**
     * Handles updating the state of the widget
     */
    update : function() {
      var currentScrollY  = this.getScrollY(),
        toleranceExceeded = this.toleranceExceeded(currentScrollY);

      if(this.isOutOfBounds(currentScrollY)) { // Ignore bouncy scrolling in OSX
        return;
      }

      if (currentScrollY <= this.offset ) {
        this.top();
      } else {
        this.notTop();
      }

      if(this.shouldUnpin(currentScrollY, toleranceExceeded)) {
        this.unpin();
      }
      else if(this.shouldPin(currentScrollY, toleranceExceeded)) {
        this.pin();
      }

      this.lastKnownScrollY = currentScrollY;
    }
  };
  /**
   * Default options
   * @type {Object}
   */
  Headroom.options = {
    tolerance : 0,
    // set what is considered the 'top'
    offset: jQuery('[data-js="main"]').offset().top - 90,
    classes : {
      pinned : 'hr-pinned',
      unpinned : 'hr-unpinned',
      top: 'hr-top',
      notTop: 'hr-not-top',
      initial : 'headroom'
    },
  };
  Headroom.cutsTheMustard = typeof features !== 'undefined' && features.rAF && features.bind && features.classList;

  window.Headroom = Headroom;

}(window, document));

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.hoverintent=e()}}(function(){return function e(n,t,o){function i(u,f){if(!t[u]){if(!n[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(r)return r(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var v=t[u]={exports:{}};n[u][0].call(v.exports,function(e){var t=n[u][1][e];return i(t?t:e)},v,v.exports,e,n,t,o)}return t[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,n){!function(e){var t=function(e,n,t){var o,i,r,u,f={},c=0,a=0,v={sensitivity:7,interval:100,timeout:0},s=function(e){v=l(e||{},v)},l=function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)void 0===e[o]&&(e[o]=t[o])}return e},d=function(e,n,t){e.attachEvent?(e["e"+n+t]=t,e[n+t]=function(){e["e"+n+t](window.event)},e.attachEvent("on"+n,e[n+t])):e.addEventListener(n,t,!1)},m=function(e,n,t){e.detachEvent?(e.detachEvent("on"+n,e[n+t]),e[n+t]=null):e.removeEventListener(n,t,!1)},p=function(e){o=e.clientX,i=e.clientY},h=function(e,n,t){return a&&(a=clearTimeout(a)),c=0,n.call(e,t)},y=function(n,t,o){var i=function(e){p(e)};return a&&(a=clearTimeout(a)),o?(r=n.clientX,u=n.clientY,d(e,"mousemove",i),1!==c&&(a=setTimeout(function(){w(e,t,n)},v.interval))):(m(e,"mousemove",i),1===c&&(a=setTimeout(function(){h(e,t,n)},v.timeout))),this},w=function(e,n,t){return a&&(a=clearTimeout(a)),Math.abs(r-o)+Math.abs(u-i)<v.sensitivity?(c=1,n.call(e,t)):(r=o,u=i,a=setTimeout(function(){w(e,n,t)},v.interval),void 0)};f.options=function(e){s(e)};var x=function(e){y(e,n,!0)},E=function(e){y(e,t)};return f.remove=function(){e&&(m(e,"mouseover",x),m(e,"mouseout",E))},e&&(d(e,"mouseover",x),d(e,"mouseout",E)),s(),f};e.hoverintent=t,"undefined"!=typeof n&&n.exports&&(n.exports=t)}(this)},{}]},{},[1])(1)});
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */

window.matchMedia || (window.matchMedia = function() {
    "use strict";

    // For browsers that support matchMedium api such as IE 9 and webkit
    var styleMedia = (window.styleMedia || window.media);

    // For those that don't support matchMedium
    if (!styleMedia) {
        var style       = document.createElement('style'),
            script      = document.getElementsByTagName('script')[0],
            info        = null;

        style.type  = 'text/css';
        style.id    = 'matchmediajs-test';

        script.parentNode.insertBefore(style, script);

        // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers
        info = ('getComputedStyle' in window) && window.getComputedStyle(style, null) || style.currentStyle;

        styleMedia = {
            matchMedium: function(media) {
                var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';

                // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers
                if (style.styleSheet) {
                    style.styleSheet.cssText = text;
                } else {
                    style.textContent = text;
                }

                // Test if media query is true or false
                return info.width === '1px';
            }
        };
    }

    return function(media) {
        return {
            matches: styleMedia.matchMedium(media || 'all'),
            media: media || 'all'
        };
    };
}());
/*! matchMedia() polyfill addListener/removeListener extension. Author & copyright (c) 2012: Scott Jehl. Dual MIT/BSD license */
(function(){
    // Bail out for browsers that have addListener support
    if (window.matchMedia && window.matchMedia('all').addListener) {
        return false;
    }

    var localMatchMedia = window.matchMedia,
        hasMediaQueries = localMatchMedia('only all').matches,
        isListening     = false,
        timeoutID       = 0,    // setTimeout for debouncing 'handleChange'
        queries         = [],   // Contains each 'mql' and associated 'listeners' if 'addListener' is used
        handleChange    = function(evt) {
            // Debounce
            clearTimeout(timeoutID);

            timeoutID = setTimeout(function() {
                for (var i = 0, il = queries.length; i < il; i++) {
                    var mql         = queries[i].mql,
                        listeners   = queries[i].listeners || [],
                        matches     = localMatchMedia(mql.media).matches;

                    // Update mql.matches value and call listeners
                    // Fire listeners only if transitioning to or from matched state
                    if (matches !== mql.matches) {
                        mql.matches = matches;

                        for (var j = 0, jl = listeners.length; j < jl; j++) {
                            listeners[j].call(window, mql);
                        }
                    }
                }
            }, 30);
        };

    window.matchMedia = function(media) {
        var mql         = localMatchMedia(media),
            listeners   = [],
            index       = 0;

        mql.addListener = function(listener) {
            // Changes would not occur to css media type so return now (Affects IE <= 8)
            if (!hasMediaQueries) {
                return;
            }

            // Set up 'resize' listener for browsers that support CSS3 media queries (Not for IE <= 8)
            // There should only ever be 1 resize listener running for performance
            if (!isListening) {
                isListening = true;
                window.addEventListener('resize', handleChange, true);
            }

            // Push object only if it has not been pushed already
            if (index === 0) {
                index = queries.push({
                    mql         : mql,
                    listeners   : listeners
                });
            }

            listeners.push(listener);
        };

        mql.removeListener = function(listener) {
            for (var i = 0, il = listeners.length; i < il; i++){
                if (listeners[i] === listener){
                    listeners.splice(i, 1);
                }
            }
        };

        return mql;
    };
}());
/**
* @description catch all for repeatedly used functionality, also, data wrappers
* @note first file, so our 'globalnotglobals' go here
* @see http://toddmotto.com/data-js-selectors-enhancing-html5-development-by-separating-css-from-javascript/
*/

/**
 * @description get data js dom element(s), this is used to interact with the dom without css selectors
 * @param {string} [el] [data-js attr to look for]
 * @return jquery dom object
 * @author Ross Patton
 */
$.js = function( el ) {
	return jQuery('[data-js=' + el + ']');
};


/**
 * @description get data ui dom element(s), this is used to trigger functions only
 * @param {string} [el] [data-ui attr to look for]
 * @return jquery dom object
 * @author Ross Patton (not really though, grabbed from linked article)
 */
$.ui = function( el ) {
	return jQuery('[data-ui=' + el + ']');
};


/**
 * @description thought this one might be useful, converts nodeLists to arrays
 * (allows you to use array methods on them)
 * @see http://davidwalsh.name/nodelist-array
 * @see http://jsperf.com/convert-nodelist-to-array
 * @param {DOM NodeList} [nodeList] [NodeList to convert]
 * @return {array} [our NodeList is now an array so can use array methods on it]
 */
W.domToArray = function( nodeList ) {
	var len = nodeList.length,
		arr = [];

	// loopity loop, map list to array
	while( len-- ) {
		arr[len] = nodeList[len];
	}

	// return new array (instead of nodelist)
	return arr;
};


/**
 * @description save the result of a data-js hook
 * 	            this is accessible app wide, so you don't have to constantly
 * 	            do dom lookups for each thing every time a function is called
 * 	            this is good for reducing repaint / reflow
 * 	            uses W.js
 * @see https://eamann.com/tech/selector-caching-jquery/
 * @param {string} [dataJS] [the string we'll pass to W.js]
 * @param {boolean} [cacheBust] [if true, we ignore the cache]
 * @return {object} [our dom node]
 */
W.cache = {};
W.get = function( dataJS, cacheBust ) {
	if ( typeof dataJS !== 'string' ) { return; }

	if ( cacheBust === true ||
		typeof this.cache[ dataJS ] === 'undefined' ) {
		this.cache[ dataJS ] = W.js( dataJS );
	}

	return this.cache[ dataJS ];
};


/**
 * @description save the result of a data-js hook
 * 	            this is accessible app wide, so you don't have to constantly
 * 	            do dom lookups every time a function is called
 * 	            this is good for reducing repaint / reflow
 * 	            uses W.jsAll
 * @see https://eamann.com/tech/selector-caching-jquery/
 * @param {string} [dataJS] [the string we'll pass to W.jsAll]
 * @param {boolean} [cacheBust] [if true, we ignore the cache]
 * @return {object} [our node list]
 */
W.getAll = function( dataJS, cacheBust ) {
	if ( typeof dataJS !== 'string' ) { return; }

	var key = dataJS + 'all';

	if ( cacheBust === true ||
		typeof this.cache[ key ] === 'undefined' ) {
		this.cache[ key ] = W.jsAll( dataJS );
	}

	return this.cache[ key ];
};


/**
 * @description quickly check if we're in mobile range
 * @return bool
 */
W.isMob = function() {
	return window.matchMedia('(max-width: 660px)').matches;
};


/**
 * @description quickly check if we're not in mobile range
 * @return bool
 */
W.isMobPlus = function() {
	return window.matchMedia('(min-width: 661px)').matches;
};


/**
 * @description quickly check if we're not in small tablet range
 * @return bool
 */
W.isSm = function() {
	return window.matchMedia('(max-width: 768px)').matches;
};


/**
 * @description quickly check if we're not in med range
 * @return bool
 */
W.isMed = function() {
	return window.matchMedia('(min-width: 769px)').matches;
};


/**
 * @description quickly check if we're on larger viewports
 * @return bool
 */
W.isBigPlus = function() {
	return window.matchMedia('(min-width: 961px)').matches;
};


/**
 * @description quickly check if we're on huge viewports
 * @return bool
 */
W.isHuge = function() {
	return window.matchMedia('(min-width: 1200px)').matches;
};


/**
 * @description get data js dom element, this is used to interact with the dom without css selectors
 * @note note that the main difference here is this doesnt use jquery,
 *       so please use this one over $.js if at all possible
 * @param {string} [el] [data-js attr to look for]
 * @param {DOM Node} [parent] optional param, if you dont want to search whole doc
 * @return dom node
 * @author Ross Patton
 */
W.js = function( el, parent ) {
	if ( !parent ) {
		return document.querySelector('[data-js=' + el + ']');
	}
	else {
		return parent.querySelector('[data-js=' + el + ']');
	}
};


/**
 * @description get data js dom element(s), this is used to interact with the dom without css selectors
 * @note use this over W.js only if you need to get a list of elements
 * @param {string} [el] [data-js attr to look for]
 * @param {DOM Node} [parent] optional param, if you dont want to search whole doc
 * @returns dom list
 * @author Ross Patton
 */
W.jsAll = function( el, parent ) {
	if ( !parent ) {
		return document.querySelectorAll('[data-js=' + el + ']');
	}
	else {
		return parent.querySelectorAll('[data-js=' + el + ']');
	}
};


/**
 * @description convenience wrapper for querySelectorAll
 *              suggested use is for grabbing custom data attributes
 *              or just for any css or html selector
 * @param {string} [selector] [selector to grab (.className or [data-attr] etc)]
 * @param {DOM Node} [parent] optional param, if you dont want to search whole doc
 * @returns {object} NodeList
 * @author Ross Patton
 */
W.q = function( selector, parent ) {
	if ( !parent ) {
		return document.querySelectorAll( selector );
	}
	else {
		return parent.querySelectorAll( selector );
	}
};


/**
 * @description strips html from content
 * @param  {string} [html] string with html
 * @return {string} string without html
 * @author Tony Vongprachanh
 */
W.strip = function( html ) {
	var tmp = document.createElement('DIV');
	tmp.innerHTML = html;
	return tmp.textContent || tmp.innerText || '';
};


/**
 * @description validate a given string is a valid email address
 * @param  {string} [email string to validate as]
 * @return {bool} [true if valid email is given]
 * @author Ben Chirlin
 */
W.validateEmail = function( email ) {
	var acceptedCharactersRe = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
	return acceptedCharactersRe.test( email );
};


/**
 * @description handy shorthand way of checking if adblock is blocking
 * @return {bool} [true if any of these ad services are blocked, false if none are]
 * @author BENNY THE CODE GOBLIN (who wrote me and y you no docblock?)
 */
W.fallback = function() {
	return typeof CN.dart === 'undefined' ||
	typeof CN.dart.getAdLog === 'undefined' ||
	typeof docCookies === 'undefined';
};

/**
 * @description catch all for anything that needs to be fired only once, at start
*/


W.init = (function() {
	// the following vars are used by every social count function
	var host = window.location.host;
	var href = window.location.href;
	var url = href.replace( host, 'www.wired.com' );
	var urlNoSlash = url.replace(/\/$/, '');


	/**
	 * recursively get all text nodes in a parent node
	 * @param  {object} nodeList [main node to iterate through]
	 * @returns {Array<object>} [a list of text nodes]
	 */
	function getTextNodesIn( node ) {
		var textNodes = [],
			noWhiteSpace = /\S/;

		function getTextNodes( node ) {
			var i = 0,
				len = node.childNodes.length;

			// if text and contains letters, add to list of valid txt nodes
			if ( node.nodeType === 3 ) {
				if ( noWhiteSpace.test( node.nodeValue ) ) {
					textNodes.push( node );
				}
			}
			else {
				for ( i; i < len; i++ ) {
					getTextNodes( node.childNodes[i] );
				}
			}
		}

		getTextNodes( node );
		return textNodes;
	}


	/**
	 * refresh page every {refreshTime} minutes if user is idle
	 * @param  {number} refreshTime Number of minutes user must be idle before reloading page
	 * @return void
	 */
	var refresher = function( refreshTime ) {
		// Get current time
		var time = new Date().getTime();
		// If user interacts update current time
		$( document ).on( 'mousemove keypress', function() {
			time = new Date().getTime();
		} );

		// Callback checks if users been idle for at least {refreshTime} minutes
		// if so, reloads page and logs
		function refresh() {
			var currentTime = new Date().getTime();
			if ( (currentTime - time) >= refreshTime * 60 * 1000 ) {
				window.location.reload( true );
				CN.debug.info( 'Reloading page..' );
			}
		}
		// Every 10 seconds call refresh callback
		setInterval(refresh, 10000);
	};


	/**
	 * if author forgot credit icons, add them
	 * i hate this, we should just validate that they included the icons
	 * @author Ross Patton
	 * @see any gallery where the author forgot the credit icon
	 * @returns void
	 */
	var addsCreditIconsIfMissing = function() {
		var gallery = document.getElementsByClassName('wired-gallery')[0],
			nodeList = getTextNodesIn( gallery ).filter(
				function( val ) {
					return val.parentNode.tagName === 'P';
				}
			),
			photo = /(Photo: )|(photo: )|(Photo by )|(photo by )|(Photography By )|(photography by )|(postProduction by )|(Postproduction by )+/,
			illo = /(Illustration: )|(illustrated by )|(Illustration by:)|(illustrated by: )|(illustrated: )+/,
			len = nodeList.length,
			txt;

		// abort if no captions
		if ( !nodeList || nodeList.length === 0 ) { return; }

		while ( len-- ) {
			// needed for some captions
			if ( nodeList[len].parentNode ) {

				// remove the forbidden text.
				if ( photo.test( nodeList[len].textContent ) ) {
					txt = nodeList[len].parentNode.innerHTML.replace( photo, '<span class="ui ui-credit ui-photo marg-r-sm float-l"></span>' );
					nodeList[len].parentNode.innerHTML = txt;
				}
				else if ( illo.test( nodeList[len].textContent ) ) {
					txt = nodeList[len].parentNode.innerHTML.replace( illo, '<span class="ui ui-credit ui-photo marg-r-sm float-l"></span>' );
					nodeList[len].parentNode.innerHTML = txt;
				}
			}
		}
	};


	/**
	 * @description wraps youtube and vimeo video with special classes
	 * @see check any article with an inline youtube or vimeo video. scale it down to see constrained ratio.
	 * @author Tony Vongprachanh
	 */
	var addVideoWrapper = function() {
		// Find all YouTube, Vimeo, and CNE videos in post content
		var $postVideos = $( '.content iframe[src^="//www.youtube.com"], .content iframe[src^="http://www.youtube.com"], .content iframe[src^="https://www.youtube.com"], .content iframe[src^="//player.vimeo.com"], .content iframe[src^="http://player.vimeo.com"], .content iframe[src^="https://player.vimeo.com"], .content iframe[src^="http://player.cnevids.com"], .content iframe[src^="https://player.cnevids.com"]'),
			content = W.get('content');

		if ( typeof $postVideos === 'undefined' ) {
			return;
		}

		function isFirstFrame( node, content ) {
			if ( typeof content.children[0] !== 'undefined' && node === content.children[0] ) {
				return true;
			}
			else if ( node === content ) {
				return false;
			}
			else {
				return isFirstFrame( node.parentNode, content );
			}
		}

		// Wraps each video with a div tag to allow scaling of 16:9 ratio for desktop and mobile
		$postVideos.each(function( i, val ) {
			if ( i === 0 && isFirstFrame( val, content ) ) {
				$(this).wrap( '<div data-skip class="relative video-content carve-full marg-b-huge mob-marg-b-med med-marg-b-big"></div>' );
			}
			else {
				$(this).wrap( '<div class="relative video-content carve-full marg-t-huge marg-b-huge mob-marg-t-med mob-marg-b-med med-marg-t-big med-marg-b-big"></div>' );
			}
		});
	};


	/**
	 * @description wraps first three words in span tag with a class of lede
	 *              runs only on article pages, once
	 * @param {type: number} [n] [number of words to wrap]
	 * @see  if working, check first three words of any article for example
	 * @author Ross Patton
	 */
	var addLedeToFirstNthWords = function( n ) {
		// error checkin (n is the amount of words to wrap with the lede class)
		if ( typeof n !== 'number' ) { return; }

		// at this point. it makes more sense to just use an object @TODO
		var content = W.get('content');
		var legacy = document.body.classList.contains('legacy-content');
		var i = 0;
		var len;
		var loopNode; // stuff for loop
		var theTextNodes;
		var theNode;
		var theParent;
		var theLede;
		var theText;
		var theWrapper;

		// checks if page doesn't have content or using a legacy template if so abort
		if ( !content || legacy ) { return; }

		/**
		 * @description checks if a node is somewhere we can place a lede
		 *              just a convenience thing basically
		 *              hackity hackity
		 * @param  {object} node [dom node to check]
		 * @returns {boolean} [true if valid node false if not]
		 */
		function nodeValid( node ) {
			var isValid = false;

			if ( node.tagName !== 'NOSCRIPT' &&
				node.tagName !== 'STYLE' &&
				node.nodeType !== 8 &&
				node.parentNode.id !== 'wired-tired-text' &&
				node.parentNode.parentNode.id !== 'wired-tired-text' &&
				node.parentNode.id !== 'how-rate' &&
				node.parentNode.parentNode.id !== 'how-rate' &&
				!node.classList.contains('caption') &&
				!node.classList.contains('credit') &&
				!node.classList.contains('wp-caption-text') &&
				!node.parentNode.classList.contains('credit') &&
				!node.parentNode.classList.contains('wp-caption-text') &&
				!node.parentNode.classList.contains('sidebar-left') &&
				!node.parentNode.classList.contains('sidebar-right') &&
				!node.parentNode.classList.contains('alignleft') &&
				!node.parentNode.classList.contains('alignright') &&
				!node.classList.contains('visually-hidden') ) {

				if ( theTextNodes[i].textContent.trim().split(' ').length >= 3 ) {
					isValid = true;
				}
			}

			return isValid;
		}


		/**
		 * @description checks if a node is emphasized
		 *              just a convenience thing basically
		 * @param  {object} node [dom node to check]
		 * @returns {boolean} [true if valid node false if not]
		 */
		function nodeEmphasized( node ) {
			var isEmphasized = false;
			if ( node.tagName === 'EM' ||
				node.tagName === 'CITE' ||
				node.tagName === 'I' ) {
				isEmphasized = true;
			}

			return isEmphasized;
		}

		// all text nodes
		theTextNodes = getTextNodesIn( content );
		len = theTextNodes.length;

		// this should never happen, but if it does, abort
		if ( !theTextNodes ) { return; }

		// so now we have our text nodes. find the first one we can use.
		for ( i; i < len; i++ ) {
			loopNode = theTextNodes[i].parentNode;

			// make sure not an invalid tag
			if ( nodeValid( loopNode ) ) {
				if ( nodeEmphasized( loopNode ) ) {
					// if first useful node is inside an em, cite or i, abort
					return;
				}

				// if first useful node is NOT inside an em, cite, i, or caption
				// then its the one we (finally) want
				if ( loopNode.childNodes[0] === theTextNodes[i] ) {
					theNode = theTextNodes[i];
					break;
				}
				else {
					return;
				}
			}
		}

		// after all the above we now have something to work with
		if ( theNode ) {
			// self explanatory
			theParent = theNode.parentNode;

			// get just the text, in the form of an array
			theLede = theNode.textContent.split(' ');

			// get the remaining text as a separate array
			theText = theLede.slice( n, theLede.length );

			// grab just the lede
			theLede = theLede.slice( 0, n );

			// make them into strings again
			theLede = theLede.join(' ');
			theText = theText.join(' ');

			// create the span and the class
			theWrapper = document.createElement( 'span' );
			theWrapper.className = 'lede';
			theWrapper.textContent = theLede + ' ';
			// to keep it from interrupting tab flow
			theWrapper.setAttribute('tabindex', '-1');

			// recreate the rest of the text
			if ( theText.length ) {
				theText = document.createTextNode( theText + ' ' );
			}

			/**
			 * insert new lede tag, with remainder text right after it
			 * only insert remainder text if there actually is any
			 */
			if ( theText.length > 1 ) {
				theParent.insertBefore( theText, theParent.childNodes[0] );
				theParent.insertBefore( theWrapper, theText );
				theParent.removeChild( theParent.childNodes[n - 1] );
			}
			else {
				theParent.insertBefore( theWrapper, theParent.childNodes[0] );
				theParent.removeChild( theParent.childNodes[n - 2] );
			}
		}
	};


	/**
	 * @description builds the white overlay gallery on articles
	 *              loops through all (non-gallery) images in post
	 *              finds original large version, then builds gallery using that
	 * 1: gets the post content + postHeader, we dont want to get images already in the overlay gallery
	 * @see any article page with inline images. click image to see overlay
	 * @author Ross Patton
	 */
	var setupOverlay = function() {
		if ( W.isMob() ) { return; }
		var slides = [];
		var content = [];  // 1

		// if not a gallery post grab postHeader too
		if ( document.body.classList.contains('no-gallery') ) {
			content.push( W.get('postHeader') );
		}

		// if there is a usable figure in postHeader,
		// i want it to come first in the array
		content.push( W.get('content') );

		// right now im just getting figures, images not inside a figure (non shortcode) dont get grabbed
		content.forEach(function( container ) {
			var figures = W.domToArray( container.getElementsByTagName('figure') );

			if ( figures ) {
				return figures.forEach(function(figure) {
					if ( figure.classList.contains('slide') ) { return; }
					return slides.push( figure );
				});
			}
		});

		if ( slides.length === 0 ) {
			return;
		}

		// remove arrows if only one image in post
		if ( slides.length === 1 ) {
			$( W.get('oGallery') )
				.find('[data-js="arrow"]')
				.addClass('visibility-hidden');
		}

		// if more than 0 images found, build gallery (check needed unless we expand how we check for images to put in the gallery)
		if ( slides.length > 0 ) {
			return slides.forEach(function( slide, i ) {
				var anchor = slide.getElementsByTagName('a')[0];
				var span = document.createElement('span');
				var img = slide.getElementsByTagName('img')[0];

				if ( img ) {
					// add data attr to each img
					img.setAttribute( 'data-ui', 'overlayOpen' );
					// used to link directly to slide in gallery
					img.setAttribute( 'data-order', i );
					img.className += ' cursor-zoom';
				}

				// get src of the 'big' img the post img links off to
				if ( anchor ) {
					// remove the default anchor link
					anchor.setAttribute( 'href', 'javascript:;' );
					anchor.setAttribute( 'tabindex', '-1' );
					anchor.setAttribute( 'aria-hidden', 'true' );
					anchor.setAttribute( 'role', 'presentation' );

					span.className = 'visually-hidden';
					span.textContent = 'Click to Open Overlay Gallery';
					anchor.appendChild( span );
				}
			});
		}
	};


	/**
	 * @description if any ad calls failed, show fallback image
	 * the commented out lines are for when we have tall fallbacks
	 * @see turn on adblock and look at any page with ads
	 * @author Ross Patton
	 * @returns Function
	 */
	var consumerMarketingFallback = function() {
		var fallbacks = W.domToArray( W.getAll('fallback') );

		// Hide ad divs so it won't interfere with fallback
		$( '.advertisement' ).addClass( 'hide' );

		// no ad, so let the latest news card be it's normal tall self
		if ( W.get('latestNews') ) {
			W.get('latestNews').classList.remove('squish-normal');
		}

		// if on mobile breakpoint, we want to collapse the leaderboard
		// since we don't have a mobile fallback
		if ( W.get('leaderboard') ) {
			W.get('leaderboard').style.minHeight = '16px';
		}

		// the aside stuff is really brittle
		// move the dom -> break the code
		// might make more sense to loop through them separately
		// using the data attributes
		return fallbacks.forEach(function( fb ) {
			return fb.classList.remove('hide');
		});
	};


	// get facebook like count for article
	var facebookCount = function() {
		return $.getJSON( 'http://graph.facebook.com/?ids=' + url )
		.done(function( res ) {
			W.domToArray( W.getAll('fbCount') ).forEach(function(val) {
				var count = res[url].shares > 0 ? res[url].shares : '';
				val.appendChild( document.createTextNode(count) );
			});
		})
		.fail(function(err) {
			return console.error('Couldnt retrieve fb social count cause: ' + err);
		});
	};


	// get twitter count for article
	var twitterCount = function() {
		var twit = 'http://urls.api.twitter.com/1/urls/count.json?url=';

		return $.ajax({
			url: twit + urlNoSlash,
			dataType: 'jsonp'
		}).done(function( res ) {
			W.domToArray( W.getAll('twitCount') ).forEach(function(val) {
				var count = res.count > 0 ? res.count : '';
				val.appendChild( document.createTextNode(count) );
			});
		})
		.fail(function( err ) {
			return console.error('Couldnt retrieve twitter social count cause: ' + err);
		});
	};


	// get pinterest like count for article
	var pinterestCount = function() {
		var pint = 'http://api.pinterest.com/v1/urls/count.json?url=';

		return $.ajax({
			url: pint + urlNoSlash,
			dataType: 'jsonp'
		}).done(function( res1 ) {
			// we have to make 2 requests because
			// pinterest needs the slash and no slash combined
			return $.ajax({
				url: pint + url,
				dataType: 'jsonp'
			}).done(function( res2 ) {
				W.domToArray( W.getAll('pintCount') )
				.forEach(function(val) {
					var total = res1.count + res2.count;
					var count = total > 0 ? total : '';
					val.appendChild( document.createTextNode(count) );
				});
			})
			.fail(function( err ) {
				return console.error('Couldnt retrieve pinterest social count (without slash) cause: ' + err);
			});
		})
		.fail(function( err ) {
			return console.error('Couldnt retrieve pinterest social count (with slash) cause: ' + err);
		});
	};


	/**
	 * @description truncate byline after recognizing a comma
	 * @see view home page under latest news card
	 * @author Tony Vongprachanh
	 * @returns void
	 */
	var removeCommaLatestNews = function() {
		var str,
			position,
			// @TODO this is a pretty inefficient selector
			bylines = document.querySelectorAll('#latest-news .byline');

		for( position = 0; position < bylines.length; position++ ) {
			str = bylines[position].innerHTML;
			if ( str.indexOf(',') !== -1 ) {
				bylines[position].innerHTML = str.substring(0, str.indexOf(','));
			}
		}
	};


	/**
	 * @description this function initializes headroom on all elements 	with a data-headroom atrr. headroom is a 3rd party (vendor) script that adds / removes classes based on scroll
	 * @requires ./vendor/headroom.js
	 * @see any page on the site, the global header is the most prominent example
	 * @author Ross Patton
	 * @returns void
	 */
	var initHeadroom = function() {
		var hrNodeList  = W.q('[data-headroom]'),
			len = hrNodeList.length,
			ref;

		// initialize headroom for all els with the attr
		while ( len-- ) {
			ref = new Headroom( hrNodeList[len] );
			ref.init();
		}
	};


	/**
	 * check if article is too short, set sidebars to be relative positioned
	 * @author Ross Patton
	 * @see any really short article ( sticky-ness should turn off )
	 * @returns void
	 */
	var minArticleHeight = function() {
		var sidebar = W.get('stickySidebar'),
			topOffSet = W.get('article').offsetHeight;

		// not prob on mobile cause we dont have sidebars
		// 1900 is our min height to accommodate large hoisted image, gallery, or video
		// 1200 is our min height to accommodate default
		// this solves the problem of the sidebar overlapping the prefooter on article pages
		if ( topOffSet === 1200 || topOffSet === 1900 ) {
			// inline styles for the override
			sidebar.style.position = 'relative';
			sidebar.style.top = '0px';
		}
	};


	var exposeRandomSocialBox = function() {
		var socialUnits = W.getAll('social-unit'),

			// Indicate the number of areas in which the units are displayed
			numAreas = W.getAll('cm-social-wrapper').length,

			// The number of social units per area (header or footer)
			numSocialUnits = socialUnits.length / numAreas,

			// A random index for a social unit
			randUnitNumber = Math.floor(Math.random() * numSocialUnits),
			i = 0;

		// Display the randUnitNumber-th unit in each area
		for ( i; i < numAreas; i++ ) {
			if ( typeof socialUnits[randUnitNumber + ( i * numSocialUnits )] !== 'undefined' ) {
				socialUnits[randUnitNumber + ( i * numSocialUnits )].style.display = 'block';
			}
		}
	};


	/**
	 * Set the height of the wrapper.
	 * @return void
	 */
	var videoPlaylistHeightFix = function() {
		// Do not adjust the scrollable area on mobile
		if ( W.isMob() ) { return; }

		var cnePlayerWrapper = W.get('cnePlayer');
		var playlistVideos = W.get('playlist-videos');
		var videosWrapper = W.get('videos-wrapper');
		var videoFinalWidth;
		var videoFinalHeight;
		var descriptionHeight;

		if ( playlistVideos && videosWrapper && cnePlayerWrapper ) {
			videoFinalWidth = cnePlayerWrapper.offsetWidth - 16; // -16 because margin is included and we need actual width
			videoFinalHeight = ( 9 * videoFinalWidth ) / 16;
			descriptionHeight = cnePlayerWrapper.getElementsByClassName('row')[0].offsetHeight;

			/**
			 * The playlist height is calculated using the following elements:
			 *
			 *    descriptionHeight: Height of the video description
			 *     videoFinalHeight: Height of the estimated video based on the width of the area and a 16:9 ratio
			 *                   16: Margin above the video
			 *                  -32: Account for the margin above and below the playlist area
			 */
			playlistVideos.style.height = descriptionHeight + videoFinalHeight + 16 - 32 + 'px';
		}
	};


	// expose our functions
	return {
		removeCommaLatestNews: _.once(removeCommaLatestNews),
		addCreditIconsIfMissing: _.once(addsCreditIconsIfMissing),
		addVideoWrapper: _.once(addVideoWrapper),
		articleHeight: _.once( minArticleHeight ),
		fallback: _.once( consumerMarketingFallback ),
		fbCount: facebookCount,
		twitCount: twitterCount,
		pintCount: pinterestCount,
		header: _.once( initHeadroom ),
		oGallery: _.once( setupOverlay ),
		lede: _.once( addLedeToFirstNthWords ),
		exposeRandomSocialBox: _.once( exposeRandomSocialBox ),
		refresher: _.once( refresher ),
		videoPlaylistHeightFix: _.once( videoPlaylistHeightFix )
	};
}());

/**
* @description load up / refresh our smart cards (most recent, most shared, etc)
*
* @TODO the js for all these smart/recirc cards is nearly identical
*       maybe just have one function to render the card and just pass in
*       different data and params as needed
*
* @requires jQuery, underscore/lodash
*/

W.smart = (function() {
	/**
	* @description  functionality for latest news smart cards
	* @param {string} [target] [data-js of element where we will render the output]
	*/
	var mostRecent = function( target ) {
		if ( typeof target !== 'object' ) { return; }

		/**
		* @description the doc frag method is more verbose than others,
		*              and the perf gains are small on modern browsers BUT,
		*              it greatly reduces repaint / reflow calc time,
		* @param {JSON} [res] [response from our call to the WP JSON API]
		* @see Latest News card on any grid, if working
		* @read http://andrew.hedges.name/experiments/innerhtml/original.html
		* @author Ross Patton
		*/
		var apiUrl = 'http://' + location.host + '/wp-json/posts/';

		function render( res ) {
			var frag = document.createDocumentFragment();
			var data = res.slice( 0, 5 );

			data.forEach(function( value, i ) {
				var currLi = document.createElement('li');
				var currAnchor = document.createElement('a');
				var currImg = document.createElement('img');
				var currAuth = document.createElement('span');
				var currTitle = document.createElement('h5');
				var postWrap = document.createElement('div');
				var currHr = document.createElement('hr');

				currLi.setAttribute( 'height', '108' );
				currLi.className = 'story-' + i;

				// hides final 2 li if ad is tall
				if ( i > 2 ) {
					currLi.className += ' squish-hide';
					currHr.className += ' squish-hide';
				}

				// create the anchor tag
				currAnchor.setAttribute( 'href', value.link );
				currAnchor.className = 'clearfix pad';

				// create the img node
				currImg.setAttribute( 'height', '75' );
				currImg.setAttribute( 'width', '75' );
				currImg.setAttribute( 'aria-hidden', 'true' );
				currImg.setAttribute( 'role', 'presentation' );
				currImg.className = 'thumb col mob-col-6 med-col-6 big-col-6';

				// for the rare case where there are no images in a post
				// check for both is necessary (it's failed both ways before)
				if ( value.featured_image &&
					value.featured_image.attachment_meta ) {
					currImg.setAttribute( 'src', value.featured_image.attachment_meta.sizes.thumbnail.url );
				}

				postWrap.className = 'col mob-col-12 med-col-12 big-col-12';

				currAuth.className = 'byline marg-b-micro';
				currAuth.appendChild(
					document.createTextNode( value.author.name )
				);

				currTitle.className = 'title exchange-sm';
				currTitle.appendChild(
					document.createTextNode(
						$.parseHTML( value.title )[0].nodeValue
					)
				);

				// currTime.className = 'marg-t-sm';
				// currTime.insertAdjacentHTML( 'beforeend', value.date_gmt );

				// append all these things together into the li
				currLi.appendChild( currAnchor );
				currAnchor.appendChild( currImg );
				currAnchor.appendChild( postWrap );
				postWrap.appendChild( currAuth );
				postWrap.appendChild( currTitle );

				currHr.className = 'story-' + i;

				// append everything to the frag
				frag.appendChild( currLi );
				frag.appendChild( currHr );

			});

			// append frag to the dom
			return target.appendChild( frag );
		}

		return $.getJSON( apiUrl, render );
	};

	// expose
	return {
		rec: mostRecent
	};
}());

/*
* @description load up 3rd party recirc such as outbrain, zergnet, etc
* @TODO REACTIFY ME PLEEEEEEASE, IT HURTS TO LIVE
* @requires underscore/lodash
*/
W.recirc = (function() {
	/**
	* @description Makes the call to outbrain
	* @param {#id} [target] [id of element where we will render the output]
	* @param {#id} [widgetId] [unique id provided by outbrain]
	* @param {#id} [elementId] [the element containing outbrain permalink]
	*
	* @requires ./vendor/outbrain.js
	* @docs http://developer.outbrain.com/apis/outbrain-js-api-guide/
	* @author Kathleen Vignos / Ross Patton / Tony Vongprachanh
	*/
	var outbrain = function( target, widgetId, elementId ) {
		if ( typeof target !== 'object' ) { return; }

		// required to make call to outbrain
		// @TODO why oh why is this a data attribute?
		var outbrainPermalink =
			document.
			getElementById( elementId ).
			getAttribute('data-outbrain-url');

		var id = {
			permalink: outbrainPermalink,
			widgetId: widgetId
		};

		var apiUrl = 'http://' + location.host + '/wp-json/posts/';


		/*
		* @description build document fragment for we recommend card
		* @param  data response from outbrain
		* @see single prefooter of most articles
		*/
		function recommend( data ) {
			data = data.slice( 0, 5 );

			var frag = document.createDocumentFragment();
			var paidStory;

			data.forEach(function( value, i ) {
				var external;
				var currLi = document.createElement('li');
				var currAnchor = document.createElement('a');
				var currImg = document.createElement('img');
				var postWrap = document.createElement('div');
				var hr = document.createElement('hr');
				var currAuthor = document.createElement('span');
				var currTitle = document.createElement('h5');

				// Set height attr for li node
				currLi.setAttribute( 'height', '107' );

				if ( i > 2 ) {
					currLi.className = 'squish-hide';
				}

				// Set href and classnames for anchor tag
				currAnchor.setAttribute( 'href', value.url );
				currAnchor.className = 'clearfix pad';

				// Set our img node's attributes & classes
				currImg.setAttribute( 'src',
					value.thumbnail.url.slice(0, -11) + '75x75.jpg'
				);
				currImg.setAttribute( 'height', '75' );
				currImg.setAttribute( 'width', '75' );
				currImg.setAttribute( 'aria-hidden', 'true' );
				currImg.setAttribute( 'role', 'presentation' );
				currImg.className = 'thumb col mob-col-6 med-col-6 big-col-6';

				// Add classes to post-wrap div
				postWrap.className = 'col mob-col-12 med-col-12 big-col-12';

				// Add classes for title and set the text
				currAuthor.className = 'byline marg-b-micro';
				currAuthor.appendChild(
					document.createTextNode( value.author )
				);

				// Add classes for title and set the text
				currTitle.className = 'title line-clamp exchange-sm';
				currTitle.appendChild(
					document.createTextNode( value.content.replace('| WIRED', '') )
				);

				// If story is not from wired - check to see if paid link, when pc_id will be defined.
				if ( value.pc_id !== undefined ) {
					external = document.createElement( 'span' );
					external.className = 'byline marg-b-micro';
					// if author not wired, append advertiser name to story
					external.appendChild(
						document.createTextNode( value.source_name )
					);
					currLi.className += ' bg-gray-2 external';
				}

				// Append all these things together
				currLi.appendChild( currAnchor );
				currAnchor.appendChild( currImg );
				currAnchor.appendChild( postWrap );

				if ( external ) {
					postWrap.appendChild( external );
				}

				postWrap.appendChild( currAuthor );
				postWrap.appendChild( currTitle );

				// Append everything to the frag
				if ( !external ) {
					frag.appendChild( currLi );
					if ( i > 2 ) {
						hr.className = 'squish-hide';
					}
					if ( i < 4 ) {
						frag.appendChild( hr );
					}
				}
				else {
					paidStory = currLi;
				}

			});

			// Append frag to the dom, make sure the paid story is last
			target.appendChild( frag );
			target.appendChild( paidStory );
		}


		/*
		* @description build document fragment for around the web card
		* @param  data response from outbrain
		* @see top of prefooter for any article, if function is working
		*/
		function around( data ) {
			var frag = document.createDocumentFragment();

			data.forEach(function( val, i ) {
				var postWrap = document.createElement('div');
				var currCol = document.createElement('li');
				var currAnchor = document.createElement('a');
				var currImgWrap = document.createElement('div');
				var currImg = document.createElement('img');
				var currSrcName = document.createElement('span');
				var currDesc = document.createElement('p');
				var thumbURL = val.thumbnail.url;

				// we dont want to slice the json api url
				if ( typeof OBR !== 'undefined' ) {
					thumbURL = val.thumbnail.url.slice(0, -10) + '120x120.jpg';
				}

				// Grab outbrain values and then assign to elements
				currAnchor.setAttribute( 'href', val.url );
				currAnchor.setAttribute( 'target', '_blank' );
				currImg.setAttribute( 'src', thumbURL );
				currSrcName.appendChild(
					document.createTextNode( val.source_name )
				);

				// Limit the amount of text we get back
				if ( val.content.length >= 55 ) {
					val.content = val.content.replace('| WIRED', '');
				}

				currDesc.appendChild(
					document.createTextNode(
						$.parseHTML( val.content )[0].nodeValue
					)
				);

				// Apply classes and attributes
				currAnchor.className = 'clearfix no-pad';
				currAnchor.setAttribute('tabindex', '-1');
				currAnchor.setAttribute('aria-hidden', 'true');
				currAnchor.setAttribute('role', 'presentation');

				if ( i > 0 ) {
					currCol.className = 'border-l big-pad-l-med med-pad-l-med mob-pad-t-med';
				}

				currCol.className += ' col big-col-3 med-col-3 mob-pad-b-med';
				currCol.setAttribute('tabindex', '-1');
				currCol.setAttribute('aria-hidden', 'true');
				currCol.setAttribute('role', 'presentation');

				currSrcName.className = 'byline marg-b-micro word-break';
				currDesc.className = 'exchange-sm';
				currImgWrap.className = 'around-img-wrap overflow-hide mob-col-5 ';
				currImg.className = 'row';
				postWrap.className = 'big-marg-t-med med-marg-t-med mob-col-13 mob-omega';

				// Append elements to list item
				currImgWrap.appendChild( currImg );
				currCol.appendChild( currAnchor );
				currAnchor.appendChild( currImgWrap );
				currAnchor.appendChild( postWrap );
				postWrap.appendChild( currSrcName );
				postWrap.appendChild( currDesc );

				return frag.appendChild( currCol );
			});

			// Print document fragment to page template
			return target.appendChild( frag );
		}


		// Fallback if OBR not available
		if ( typeof OBR === 'undefined' ) {
			$( W.getAll('poweredByOutbrain') ).remove();

			return $.getJSON( apiUrl, function(res) {
				if ( elementId === 'we-recommend' ) {
					return W.smart.rec( W.get('we-recommend') );
				}
				else if ( elementId === 'around-the-web' ) {
					W.get('aroundTheWebHdr').textContent = 'You Might Like';
					// Map the data we get from json api to mirror
					// outbrain's json, so we can reuse the function
					// you dont know js etc etc
					// just passes an array of objects
					// to around for rendering
					return around(
						res.slice( 3, -1 )
						.map(function( val ) {
							return {
								url: val.link,
								content: val.title,
								source_name: val.author.name,
								thumbnail: {
									url: val.featured_image.attachment_meta.sizes.thumbnail.url
								}
							};
						})
					);
				}
			});
		}

		// default kickoff (OBR available, call outbrain)
		return OBR.extern.callRecs( id, function(res) {
			var data = res.doc.slice( 0 );

			if ( elementId === 'we-recommend' ) {
				return recommend( data );
			}
			else if ( elementId === 'around-the-web' ) {
				return around( data );
			}
		});
	};

	// Expose outbrain function
	return {
		outbrain: outbrain
	};
}());

/**
 * @description main wrapper for all functions
 *              dealing with scroll based events
 */
// @TODO POST LAUNCH
// 1 -> more caching more caching more caching
// 2 -> could be simplified a lot.
// 		would prefer a config object instead of tons of vars
W.monitor = (function() {
	var article = W.get('article');

	if ( !article ) { return; }

	var articleBottom = false;
	var scrollTrigger = $( article ).offset().top + article.clientHeight;
	var winHeight = window.innerHeight;
	var currScroll = 0;
	var prevScroll = 0;

	// vars for stickiness
	var doWeStick = true; // toggle stickiness on/off
	var doWeToggle = true;
	var stickies = W.q('[data-sticky]'); // sticky carvedEls
	var carvedEls = W.q('[data-skip], .full-width'); // nodes we skip over
	var hdrHeight = W.get('header').offsetHeight; // is nav open or not
	var limit;
	var parentPos;

	// vars for fadein
	var weFadinYouHatin = true;
	var fadeElements = W.getAll('fader');
	var threshold = winHeight * 0.2;
	var count;
	var elementOffset;
	var isFadeTime;

	// if article too short dont stick
	// min height is 1200, it cant be less than that
	if ( article && article.offsetHeight === 1200 || !stickies ) {
		doWeStick = false;
	}

	// if no carved elements, turn off toggling
	if ( carvedEls && carvedEls.length === 0 ) {
		doWeToggle = false;
	}


	/**
	 * @description if in copy ads exist, this func fades sidebar in/out
	 * @param {object} s [sticky element we're togglin]
	 * @param {number} currScroll [curr scroll pos + hdrHeight]
	 * @param {number} sOffset [curr scroll pos + hdrHeight + s.offsetHeight]
	 * @author Ross Patton
	 * @returns void
	 */
	function toggleSidebars( s, currScroll, sOffset ) {
		var len = carvedEls.length;

		while ( len-- ) {
			// if in range of element to skip over
			if ( sOffset > carvedEls[len].top &&
				currScroll < carvedEls[len].bottom ) {

				// if no absolute class already
				// do as little work as possible
				if ( !s.classList.contains('absolute') ) {
					s.className += ' absolute';
					s.classList.remove('sticky');
					s.style.top = ( carvedEls[len].top - s.offsetHeight - parentPos ) + 'px';
				}

				// if top of screen hits top of element
				if ( currScroll > carvedEls[len].top ) {
					if ( !s.classList.contains('opacity-0') ) {
						s.classList.add('opacity-0');
					}
				}
			}
		}
	}


	/**
	 * @description toggles stickiness on or off
	 * @param  {object} s [sticky element we're togglin]
	 * @param  {number} currScroll [curr scroll pos + hdrHeight]
	 * @param  {number} sOffset [curr scroll pos + hdrHeight + s.offsetHeight]
	 * @author Ross Patton
	 * @returns void
	 */
	function toggleSticky( s, currScroll, sOffset ) {
		// make sticky or not depending on currScroll
		// 55 is height of brandbar (30px) + 25px spacing
		if ( currScroll > $( s.parentNode ).offset().top -
			W.get('globalNav').clientHeight + 25 ) {

			// if not sticky class already
			if ( !s.classList.contains('sticky') ) {
				s.className += ' sticky';
				s.classList.remove('absolute');
				s.style.top = '';
			}

			// if sticky has been faded out
			if ( s.classList.contains('opacity-0') ) {
				s.classList.remove('opacity-0');
			}
		}
		// if not in range of stickiness, remove sticky
		else {
			// if sticky class
			if ( s.classList.contains('sticky') ) {
				s.classList.remove('sticky');
			}

			// remove style top
			if ( s.style.top !== '') {
				s.style.top = '';
			}
		}

		// stick to bottom or not depending on sOffset
		if ( sOffset > limit ) {
			// doing style directly because the amount
			// needs to be conditional based on
			// whether we have tags or not
			if ( !s.classList.contains('stuck') ) {
				s.classList.add('stuck');

				if ( W.get('articleTags') ) {
					s.style.bottom = '0px';
				}
				else {
					s.style.bottom = '14px';
				}
			}
		}
		else {
			// if stuck class... remove it
			if ( s.classList.contains('stuck') ) {
				s.classList.remove('stuck');
				s.style.bottom = '';
			}
		}
	}


	/**
	 * @description update stuff on load / scroll / resize / orientationchange
	 * @author Ross Patton
	 * @returns void
	 */
	var updateValues = _.debounce(function() {
		var len = carvedEls.length;

		winHeight = window.innerHeight;
		scrollTrigger = article ? $( article ).offset().top + article.clientHeight : undefined;

		// update end of article limit in case of resize
		if ( W.get('articleTags') ) {
			limit = $( W.get('articleTags') ).offset().top +
					W.get('articleTags').offsetHeight - 50;
		}
		else {
			limit = $( article ).offset().top + article.offsetHeight - 64;
		}

		// we update in case rads are takin a while to load
		carvedEls = W.q('[data-skip], .full-width');

		if ( carvedEls.length > 0 ) {
			// needed in case ads are slow to load
			doWeToggle = true;

			// set 2 new properties on each rad node
			// these properties designate the top and bottom offsets
			// 114 is weird but works ( it should be 50 but (shrug) )
			// 66 is inner ad padding + margin-bottom
			while( len-- ) {
				carvedEls[len].top = $( carvedEls[len] ).offset().top - 64;
				carvedEls[len].bottom = $( carvedEls[len] ).offset().top + carvedEls[len].offsetHeight;
			}
		}
	}, 150);


	/**
	* @description the main raf function
	*              handles all animations that might happen
	*              can also be used for any kind of  'on scroll' triggering
	* @author Ross Patton
	* @returns void
	*/
	var animator = function() {
		raf( animator ); // recursively call itself FOREVAH (we want this)
		currScroll = window.pageYOffset;
		var len = stickies.length;
		var sOffset;

		// exit early if possible and do no work
		if ( currScroll === prevScroll ) {
			return;
		}

		// if we stickin do some stuff
		if ( doWeStick && W.isMobPlus() ) {
			// hdr height can change at any time so we need to update it
			hdrHeight = W.get('header').offsetHeight;

			// update scroll pos
			currScroll += hdrHeight;

			// loop through all sticky items
			while ( len-- ) {
				// this seems inefficient
				parentPos = $( stickies[len].parentNode ).offset().top;
				// 60 is the space between the hdr and the sidebars
				sOffset = currScroll + stickies[len].offsetHeight + 60;

				// toggles stickiness entirely
				// eg, top or article or end of article
				toggleSticky( stickies[len], currScroll, sOffset );

				// fade sidebars in/out if incopy ads
				if ( doWeToggle && carvedEls.length > 0 ) {
					toggleSidebars( stickies[len], currScroll, sOffset );
				}

				// fade in images
				if ( weFadinYouHatin ) {
					count = fadeElements.length;

					while ( count-- ) {
						elementOffset = $( fadeElements[count] ).offset().top;
						isFadeTime = (winHeight + currScroll) - threshold > elementOffset;

						if ( isFadeTime && !$( fadeElements[count] ).hasClass('fade-in-up') ) {
							fadeElements[count].className += ' fade-in-up';
						}
					}
				}
				// end fade in stuff
			}

			// send o event12 to track page depth to end of article
			if ( !articleBottom &&
				window.pageYOffset + winHeight > scrollTrigger ) {
				try {
					$( document ).trigger( 'articleBottom' );
					articleBottom = true;
				}
				catch(e) {
					console.error('Failed to track scroll.');
				}
			}

			// save prev scroll for equality check next round
			prevScroll = window.pageYOffset;
		}
	};

	// on resize/etc we update the positions for
	// every element we might want to skip over
	$( window ).on( 'resize orientationchange scroll load touchstart', updateValues );

	// on tablet we want to update the scroll pos while moving
	// normally it only updates on touchstart/touchend
	$( window ).on( 'touchmove', function() {
		currScroll = window.pageYOffset;
	});

	// expose
	return {
		init: _.once(animator)
	};
}());

/**
 * @description main wrapper for all ui methods
 * @requires jQuery
 */
W.ui = (function() {
	/**
	* 1: get first gallery on page to target for key commands we just need a default gallery to fall back on, in case of multiples
	* 2: this is for navOpen and navClose. the way the nav is designed makes it very difficult to open / close without it kicking you back to the top, so i keep track of where you are and kick you back down
	 */
	var galleryRef, // 1,
		currPos, // 2
		navActive = false;

	// find a base gallery
	if ( document.body.classList.contains('single') ||
		document.body.classList.contains('feature-story-layout') ) {
		if ( W.get('inlineGallery') ) {
			galleryRef = W.js( 'gallerySlides', W.get('inlineGallery') );
		}
		else if ( W.get('fGallery') ) {
			galleryRef = W.js( 'gallerySlides', W.get('fGallery') );
		}
		else {
			galleryRef = W.get('oGallery');
		}
	}

	/**
	* @description bound binds all user interactions to one event listener
	* @see if working, it will bind all data-ui attrs to the cooresponding method
	*/
	var bound = function() {
		var $body = $('body');

		/**
		* @description bind to body, only fire if el clicked has a data-ui attr
		* @param {object} [event] [event object, all the stuff for our event]
		* @returns {function | error} [either the function we want, or an err]
		*/
		$body.on('click submit', '[data-ui]',
			function( e ) {
				e.stopPropagation();
				var interaction = this.getAttribute('data-ui');

				// check if method exists
				if ( !_uiMethods[interaction] ) {
					// stop code execution if function doesn't exist
					throw new Error('Ui event: ' + interaction + ' not defined');
				}
				// if method exists return function with event as 1st param
				else {
					return _uiMethods[interaction]( e );
				}
			}
		);

		/**
		* @description bind to body, only fire on mouseover on elements with data-hover attr
		* @param {object} [event] [event object, the event stuff]
		* @returns {function | error} [either the correct function or an err]
		*/

		$body.on( 'mouseleave', '[data-hover]',
			function( e ) {
				e.stopPropagation();
				var hoverAction = this.getAttribute( 'data-hover' );

				// check to make sure the hover method exists
				if ( !_uiHoverMethods[hoverAction] ) {
					// stop the code execution if function doesn't exist
					throw new Error('Hover event: ' + hoverAction + ' not defined');
				}
				// if the hover method does exist, do the thing
				else {
					return _uiHoverMethods[hoverAction]( e );
				}
			}
		);

		/**
		* @description Grab the actual text content of a headline as opposed to the text-transformed version that is rendered.
		* For easy social copy/pasting.
		* @param {Object} [e] The event object
		* @author Ian Sayre
		*/
		document.addEventListener( 'copy', function( e ) {
			if ( e.target.isEqualNode( W.get('postTitle') ) ) {
				e.preventDefault();
				return e.clipboardData.setData('text/plain', e.target.textContent);
			}
		});


		/**
		* @description binding hoverIntent. returns undefined since the code to handle mouse out is in _uiHoverMethods.hoverOut
		*  @return {undefined}
		*/
		hoverintent(
			W.get('subTog'),
			_uiHoverMethods.hoverIn,
			function() {}
		);


		/**
		* @description binding hoverIntent. returns undefined since the code to handle mouse out is in _uiHoverMethods.noOutline
		* return {undefined}
		*/
		hoverintent(
			W.get('header'),
			_uiHoverMethods.noOutline,
			function() {}
		);
	};


	/**
	 * @description initialize galleries
	 * @return {[type]} [description]
	 */
	var fGallery = function() {
		var fullz = W.domToArray( W.getAll('fGallery') );

		if ( !fullz ) { return; }

		fullz.forEach(function(full, i) {
			var gallery = W.js( 'gallerySlides', full );
			var captions = W.domToArray( gallery.getElementsByTagName( 'figcaption' ) );

			var $list;

			$( gallery ).slick({
				dots: false,
				lazyLoad: 'progressive',
				infinite: true,
				mobileFirst: true,
				prevArrow: W.jsAll('arrow', full )[0],
				nextArrow: W.jsAll('arrow', full )[1],
				speed: 350
			});

			$list = $(gallery).find('.slick-list');

			// reset max-height once slider initialized
			full.style.maxHeight = 'initial';
			full.className += ' ready';

			W.getAll('fLaunch')[i].className += ' ready';
			W.getAll('fLaunch')[i].setAttribute('data-ui', 'fullOpen');

			$( full ).find('.slick-cloned').attr('tabindex', '-1');
			$list.attr('tabindex', '-1');
			$list.attr('aria-hidden', 'true');
			$list.attr('role', 'presentation');

			// set max-width for captions and hide them
			// max-width is for overlay and fullview galleries
			captions.forEach(function( cap ) {
				var img = cap.parentNode.getElementsByTagName('img')[0];
				cap.style.maxWidth = img.clientWidth + 'px';
			});

			$( gallery ).slick('slickGoTo', '0' );
			captions[0].classList.remove('opacity-0');

			// pass some stuff to O for tracking
			$( gallery ).on('beforeChange', function( e, slick, curr, next ) {
				var $doc = jQuery( document );
				var gallery = e.target.parentNode;
				var slides = W.domToArray( W.jsAll( 'slide', e.target ) );
				var captions = W.domToArray( e.target.getElementsByTagName('figcaption') );
				var currCap = slides[ next + 1 ].getElementsByTagName('figcaption')[0];
				var slideNumber = slides[ next + 1].getAttribute('data-slide-number');

				// update curr gallery
				galleryRef = e.currentTarget;

				// hide all captions
				captions.forEach(function( cap ) {
					if ( !cap.classList.contains('opacity-0') ) {
						cap.className += ' opacity-0';
					}
				});

				// except for the current one
				if ( currCap ) {
					currCap.classList.remove('opacity-0');
				}

				try {
					$doc.trigger('contentType', gallery.getAttribute('data-gallery'));
					$doc.trigger('paginationValue', ['slide' + slideNumber, true]);
					$doc.trigger('theBeacon', ( 'slide' + slideNumber ));
				}
				catch(err) {
					console.error('Couldn\'t send gallery info');
				}
			});
		});
	};


	/**
	 * @description initialize galleries
	 * @return {[type]} [description]
	 */
	var iGallery = function() {
		var inlinez = W.domToArray( W.getAll('inlineGallery') );

		if ( !inlinez ) { return; }

		inlinez.forEach(function(inline) {
			var gallery = W.js( 'gallerySlides', inline );
			var captions = W.domToArray( gallery.getElementsByTagName( 'figcaption' ) );

			$( gallery ).slick({
				accessibility: true,
				dots: false,
				lazyLoad: 'progressive',
				infinite: true,
				mobileFirst: true,
				prevArrow: W.jsAll('arrow', inline )[0],
				nextArrow: W.jsAll('arrow', inline )[1],
				speed: 350
			});

			// reset max-height once slider initialized
			inline.style.maxHeight = 'initial';
			inline.className += ' ready';
			captions[0].classList.remove('opacity-0');

			$( gallery ).slick( 'slickGoTo', '0' );

			// pass some stuff to O for tracking
			$( gallery ).on('beforeChange', function( e, slick, curr, next ) {
				var $doc = jQuery( document );
				var gallery = e.target.parentNode;
				var allSlides = W.domToArray( W.jsAll( 'slide', e.target ) );
				var slides = allSlides.filter(function(slide) {
					return !slide.classList.contains('slick-cloned');
				});
				var captions = W.domToArray( e.target.getElementsByTagName('figcaption') );
				var currCap = slides[ next ].getElementsByTagName('figcaption')[0];
				var slideNumber = slides[ next ].getAttribute('data-slide-number');

				// update curr gallery
				galleryRef = e.currentTarget;

				// hide all captions
				captions.forEach(function( cap ) {
					if ( !cap.classList.contains('opacity-0') ) {
						cap.className += ' opacity-0';
					}
				});

				// except for the current one
				if ( currCap ) {
					currCap.classList.remove('opacity-0');
				}

				// RAD STUFF
				if ( slides[ next ].classList.toString().indexOf('rad') !== -1 ) {
					$doc.trigger( 'galleryRadReady', slides[ next ] );
				}

				try {
					$doc.trigger('contentType', gallery.getAttribute('data-gallery'));
					$doc.trigger('paginationValue', ['slide' + slideNumber, true]);
					$doc.trigger('theBeacon', ( 'slide' + slideNumber ));
				}
				catch(err) {
					console.error('Couldn\'t send gallery info');
				}
			});
		});
	};


	/**
	 * @description initialize galleries
	 * @return {[type]} [description]
	 */
	var oGallery = function() {
		var $overlay = $( W.get('oGallery') ).find( W.get( 'gallerySlides' ) );
		var captions = [];

		if ( !$overlay[0] ) { return; }

		captions = W.domToArray(
			$overlay[0].getElementsByTagName('figcaption')
		);

		$overlay.slick({
			dots: false,
			lazyLoad: 'progressive',
			infinite: true,
			mobileFirst: true,
			prevArrow: W.jsAll('arrow', W.get('oGallery') )[0],
			nextArrow: W.jsAll('arrow', W.get('oGallery') )[1],
			speed: 350
		});

		// set max-width for captions and hide them
		// max-width is for overlay and fullview galleries
		captions.forEach(function( cap ) {
			cap.style.maxWidth = cap.previousElementSibling.clientWidth + 'px';
		});

		$overlay.slick('slickGoTo', '0' );
		captions[0].classList.remove('opacity-0');
		// gallery.className += ' ready';

		// pass some stuff to O for tracking
		$overlay.on('beforeChange', function( e, slick, curr, next ) {
			var $doc = jQuery( document );
			var gallery = e.target.parentNode;
			var slides = W.domToArray( W.jsAll( 'slide', e.target ) );
			var captions = W.domToArray( e.target.getElementsByTagName('figcaption') );
			var currCap = slides[ next + 1 ].getElementsByTagName('figcaption')[0];
			var slideNumber = slides[ next + 1].getAttribute('data-slide-number');

			// update curr gallery
			galleryRef = e.currentTarget;

			// hide all captions
			captions.forEach(function( cap ) {
				if ( !cap.classList.contains('opacity-0') ) {
					cap.className += ' opacity-0';
				}
			});

			// except for the current one
			if ( currCap ) {
				currCap.classList.remove('opacity-0');
			}

			try {
				// might have fudged this a bit
				$doc.trigger('contentType', gallery.getAttribute('data-gallery'));
				$doc.trigger('paginationValue', ['slide' + slideNumber, true]);
				$doc.trigger('theBeacon', ( 'slide' + slideNumber ));
			}
			catch(err) {
				console.error('Couldn\'t send gallery info');
			}
		});
	};

	var commentLink = function() {
		_uiMethods.commentsOpen();
	};

	/**
	* @description key commands for interactions
	* @returns {function} [the function associated with the key command]
	* @see start typing on any page
	*/
	var keyCommandCentral = function() {
		var typing = false;

		// check to see if user is typing in a field
		$( 'input' ).blur(function() {
			typing = false;
		}).focus(function() {
			typing = true;
		});

		$( 'body' ).on('keydown', function( e ) {
			var i = 65; // the letter a

			// escape should kill everything all the time
			if ( e.keyCode === 27 ) {
				return raf( _uiMethods.closeEverything.bind(this) );
			}

			// don't if user is typing (like, in a comment field or form)
			if ( !typing ) {
				// dont trigger on shortcuts
				if ( !e.ctrlKey &&
					!e.altKey &&
					!e.shiftKey &&
					!e.metaKey ) {

					// opens search if alphabet key clicked
					// 65 - 91 is the range for the alphabet
					for ( i; i < 91; i++ ) {
						if ( e.keyCode === i ) {
							return raf( _uiMethods.searchOpen.bind(this) );
						}
					}

					// jack the scroll to ensure better readability
					// because of our nav using space to navigate the site
					// is difficult, as it requires having to scroll back up
					// every single time, jack the event and reduce
					// the amount space moves the page by the nav height
					// tldr you can space through without losing txt
					if ( e.keyCode === 32 || // space
						e.keyCode === 34 || // pgDown (alt)
						e.keyCode === 33 ) { // pgUp (alt)
						// needs to be here to prevent double scroll
						e.preventDefault();
						return raf(function() {
							return _uiMethods.spaceJack( e );
						});
					}

					// if tabbin, show elements if they gain focus
					// if tabbin in gallery, tab through it
					// @see if tabbing through secondary links, nav should open
					if ( e.keyCode === 9 ) {
						return _uiMethods.tabJack( e );
					}

					// galleries are only on article pages so
					if ( document.body.classList.contains('single') ) {
						// decrements curr gallery (< key)
						if ( e.keyCode === 37 ) {
							return raf(function() {
								return $( galleryRef ).slick('slickPrev');
							});
						}
						// increments curr gallery (> key)
						else if ( e.keyCode === 39 ) {
							return raf(function() {
								return $( galleryRef ).slick('slickNext');
							});
						}
					}
				}
			}
		});
	};


	/**
	* @description all ui methods go here for organization
	* @private
	*/
	var _uiMethods = {
		/**
		* @description convenience function to call all other close functions
		* @see if you hit esc, this function should close all things
		* @author Ross Patton
		*/
		closeEverything: function() {
			_uiMethods.overlayClose();
			_uiMethods.fullClose();
			_uiMethods.navClose();
			_uiMethods.searchClose();
			_uiHoverMethods.hoverOut();
		},


		/**
		* @description convenience function we call when nav is unpinned
		* @see if you scroll down on a page, nav should close out
		* @author Ross Patton
		*/
		closeNav: function() {
			_uiMethods.navClose();
			_uiHoverMethods.hoverOut();
		},

		/**
		* @description close the disqus coments div on click
		* @author Ian Sayre
		*/
		commentsClose: function() {
			var commentSection = W.get('commentContainer');
			var comTog = W.get('comTog');
			var commentX = W.get('commentX');

			// jquery needed for transit and to ensure
			// we dont have a giant blank space before closing
			// @TODO make a non query version of transit
			$( commentSection )
				.transit()
				.css('height', '0px')
				.addClass('visibility-hidden');

			commentX.classList.remove('ui-comment-close');
			commentX.className += ' ui-comment-open';
			comTog.setAttribute('data-ui', 'commentsOpen');

			W.get('commentText').textContent = 'View comments';

			// if this isn't here, commentSection will pop back open after the close transition ends
			$( commentSection ).on( 'transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function() {
					commentSection.style.height = '0px';
				}
			);
		},


		/**
		* @description open the disqus comments div on click
		* @author Ian Sayre
		*/
		commentsOpen: function() {
			var commentSection = W.get('commentContainer');
			var commentX = W.get('commentX');
			var comTog = W.get('comTog');
			var disqusHeight = W.get('disqusContainer').clientHeight;

			// checking to see if the view size
			// this accounts for the call from the sharing module (which is only visible on larger viewports)
			_uiMethods.scrollToComments();

			if ( comTog.getAttribute('data-ui') !== 'commentsClose' ) {
				commentSection.className += ' comments-active';
				commentSection.classList.remove('visibility-hidden');
				commentSection.style.height = disqusHeight + 'px';
				commentX.classList.remove('ui-comment-open');
				commentX.className += ' ui-comment-close';
				comTog.setAttribute('data-ui', 'commentsClose');

				W.get('commentText').textContent = 'Hide comments';
			}

			$( commentSection ).on( 'transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function() {
				commentSection.style.height = '100%';
			} );
		},


		/**
		* @description handle fallback clicks
		* @author Ian Sayre
		*/
		fallbackClick: function() {
			// if ( W.isMob() ) {
			// 	window.open('https://www.wired.com/go/mobilefailsafe', '_blank');
			// 	return;
			// }
			// window.open('http://www.wired.com/go/failsafe', '_blank');

			window.open('/whitelist-wired', '_blank');
			return;
		},


		/**
		* @description scroll to chapter on click
		* @see if chapters on, in fsb, click a chapter
		* @author Ross Patton
		*/
		fsbScrollToChapter: function( e ) {
			e.preventDefault();
			var chapterNum = e.target.getAttribute('data-anchor');
			var target = FSBapp.cache.chaptersArr[ chapterNum - 1 ];

			// set new active chapter
			$.js( 'anchor' ).removeClass( 'active' );
			e.target.className += ' active';

			$('html, body').animate({
				scrollTop: $( target ).offset().top - 100
			}, 500);
		},


		/**
		* @description open expandable gallery (white overlay gallery)
		* @author Ross Patton
		*/
		fullClose: function( e ) {
			var arrows = W.jsAll( 'arrow', W.get('fGallery') );
			// dont close if we click the arrows
			if ( typeof e !== 'undefined' ) {
				if ( e.target === arrows[0] || e.target === arrows[1] ) {
					return;
				}
			}

			if ( W.get('fGallery') ) {
				W.get('fGallery').classList.remove('active');
			}
		},


		/**
		* @description open full gallery (black overlay gallery)
		* @author Ross Patton
		*/
		fullOpen: function() {
			W.get('fGallery').className += ' active';
		},


		// this being used anywhere? why do i exist?
		hideMe: function( e ) {
			e.preventDefault();
			var $target = $( e.currentTarget );

			if ( !$target.is( '.success' ) ) {
				$target.stop().fadeOut();
			}
		},


		/**
		 * @description hide how we rate on review articles
		 * @param {object} e [the event object]
		 * @return void
		 * @author ben / ross
		 */
		howRateClose: function( e ) {
			e.preventDefault();
			$( W.get('howWeRate') ).transit().addClass('hide');
		},


		/**
		 * @description show how we rate on review articles
		 * @param {object} e [the event object]
		 * @return void
		 * @author ben / ross
		 */
		howRateOpen: function( e ) {
			e.preventDefault();
			$( W.get('howWeRate') ).transit().removeClass('hide');
		},


		/**
		* @description closes the global nav
		* @see  click close icon in upper left, if working should close nav
		* @author Ross Patton
		*/
		navClose: _.debounce(function() {
			var box = W.get('boxes');
			var pre = W.get('prefooter');
			var $hdr = $( W.get('header') );

			// force transit to be unstuck
			$hdr.off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');

			$('[data-headroom]').removeClass('nav-active subscribe-active');

			box.classList.remove('ui-close');

			if ( !box.classList.contains('ui-boxes') ) {
				box.className += ' ui-boxes';
			}

			W.get('header').classList.remove('hr-pinned');
			W.get('navTog').setAttribute('data-ui', 'navOpen');

			if ( !W.get('navSecondary').classList.contains('hide') ) {
				W.get('navSecondary').className += ' hide';
			}

			if ( W.isMob() && navActive ) {
				// stuff below here is for mobile
				// remove no matter what in case of resize
				$hdr.css({
					height: '',
					'min-height': 0,
					'overflow-x': ''
				});

				$('body').css({
					height: '',
					'overflow-x': 'visible'
				});

				$hdr.removeClass('absolute').addClass('fixed');
				W.get('main').classList.remove('hide');
				W.get('footer').classList.remove('hide');

				// section fronts dont have prefooters
				if ( pre ) {
					pre.classList.remove('hide');
				}

				// x-browser scrolltop to set scroll position
				document.body.scrollTop = document.documentElement.scrollTop = currPos;
				// end mobile stuff
			}

			navActive = false;
		}, 50),


		/**
		* @description  open the global nav
		* @see  click box icon in upper left, if working should open nav
		* @author Ross Patton
		*/
		navOpen: _.debounce(function() {
			var $hdr = $( W.get('header') );
			var box = W.get('boxes');
			var preFooter;

			_uiMethods.searchClose();
			_uiHoverMethods.hoverOut();

			$hdr.off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');

			$('[data-headroom]')
				.removeClass('hr-unpinned')
				.addClass('nav-active hr-pinned');

			box.classList.remove('ui-boxes');
			box.className += ' ui-close';
			W.get('navTog').setAttribute( 'data-ui', 'navClose' );
			W.get('navSecondary').classList.remove('hide');

			// some jank magic for mobile takeover effect
			if ( W.isMob() && !navActive ) {
				currPos = window.pageYOffset;
				preFooter = W.get('prefooter');

				// timeout ensures the height we get is the correct one
				// and not one mid transition
				setTimeout(function() {
					var hdrHeight =
						$( W.get('logoBar') ).height() +
						$( W.get('navSearch') ).height() +
						$( W.get('navSections') ).height() +
						$( W.get('navSecondary') ).height() +
						50;

					$('body').css({
						height: hdrHeight,
						'min-height': hdrHeight,
						'overflow-x': 'hidden'
					});

					$hdr.css({
						height: hdrHeight,
						'min-height': $(window).height()
					});

					$hdr.removeClass('fixed').addClass('absolute');
					W.get('main').className += ' hide';
					W.get('footer').className += ' hide';

					// section fronts dont have prefooters
					if ( preFooter ) {
						preFooter.className += ' hide';
					}

					// x-browser scrolltop to set scroll position
					document.body.scrollTop = document.documentElement.scrollTop = 0;

				}, 175);
			}

			navActive = true;
		}, 50),


		/**
		* @description open expandable gallery (white overlay gallery)
		* @author Ross Patton
		*/
		overlayClose: function( e ) {
			var arrows = W.jsAll( 'arrow', W.get('oGallery') );
			// dont close if we click the arrows
			if ( typeof e !== 'undefined' ) {
				if ( e.target === arrows[0] || e.target === arrows[1] ) {
					return;
				}
			}

			if ( W.get('oGallery') ) {
				W.get('oGallery').classList.remove('active');
			}

		},


		/**
		* @description open white overlay gallery
		*              also vertically center imgs, why do it on click?
		*              because users might not even click anything plus
		*              images have a height and width of 0 while being hidden
		* @param  {object} e [event object]
		* @author Ross Patton
		*/
		overlayOpen: function( e ) {
			var slide = e.target.getAttribute('data-order');

			// update gallery ref
			galleryRef = W.get('oGallery');
			W.get('oGallery').className += ' active';
			$( W.js('gallerySlides', galleryRef ) ).slick('slickGoTo', slide );
		},


		/**
		* @description just displays the 'what is outbrain?' overlay on click
		* @author Ross Patton
		*/
		poweredByOutbrain: function() {
			return OBR.extern.callWhatIs('http://www.outbrain.com/what-is/default/en','',-1,-1,true ,null);
		},


		/**
		* @description scroll back to top of page if on article
		* @author Ross Patton
		*/
		scrollToTop: function( e ) {
			e.preventDefault();
			$('html, body').animate({
				scrollTop: '0'
			}, 500);
		},


		/**
		* @description scroll to the comments section
		* @author Ian Sayre
		*/
		scrollToComments: function() {
			var scrollDistance = $( W.get('main') ).height() + 390;

			$('html, body').animate({
				scrollTop: scrollDistance
			}, 500);
		},


		/**
		* @description closes full screen search
		* @see if you click the close icon on top right, should close search
		* @author Ross Patton
		*/
		searchClose: function() {
			var hdr = W.get('header');
			var search = W.get('search');

			if ( W.isMobPlus() ) {
				W.get('navSearch').style.opacity = '0';
			}

			search.classList.remove('ui-close');
			search.className += ' ui-search';
			W.get('searchTog').setAttribute('data-ui', 'searchOpen');
			$( W.get('searchInput') ).blur();

			// yeah... i half assed this a bit
			setTimeout(function() {
				hdr.classList.remove('search-active');
				W.get('navSearch').style.opacity = '';
			}, 350);
		},


		/**
		* @description opens full screen search
		* @see if you click the search icon on top right, should open search
		* @author Ross Patton
		*/
		searchOpen: function() {
			var hdr = W.get('header');
			var search = W.get('search');

			_uiMethods.navClose();
			_uiHoverMethods.hoverOut();

			hdr.style.transition = 'none';
			hdr.className += ' search-active';

			if ( W.isBigPlus() ) {
				hdr.removeAttribute('data-hover');
			}

			search.className += ' ui-close';
			search.classList.remove('ui-search');
			W.get('searchTog').setAttribute('data-ui', 'searchClose');
			$( W.get('searchInput') ).focus();
		},


		/**
		* @description hijack default spacebar/pgDown/pgUp behavior
		*              for accessibility/readability
		* @see hit space on an article and read freely
		* @author Ross Patton
		*/
		spaceJack: function( e ) {
			var currPos = window.pageYOffset;
			// the 50 is just paddin
			var viewport = window.innerHeight - ( W.get('header').clientHeight + 50 );
			var newPos = currPos + viewport; // space or pgdown

			// pgup
			if ( e.keyCode === 33 ) {
				newPos = currPos - viewport;
			}

			document.body.scrollTop = document.documentElement.scrollTop = newPos;
		},


		/**
		* @description submits news form on anchor click or form submit
		* @see  homepage footer CM units
		* @author Ben Chirlin
		*/
		submitForm: function( el ) {
			var $form,
				$email,
				$parent,
				$input,
				$error,
				$success;

			// Waits for a click or submit before firing anything else
			if ( $( el.target ).is( 'input' ) ) {
				if ( el.type === 'click' || el.type === 'submit' ) {
					return;
				}
			}

			el.preventDefault();

			// Newsletter elements
			// @TODO don't need jquery for these selectors
			$parent  = $( el.target ).parents('.cm-newsletter');
			$form    = $('.mc-embedded-subscribe-form', $parent);
			$input   = $('.mce-email', $parent);
			$error   = $('.email-submit .error', $parent);
			$success = $('.email-submit .success', $parent);

			// Email value from newsletter input
			$email   = W.validateEmail( $('.mce-email', $parent).val() );

			if ( $('.news-msg', $parent ).is(':visible') ) {
				$('.news-msg', $parent ).fadeOut();
			}

			// Clear value of newsletter input on click
			$input.on('click',
				function() {
					$( this ).val('');
				}
			);

			// Validate input
			// @TODO only thing you need jquery for here is the ajax
			if ( $email ) {
				$.ajax({
					type: $form.attr('method'),
					url: $form.attr('action'),
					data: $form.serialize(),
					cache: false,
					dataType: 'json',
					contentType: 'application/json; charset=utf-8',
					error: function() {
						$parent.addClass('error exchange-sm').text('Could not connect to the registration server. Please try again later.').fadeIn( 250 );
					},
					success: function( data ) {
						if ( data.result !== 'success' ) {
							var message;

							if ( data.msg.indexOf('<a') !== -1 ) {
								message = 'The email you entered has already been subscribed to the WIRED newsletter.';
							}
							else {
								message = 'Too many subscribe attempts using this email address. Please try again in 5 minutes.';
							}

							// focus is needed for accessibility
							$parent
							.focus()
							.addClass( 'error link-underline-sm exchange-sm' )
							.text( message )
							.fadeIn( 250 );
						}
						else {
							// Fade in newsletter success message and disable submission
							$form.removeAttr('data-ui');

							// focus is needed for accessibility
							$success
							.focus()
							.toggleClass('visibility-hidden opacity-0')
							.delay(3000)
							.promise()
							.done(function() {
								$success.toggleClass('visibility-hidden opacity-0');
								$form.attr('data-ui','submitForm');
								$input.val('');
							});
						}
					}
				});
			}
			else {
				// Fade in newsletter error message and disable submission
				$form.removeAttr('data-ui');
				$error.toggleClass('visibility-hidden opacity-0');
				$input.on('click',
					function() {
						$error.toggleClass('visibility-hidden opacity-0');
						$form.attr('data-ui','submitForm');
						$input.val('');
					});
			}
		},


		/**
		* @description open cm-header
		* @author Ian Sayre
		*/
		subOpen: function() {
			if ( W.isMob() ) {
				window.open('http://www.wired.com/go/mobilefailsafe', '_blank');
				return;
			}
				window.open('http://www.wired.com/go/failsafe', '_blank');
				return;
		},


		/**
		 * @description jack that tab key, make it work for us
		 *              focus on things better, tab through galleries
		 * @param {object} [e] [the event object]
		 */
		tabJack: function( e ) {
			// if no-outline was added remove it
			// for dat tabbability
			$('.no-outline')
				.add('.focused')
				.removeClass('focused no-outline');

			e.target.className += ' focused';

			/**
			 * @description just returns true if in hdr and false if not
			 * @return {Boolean}
			 */
			function _isInHdr() {
				return (
					$( W.get('header') ).has( e.target ).length > 0 ||
					$( e.target ).parents('#global-header').length > 0
				);
			}

			/**
			 * @description true if in a gallery and false if not
			 * @return {Boolean}
			 */
			function _isInGallery() {
				return (
					$( galleryRef ).has( e.target ).length > 0 ||
					$( e.target ).parents( galleryRef ).length > 0
				);
			}

			// if hdr gets focus open it
			if ( !navActive && _isInHdr() ) {
				return _uiMethods.navOpen();
			}
			// if the focus leaves the hdr close it
			else if ( navActive && !_isInHdr() ) {
				return _uiMethods.closeNav();
			}
			else if ( galleryRef && _isInGallery() ) {
				return $( galleryRef )
					.find('.opacity-0')
					.removeClass('opacity-0');
			}
		}
	};


	/**
	* @desciption methods object for hover events
	*/
	var _uiHoverMethods = {
		/**
		 * @description Open the CM dropdown menu on hover
		 * @author Ian Sayre
		 */
		hoverIn: function() {
			// handle in
			var header = W.get('header');
			var subTog = W.get('subTog');
			var cmNewsletter = W.get('cmNewsletter');
			var cmHeader = W.get('cmHeader');
			var navSecondary = W.get('navSecondary');

			_uiMethods.searchClose();

			$('[data-headroom]')
				.transit()
				.addClass('subscribe-active')
				.removeClass('nav-active');

			subTog.className += ' ui-close';

			header.setAttribute('data-hover', 'hoverOut');
			header.className += ' hr-pinned';
			header.classList.remove('hr-unpinned');

			cmNewsletter.classList.remove('border-l');
			cmNewsletter.classList.remove('border-r');
			cmHeader.classList.remove('border-l');
			cmHeader.classList.remove('border-r');
			navSecondary.classList.add('hide');
		},


		/**
		* @desciption close cm-header on mouseleave
		* @author Ian Sayre
		*/
		hoverOut: _.debounce(function() {
			var $hr = $('[data-headroom]');

			if ( !$hr.hasClass('subscribe-active') ) {
				return;
			}

			$hr.transit().removeClass('subscribe-active');
			W.get('header').classList.remove('hr-pinned');
			W.get('subTog').classList.remove('ui-close');
			W.get('navSecondary').classList.remove('hide');
			W.get('header').removeAttribute('data-hover');
			W.get('searchTog').setAttribute('data-ui', 'searchOpen');
		}, 50),


		noOutline: function() {
			return $( W.get('header')
				.getElementsByTagName('button') )
				.addClass('no-outline');
		}
	};


	// This closes the header-cm div on scroll
	jQuery( document ).on('headroomUnpinned',
		function() {
			return _uiMethods.navClose();
		}
	);


	// expose public functions
	return {
		bound: _.once( bound ),
		commentLink: _.once( commentLink ),
		iGallery: _.once( iGallery ),
		fGallery: _.once( fGallery ),
		oGallery: _.once( oGallery ),
		keyCommand: _.once( keyCommandCentral )
	};
}());

/**
* @description kick off our scripts on dom ready
*              using lots of try-catch here so errors earlier in the
*              init won't break functioning code fired after
*              i'd rather take a small performance hit when theres an error
*              and have annoying code repetition than have stuff not work at all
* @author Ross Patton
*/


// bind *all* ui interactions to one (well, a couple now) event listener
try {
	W.ui.bound();
}
catch( err ) {
	console.error('couldnt initialize UI cause of ' + err);
}

// remove comma from latest news
try {
	W.init.removeCommaLatestNews();
}
catch( err ) {
	console.error( 'INIT ERROR: couldnt do Wired.init.removeCommaLatestNews cause of ' + err );
}

try {
	W.init.header();
}
catch( err ) {
	console.error('INIT ERROR: couldnt initialize headroom cause of ' + err);
}

try {
	W.init.videoPlaylistHeightFix();
}
catch( err ) {
	console.error('INIT ERROR: couldnt initialize videoPlaylistHeightFix cause of ' + err);
}

if ( document.body.classList.contains('single') ) {
	// kick off we recommend call to outbrain
	try {
		W.recirc.outbrain( W.get('we-recommend'), 'JS_1', 'we-recommend' );
	}
	catch( err ) {
		W.smart.rec( W.get('we-recommend') );
		console.error( 'INIT ERROR: couldnt initialize outbrain cause of ' + err );
	}

	// kick off around the web call to outbrain
	try {
		W.recirc.outbrain( W.get('around-the-web'), 'JS_2', 'around-the-web' );
	}
	catch( err ) {
		W.smart.rec( W.get('around-the-web') );
		console.error( 'INIT ERROR: couldnt initialize outbrain cause of ' + err );
	}
}

// social counts are retrieved for single posts and sponsor posts only
if ( ( document.body.classList.contains('single') &&
	!document.body.classList.contains('single-magazine') ) ||
	document.body.classList.contains('sponsored-polar') ) {

	try {
		W.init.fbCount();
	}
	catch( err ) {
		console.error( 'INIT ERROR: couldnt get fb count cause of: ' + err );
	}

	try {
		W.init.twitCount();
	}
	catch( err ) {
		console.error( 'INIT ERROR: couldnt get pint count cause of: ' + err );
	}

	try {
		W.init.pintCount();
	}
	catch( err ) {
		console.error( 'INIT ERROR: couldnt get twit count cause of: ' + err );
	}
}

// block for article only functionality
if ( document.body.classList.contains('single') &&
	!document.body.classList.contains('single-magazine') ) {

	if ( W.get('inlineGallery') || W.get('fGallery') ) {
		document.body.className += ' gallery-post';
	}
	else {
		document.body.className += ' no-gallery';
	}

	if ( W.get('inlineGallery') ) {
		try {
			W.ui.iGallery();
			$('.slick-list').attr('tabindex', '-1');
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt init gallery cause of ' + err );
		}
	}

	// kicks off the request animation frame loop
	try {
		W.monitor.init();
	}
	catch( err ) {
		console.error( 'INIT ERROR: couldnt initialize stickies cause of ' + err );
	}

	// if article is too short, manually override stickyness
	if ( W.isMobPlus() ) {
		try {
			W.init.articleHeight();
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt initialize article height check cause of ' + err );
		}
	}

	// wrap inline youtube and vimeo videos in post content
	if ( !document.body.classList.contains('short-post') ) {
		try {
			W.init.addVideoWrapper();
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt do Wired.init.addVideoWrapper cause of ' + err );
		}
	}

	// wrap first three words in span with lede class
	if ( !document.body.classList.contains('tumblr-liveblog') ) {
		try {
			W.init.lede( 3 );
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt do Wired.init.lede cause of ' + err );
		}
	}

	// old galleries insert credit icons
	if ( document.body.classList.contains('gallery-post') ) {
		try {
			W.init.addCreditIconsIfMissing();
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt add credit icon cause of ' + err );
		}
	}
}

// init key commands
try {
	W.ui.keyCommand();
}
catch( err ) {
	console.error( 'INIT ERROR: couldnt bind key commands cause of ' + err );
}

// Shows 1 of the social CM units
try {
	W.init.exposeRandomSocialBox();
}
catch( err ) {
	console.error( 'INIT ERROR: random social CM unit could not be displayed because of ' + err );
}

// attempt 'rad' fallback if rads blocked
if ( W.fallback() ) {
	try {
		W.init.fallback();
	}
	catch( err ) {
		console.error( 'INIT ERROR: couldnt show CM fallbacks ' + err );
	}
}

// removes click delay on old browsers ( safari, old chrome / ff )
try {
	FastClick.attach(document.body);
}
catch( err ) {
	console.error( 'INIT ERROR: couldnt attach fastClick cause of ' + err );
}

// if they resize while the nav is open, reset the nav
// prolly not the best place to put this
// also check leaderboard should be shown or not
$(window).on('resize', function() {
	var pre = W.get('prefooter');

	if ( W.isMed() ) {
		document.body.classList.remove('no-scroll');
		$(W.get('header')).removeClass('absolute').addClass('fixed');
		W.get('header').style.height = '';
		W.get('main').classList.remove('hide');
		W.get('footer').classList.remove('hide');

		// section fronts dont have prefooters
		if ( pre && pre.classList.contains('hide') ) {
			pre.classList.remove('hide');
		}
	}
});


$(window).load( function() {
	if ( document.body.classList.contains('single') &&
		!document.body.classList.contains('tumblr-liveblog') ) {
		if ( W.get('fGallery') ) {
			try {
				W.ui.fGallery();
			}
			catch( err ) {
				console.error( 'INIT ERROR: couldnt init gallery cause of ' + err );
			}
		}

		// init expandable gallery
		// first init it with slick
		// after that, set void on hrefs and set slide #s
		try {
			W.ui.oGallery();
			W.init.oGallery();
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt initialize expandable gallery cause of ' + err );
		}

		$('.slick-list').attr('tabindex', '-1');
	}

	if ( window.location.href.indexOf('/#comment-') >= 0 ) {
		try {
			W.ui.commentLink();
		}
		catch( err ) {
			console.error( 'INIT ERROR: couldnt find disqus comment because ' + err );
		}
	}

	// Check for refresh property on main grid
	var grid = document.getElementById( 'grid' );
	if ( grid ) {
		var refresh = grid.getAttribute( 'data-refresh' );
		// If refresh time is set, kick off idle refresh watcher
		if ( refresh ) {
			refresh = parseInt( refresh, 10 );
			W.init.refresher( refresh );
		}
	}
});

}(jQuery, window.requestAnimationFrame, {}));/* end file: wired*/

/* file: tracking :  : /cn/runtime/wired-wp/wordpress/wp-content/themes/Phoenix/assets/js/dist/track.min.js */!function(e,t){"use strict";if(t.tracking=function(){var t=function(t,n){return COMSCORE.beacon({c1:"2",c2:"6035094",c4:document.location.href,c5:n,c8:e("title").text()})},n=function(e,t,n){return"string"!=typeof t&&console.error("TYPE ERROR: prop32 should be a string"),n?CN.stats.omniture.setPaginationValue(t).trackAjaxPage():CN.stats.omniture.setPaginationValue(t)},o=function(e,t){if("string"!=typeof t)console.error("TYPE ERROR: contentType needs to be a string");else{if("slideshow|embedded"===t||"slideshow|overlay"===t||"slideshow|fullscreen"===t)return CN.stats.omniture.setContentType(t);console.error("contentType is not valid")}},r=function(){return s.linkTrackVars="events",s.linkTrackEvents="event12",s.events="event12",s.tl(!0,"o","Article Bottom",null),!0};return{beacon:t,setPaginationValue:n,setContentType:o,sendArticleBottomEvent:r}}(),"undefined"!=typeof CN.stats){try{jQuery(document).on("paginationValue",function(e,n,o){return t.tracking.setPaginationValue(e,n,o)})}catch(n){console.error("Failed to set listener on paginationValue because of: ",n)}try{jQuery(document).on("contentType",function(e,n){return t.tracking.setContentType(e,n)})}catch(n){console.error("Failed to set listener on setCustomProp because of: ",n)}try{jQuery(document).on("articleBottom",function(e){return t.tracking.sendArticleBottomEvent(e)})}catch(n){console.error("Failed to set listener on articleBottom because of: ",n)}}if("undefined"!=typeof COMSCORE)try{jQuery(document).on("theBeacon",function(e,n){return t.tracking.beacon(e,n)})}catch(n){console.error("We failed to alert the beacon because of: ",n)}}(jQuery,{});/* end file: tracking*/
